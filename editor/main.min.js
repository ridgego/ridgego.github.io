(()=>{var e,t={16294:(e,t,n)=>{"use strict";n(50796);var i=n(27378),o=n(37634),a=n(96292),r=n.n(a),s=n(80433),l=n(31542),c=n(1892),d=n.n(c),p=n(95760),m=n.n(p),h=n(38311),g=n.n(h),u=n(58192),b=n.n(u),f=n(38060),v=n.n(f),y=n(54865),w=n.n(y),x=n(8731),E={};E.styleTagTransform=w(),E.setAttributes=b(),E.insert=g().bind(null,"head"),E.domAPI=m(),E.insertStyleElement=v(),d()(x.Z,E),x.Z&&x.Z.locals&&x.Z.locals;var C=n(86947);const k=e=>new C.ZP(document.body,Object.assign({dimensionViewable:!0,deleteButtonViewable:!1,container:document.body,snappable:!1,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!1,rotatable:!1,warpable:!1,pinchable:!1,origin:!0,keepRatio:!1,edge:!1,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipTargetBounds:!0},e));var S=n(98268),z=n(90566),P=n(21601),N=n(44426),L={};L.styleTagTransform=w(),L.setAttributes=b(),L.insert=g().bind(null,"head"),L.domAPI=m(),L.insertStyleElement=v(),d()(N.Z,L),N.Z&&N.Z.locals&&N.Z.locals;const{Text:O}=s.Typography,F=i.createContext("light");class T extends i.Component{constructor(){super(),this.ref=i.createRef(),this.state={state:"normal",errors:null,openSearch:!1,search:null,hasError:!1}}static getDerivedStateFromError(e){return{errors:e,hasError:!0}}componentDidMount(){this.enablePanelMoveResize()}enablePanelMoveResize(){const e=k({className:"workspace-movable",target:this.ref.current,dragTarget:this.ref.current.querySelector(".title-bar .icon-handle")});e.on("resize",(({target:e,width:t,height:n,delta:i,transform:o})=>{e.style.transform=o,i[0]&&(e.style.width=`${t}px`),i[1]&&(e.style.height=`${n}px`)})),e.on("drag",(e=>{e.target.style.transform=e.transform,Array.from(document.querySelectorAll(".movable-panel")).forEach((e=>{e.style.zIndex=300})),this.ref.current.style.zIndex=301}))}render(){const{onClose:e,position:t,visible:n,title:o,padding:a="0",className:r="default-panel"}=this.props,{state:c,openSearch:d,search:p}=this.state,m={};if(Array.isArray(t)&&6===t.length){const[e,n,i,o,a,r]=t;e&&(m.left=e+"px"),n&&(m.top=n+"px"),i&&(m.right=i+"px"),o&&(m.bottom=o+"px"),a&&(m.width=a+"px"),r&&(m.height=r+"px")}n||(m.display="none");const h=["movable-panel",r];return d&&h.push("open-search"),l.createPortal(i.createElement("div",{ref:this.ref,className:h.join(" "),style:m,id:this.props.id},i.createElement("div",{className:"title-bar",style:{}},i.createElement(S.Z,{className:"icon-handle"}),o&&i.createElement(O,{className:"title-text"},o),d&&i.createElement(s.II,{placeholder:"输入查询条件",prefix:i.createElement(z.Z,null),suffix:i.createElement(P.Z,{onClick:()=>{this.setState({openSearch:!1,search:null})}}),className:"toggle-search",value:p,onChange:e=>{this.setState({search:e})}}),i.createElement(s.zx,{className:"icon-search",icon:i.createElement(z.Z,null),theme:"borderless",size:"small",type:"tertiary",onClick:()=>{this.setState({openSearch:!0,search:""})}})),i.createElement("div",{className:"panel-content",style:{}},this.state.hasError?i.createElement("div",null,"Something went wrong. ",JSON.stringify(this.state)):i.createElement(F.Provider,{value:p},this.props.children))),document.body)}}var j=n(43266),R=n(67124);const A=({value:e,options:t,onChange:n})=>i.createElement(s.J2,{showArrow:!0,trigger:"click",content:i.createElement(i.Fragment,null,i.createElement(s.zx,{size:"small",onClick:()=>{n(null)}},"清除颜色"),i.createElement(R.xS,{color:e||"#fff",width:220,style:{boxShadow:"none"},triangle:"hide",onChange:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))},onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}}))},i.createElement(s.zx,{size:"small",style:{backgroundColor:e,height:"22px",width:"22px",margin:"0 3px",padding:0,border:"1px solid #ccc"}})),M=(0,s.Q2)(A),I=(0,s.Q2)((({value:e,onChange:t})=>{const[n="",o="solid",a="#ccc"]=(e||"").split(" ");return i.createElement(s.T,null,i.createElement(s.Rn,{style:{width:60},size:"small",value:parseInt(n)||0,onChange:e=>{t(`${e}px ${o} ${a}`)}}),i.createElement(s.Select,{size:"small",value:o,onChange:e=>{t(`${n} ${e} ${a}`)}},i.createElement(s.Select.Option,{value:"solid"},"实线"),i.createElement(s.Select.Option,{value:"dashed"},"点划线")),i.createElement(A,{value:a,onChange:e=>{t(`${n} ${o} ${e}`)}}))}));var D=n(92450),Z=n(45047),V={};V.styleTagTransform=w(),V.setAttributes=b(),V.insert=g().bind(null,"head"),V.domAPI=m(),V.insertStyleElement=v(),d()(Z.Z,V),Z.Z&&Z.Z.locals&&Z.Z.locals;var U=n(49601),B={};B.styleTagTransform=w(),B.setAttributes=b(),B.insert=g().bind(null,"head"),B.domAPI=m(),B.insertStyleElement=v(),d()(U.Z,B),U.Z&&U.Z.locals&&U.Z.locals;var J=n(23240),q=n(96051),$=n.n(q),W=n(16651),Y=n.n(W);const G=r()("ridge:loader"),Q=class{constructor({baseUrl:e}){this.baseUrl=e,G("RidgeLoader baseUrl: "+this.baseUrl),this.loadedFonts=[],this.getPackageJSON=Y()(this._getPackageJSON),this.loadComponent=Y()(this._loadComponent),this.loadScript=Y()(this._loadScript)}getComponentUrl({packageName:e,path:t}){return`${this.baseUrl}/${e}/${t}`}getPackageJSONUrl(e){return`${this.baseUrl}/${e}/package.json`}async _loadComponent(e){let t,n;if("object"==typeof e)t=e.packageName,n=e.path;else{const i=e.split("/");i[0].startsWith("@")?(t=i.splice(0,2).join("/"),n=i.join("/")):(t=i.splice(0,1).join("/"),n=i.join("/"))}return await this.doLoadComponent({packageName:t,path:n})}async doLoadComponent({packageName:e,path:t}){const n=await this.getPackageJSON(e);if(null==n)return null;await this.confirmPackageDependencies(n);const i=await this.loadComponentScript({packageName:e,path:t});return i&&await this.prepareComponent(i,{packageName:e,path:t},n),i}async prepareComponent(e,{packageName:t,path:n},i){e.packageName=t,e.path=n,e.title=e.title||e.label,e.requires&&e.requires.length&&await this.loadExternals(e.requires),e.icon&&(e.icon=`${this.baseUrl}/${t}/${e.icon}`),e.component?"function"==typeof e.component&&"AsyncFunction"===e.component.constructor.name&&(e.component=(await e.component()).default):G("组件 Component定义未加载到",e)}on(e,t){this.eventCallbacks.push({eventName:e,callback:t})}async loadComponentScript({packageName:e,path:t}){await this.loadScript(`${this.baseUrl}/${e}/build/${t}.js`);const n=`${e}/${t}`;return window[n]?window[n].default:null}getComponent(e){return this.componentCache[e]?this.componentCache[e]:null}async loadCss(e){const t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("HEAD")[0].appendChild(t)}async _loadScript(e){if(null!=e)try{const t=e.replace(/\/\//g,"/");return G("加载库:"+t),await $()(t,{returnPromise:!0,before:function(e,t){t.crossOrigin=!0}}),t}catch(t){console.error("JS Load Error:",`${e}`)}}async _getPackageJSON(e){const t=this.getPackageJSONUrl(e);try{return await J.Z.get(t).json()}catch(e){return G("NPM Package Not Loaded:",t),null}}async confirmPackageDependencies(e){if(e.externals)for(const t of e.externals)await this.loadScript(`${this.baseUrl}/${e.name}/${t}`)}async loadJSON(e){return await J.Z.get(e).json()}};var H=n(76005);const X=r()("ridge:store");class K{constructor(){this.storeModules={},this.storeStates={},this.storeComputed={},this.watchers={},this.stateWatchers={}}load(e){for(const t of e)this.registerPageStore(t)}getStoreValue(e,t){const[n,i,o]=e.split("."),a=(0,H.CO)(this.storeStates[n]);let r=null;return"state"===i&&this.storeStates[n]?r=a[o]:"computed"===i||"scoped"===i&&this.storeModules[n].scoped[o]&&("function"==typeof this.storeModules[n].scoped[o]?r=this.storeModules[n].scoped[o].apply(null,[a,...t]):"function"==typeof this.storeModules[n].scoped[o].get&&(r=this.storeModules[n].scoped[o].get.apply(null,[a,...t]))),X("getStoreValue",e,r),r}subscribe(e,t){const[n,i,o]=e.split(".");"state"===i&&(null==this.stateWatchers[n]&&(this.stateWatchers[n]={}),null==this.stateWatchers[n][o]&&(this.stateWatchers[n][o]=[]),this.stateWatchers[n][o].push(t))}dispatchChange(e,t){const[n,i,o]=e.split(".");"state"===i?this.storeStates[n][o]=t[0]:"scoped"===i&&this.storeModules[n][o]?.set&&this.storeModules[n][o].set(...t)}doStoreAction(e,t,n){if(this.storeModules[e]&&this.storeModules[e].actions[t])try{const i=this.storeModules[e].actions[t].apply(this.storeStates[e],n.filter((e=>null!=e)));"object"==typeof i&&Object.assign(this.storeStates[e],i)}catch(e){X("doStoreAction Error",e)}}registerPageStore(e){if(X("RegisterPageStore",e),!e.name)return void X("Store Not Registered: No Name");const t=e.name;this.storeModules[t]=e,this.storeStates[t]={},"function"==typeof e.state?this.storeStates[t]=(0,H.sj)(e.state()):"object"==typeof e.state?this.storeStates[t]=(0,H.sj)(e.state):"function"==typeof e.data?this.storeStates[t]=(0,H.sj)(e.data()):"object"==typeof e.data&&(this.storeStates[t]=(0,H.sj)(e.data)),this.storeStates[t]&&(0,H.Ld)(this.storeStates[t],(e=>{X("mutations",e);const n=(0,H.CO)(this.storeStates[t]);for(const i of e){const[e,o,a,r]=i;X("mutation",e,o.join("."),a,r),this.setStateValue(t,o[0],n[o[0]])}}))}setStateValue(e,t,n){X("state value",e,t,n);const i=this.stateWatchers[e][t];i&&i.forEach((e=>{e(n)}))}}class _{async mount(){}setOption(e){}updateProps(e){}layout(e){}invoke(e,t){}on(e,t){}destroy(){}}class ee extends _{constructor(e,t={}){super(),this.JSXComponent=e,this.props=t,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(e){this.el=e,this.root=ReactDOM.createRoot(e),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(e,t){Object.assign(this.props,{[e]:t}),ReactDOM.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(e,t){return this.renderRef&&this.renderRef.current&&this.renderRef.current[e]&&"function"==typeof this.renderRef.current[e]?this.renderRef.current[e](...t||[]):(console.error("无法调用无状态组件的方法!"),null)}setOption(e){this.updateProps(e)}updateProps(e){this.props=e,this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps?this.renderRef.current.updateProps(e):ReactDOM.render(this.getRenderInstance(),this.el)}layout(e){ReactDOM.render(React.createElement(this.JSXComponent,e),this.el)}destroy(){ReactDOM.unmountComponentAtNode(this.el),this.renderRef&&(this.renderRef=null)}}class te extends _{constructor(e,t={}){super(),this.VannilaComponent=e,this.props=t}mount(e){this.el=e,this.getRenderInstance().mount(e)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(e,t){this.instance.on(e,t)}invoke(e,t){if(this.getRenderInstance()[e])return this.getRenderInstance()[e].apply(this.getRenderInstance(),t)}hasMethod(e){return null!=this.getRenderInstance()[e]}setOption(e){this.updateProps(e)}updateProps(e){this.getRenderInstance().update(e)}layout(e){this.getRenderInstance().layout(e)}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}const ne=class{async load(){}async mount(e){}updateProps(e){}unmount(){}setStatus(e,t){if(this.status=e,!this.el)return;const n=this.el.querySelectorAll(".ridge-overlay");for(const e of n)e.parentElement.removeChild(e);const i=document.createElement("div");i.setAttribute("name",e),i.classList.add("ridge-overlay"),i.classList.add("status-"+e),t&&(i.textContent=t),this.el.appendChild(i)}getStatus(){return this.status}removeStatus(e){if(this.status=null,!this.el)return;const t=this.el.querySelectorAll(".ridge-overlay");for(const n of t)e?n.classList.contains("status-"+e)&&n.parentElement.removeChild(n):n.parentElement.removeChild(n)}},ie=r()("ridge:element");class oe extends ne{constructor({config:e,composite:t}){super(),this.config=e,this.composite=t,this.properties={},this.events={}}isRoot(){return null==this.config.parent}getId(){return this.config.id}getProperties(){return Object.assign({},this.config.props,this.events,this.properties,{children:this.children})}getConfig(){return this.config}getEl(){return this.el}getParent(){return this.parent}getScopedData(){const e=this.getParent(),t=e?e.getScopedData():[];return null==this.scopedData?t:[this.scopedData,...t]}setScopedData(e){this.scopedData=e}async load(){this.componentDefinition||(this.setStatus("loading"),this.config.path&&(this.componentDefinition=await this.composite.context.loadComponent(this.config.path)),this.componentDefinition?this.removeStatus("loading"):this.setStatus("not-found"))}async mount(e){this.el=e,this.el.setAttribute("component",this.config.path),this.el.setAttribute("ridge-id",this.config.id),this.el.classList.add("ridge-element"),this.style=Object.assign({},this.config.style),this.updateConnectedStyle(),this.updateStyle(),this.updateConnectedProperties(),this.initializeEvents(),this.initSubscription(),this.componentDefinition||await this.load(),this.renderer=this.createRenderer(),this.mounted&&this.mounted()}initChildren(){if(this.config.props.children&&null==this.children){this.children=[];for(const e of this.config.props.children){const t=this.composite.getNode(e);t&&(t.parent=this,t.initChildren(),this.children.push(t))}}}initializeEvents(){this.config.propEx.value&&(this.events.input=e=>{this.composite.store.dispatchChange(this.config.propEx.value,[e])});for(const[e,t]of Object.entries(this.config.events))this.events[e]=(...e)=>{for(const n of t)n.store&&n.method&&this.composite.store.doStoreAction(n.store,n.method,[...e,n.payload,...this.getScopedData()])}}initSubscription(){new Set([...Object.values(this.config.styleEx),...Object.values(this.config.propEx)]).forEach((e=>{this.composite.store?.subscribe&&this.composite.store.subscribe(e,(()=>{this.forceUpdate()}))}))}createRenderer(){if(null==this.componentDefinition)return this.setStatus("load-error"),null;try{if("vanilla"===this.componentDefinition.type){const e=new te(this.componentDefinition.component,this.getProperties());return e.mount(this.el),this.removeStatus(),e}{const e=new ee(this.componentDefinition.component,this.getProperties());return e.mount(this.el),this.removeStatus(),e}}catch(e){this.setStatus("render-error"),console.error("组件初始化渲染异常",this.componentDefinition,e)}return null}forceUpdate(){this.updateConnectedStyle(),this.updateStyle(),this.updateConnectedProperties(),this.updateProps()}updateProps(e){if(e&&Object.assign(this.properties,e),this.renderer){const e=this.getProperties();try{ie("updateProps",this.config.id,e),this.renderer.updateProps(this.getProperties())}catch(t){ie("Render Error:",t,this,e)}}else ie("updateProps umounted",this.id)}updateConnectedStyle(){if(this.composite.store)for(const e of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[e]&&""!==this.config.styleEx[e]&&(this.style[e]=this.composite.store.getStoreValue(this.config.styleEx[e],this.getScopedData()))}updateChildStyle(e){this.invoke("updateChildStyle",[e])}updateStyle(){this.el&&(this.style.visible?this.el.classList.remove("ridge-is-hidden"):this.el.classList.add("ridge-is-hidden")),this.parent.updateChildStyle(this),this.invoke("updateStyle",[this])}updateConnectedProperties(){if(this.composite.store)for(const[e,t]of Object.entries(this.config.propEx))if(null!=t&&""!==t)try{this.properties[e]=this.composite.store.getStoreValue(t,this.getScopedData())}catch(e){console.error("get Store Value Error: ",e)}}emit(e,t){if(this.composite.store)if(ie("Emit Event:",e,t),"input"!==e||this.config.events[e]){if(this.config.events[e])for(const n of this.config.events[e])n.store&&n.method&&this.composite.store.doStoreAction(n.store,n.method,[...t,n.payload,...this.getScopedData()])}else this.config.propEx.value&&this.composite.store.dispatchChange(this.config.propEx.value,[t,...this.getScopedData()])}clone(){const e=new oe({composite:this.composite,componentDefinition:this.componentDefinition,config:this.config});if(this.children){e.children=[];for(const t of this.children)e.children.push(t.clone())}return e}invoke(e,t){if(this.renderer)return this.renderer.invoke(e,t)}hasMethod(e){return!!this.renderer&&this.renderer.hasMethod(e)}unmount(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el&&this.el.parentElement&&this.el.parentElement.removeChild(this.el),this.el=null}}const ae=oe;var re=n(72155),se=(n(97429),n(55663)),le=n.n(se);const ce=(0,re.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10),de=r()("ridge:manager"),pe=class extends ne{constructor({el:e,config:t,context:n}){super(),this.config=t,this.context=n,this.el=e,this.initialize()}async load(){const e=[];await Promise.allSettled(e);for(const t of Object.values(this.nodes))e.push(await t.load());await Promise.allSettled(e)}getNodes(){return Object.values(this.nodes)}getRootNodes(){return Object.values(this.nodes).filter((e=>e.isRoot()))}getNode(e){return this.nodes[e]}initialize(){de("Ridge Composite initialize:",this.config),this.nodes={};for(let e=0;e<this.config.elements.length;e++){const t=this.createElement(this.config.elements[e]);this.nodes[t.getId()]=t}this.initChildren()}initChildren(){this.config.children?this.children=this.config.children.map((e=>this.nodes[e])):this.children=Object.values(this.nodes).filter((e=>null==e.config.parent));for(const e of this.children)e.parent=this,e.initChildren()}createElement(e){return new ae({composite:this,config:e})}async mount(e){e&&(this.el=e),this.updateStyle(),this.onPageMounted&&this.onPageMounted(),this.jsModules=await this.importJSFiles(),await this.importStyleFiles(),await this.loadStore();const t=[];for(const e of this.children){const n=document.createElement("div");this.el.appendChild(n),t.push(await e.mount(n))}await Promise.allSettled(t),this.onPageLoaded&&this.onPageLoaded()}unmount(){for(const e of this.children)e.unmount()}updateChildren(e){this.children=e,this.childrenUpdated&&this.childrenUpdated()}updateStyle(){if(this.config.style&&this.el){const{background:e,classNames:t}=this.config.style;e&&Object.assign(this.el.style,{background:e}),t&&t.forEach((e=>{this.el.classList.add(e)})),this.el.classList.add("ridge-composite")}}updateChildStyle(e){const t=e.config.style;e.el&&(t.full?(e.el.classList.add("ridge-is-full"),e.el.classList.remove("ridge-is-absolute")):(e.el.style.transform=`translate(${t.x}px, ${t.y}px)`,e.el.style.width=t.width?t.width+"px":"",e.el.style.height=t.height?t.height+"px":""))}getScopedData(){return[]}async importStyleFiles(){const{cssFiles:e}=this.config;for(const t of e??[])await this.context.loadScript(this.context.baseUrl+"/"+this.app+"/"+t)}async loadModule(e){const t="resolve-"+ce(5),n=document.createElement("script");return n.setAttribute("type","module"),n.setAttribute("async",!0),document.head.append(n),n.textContent=`import * as Module from '${e}'; window['${t}'](Module);`,await new Promise(((e,n)=>{window[t]=n=>{delete window[t],n&&n.default?e(n.default):e(null)}}))}async importJSFiles(){const{jsFiles:e}=this.config,t=[];for(const n of e??[]){const e=await this.loadModule(this.context.baseUrl+"/"+this.app+"/"+n);e&&t.push(e)}return t}async loadStore(){this.store=new K,this.store.load(this.jsModules)}},me="1.1.0",he=class{constructor({baseUrl:e}){this.VERSION=me,this.ky=J.Z,this.baseUrl=e,this.services={loader:new Q({baseUrl:this.baseUrl})},this.delegateMethods(this.services.loader,["loadScript","loadJSON","loadCss","getPackageJSON","loadComponent"])}delegateMethods(e,t,n=this){for(const i of t)e[i]?n[i]=e[i].bind(e):console.error("delegateMethods error:",e+"."+i)}unDelegateMethods(e,t,n=this){for(const e of t)delete n[e]}static async init(){}async mountPage(e,t,n){const i=(this.opts.baseUrl+"/"+t+"/"+n).replace(/\/\//g,"/"),o=await J.Z.get(i).json();this.loadPage(e,o,"hosted",t)}loadPage(e,t,n,i){const o=new pe({pageConfig:JSON.parse(JSON.stringify(t)),ridge:this,mode:n,app:i});return o.loadAndMount(e||document.body),o}};new he({baseUrl:"/npm"}),window.Ridge=he;const ge=he;var ue=n(64551),be=n.n(ue),fe=n(20927),ve=n.n(fe),ye=n(82858),we=n.n(ye);const xe=async e=>{const t=await fetch(e);return await t.blob()},Ee=async e=>{const t=await xe(e);return await t.text()},Ce=(e,t)=>new Blob([e],{type:t}),ke=async e=>new Promise((t=>{const n=new FileReader;n.addEventListener("load",(()=>{t(n.result)}),!1),n.readAsDataURL(e)})),Se=(e,t)=>{const n=document.createElement("a");e instanceof Blob?n.href=window.URL.createObjectURL(e):n.href=window.URL.createObjectURL(new Blob([e],{type:"text/plain"})),n.download=t||e.name||"下载",n.rel="noopener",setTimeout((function(){URL.revokeObjectURL(n.href)}),4e4),setTimeout((function(){!function(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}(n)}),0)};var ze=n(57053);const Pe=(e,t)=>e.filter((e=>-1===e.parent)).map((n=>Fe(n,null,e,t))).sort(Ne),Ne=(e,t)=>"directory"===e.type&&"directory"===t.type?e.label>t.label?1:-1:"directory"===e.type?-1:"directory"===t.type||e.label>t.label?1:-1,Le=async(e,t)=>{for(const n of e)await t(n),n.children&&await Le(n.children,t)},Oe=(e,t)=>{const n=[];return e.forEach((e=>{t(e)&&n.push(e),e.children&&n.push(...Oe(e.children,t))})),n},Fe=(e,t,n,i)=>{const o={id:e.id,key:e.id,label:e.name,type:e.type,path:-1===e.parent?"/"+e.name:t.path+"/"+e.name,parent:e.parent,parentNode:t,raw:e,value:e.id};if(e.mimeType&&(o.mimeType=e.mimeType),"directory"===o.type){const t=n.filter((t=>t.parent===e.id));o.children=t.map((e=>Fe(e,o,n,i))).sort(Ne)}return i&&i(o),o},Te=new Map;Te.set(".js","text/javascript"),Te.set(".json","text/json"),Te.set(".doc","application/msword"),Te.set(".pdf","application/pdf"),Te.set(".woff","application/font-woff"),Te.set(".zip","application/zip"),Te.set(".mid","audio/midi"),Te.set(".mp4a","audio/mp4"),Te.set(".m4a","audio/mp4a-latm"),Te.set(".ogg","audio/ogg"),Te.set(".aac","audio/x-aac"),Te.set(".m3u","audio/x-mpegurl"),Te.set(".wma","audio/x-ms-wma"),Te.set(".gif","image/gif"),Te.set(".jpeg","image/jpeg"),Te.set(".jpg","image/jpeg"),Te.set(".png","image/png"),Te.set(".svg","image/svg+xml"),Te.set(".ico","image/x-icon"),Te.set(".css","text/css"),Te.set(".csv","text/csv"),Te.set(".html","text/html"),Te.set(".txt","text/plain"),Te.set(".avi","video/x-msvideo"),Te.set(".gz","application/x-gzip"),Te.set(".tgz","application/x-tar"),Te.set(".tar","application/x-tar");const je=e=>Te.get(e)||"application/"+e;class Re{constructor(e){this.appService=e,this.coll=e.collection,this.store=e.store,this.archiveColl=new(be())("ridge.backup.db")}async createHistory(e,t){const n=(0,ze.formateDate)(),i="ridge.backup-store-"+n+".db",o={created:n,name:t,pageCount:await e.count({type:"page"}),dbname:i};await this.archiveColl.insert(o);const a=new(be())(i);await this.dumpColl(e,a)}async dumpColl(e,t){await t.clean();const n=await e.find({});for(const e of n)await t.insert(e)}async listAllHistory(){return await this.archiveColl.find({})}async deleteHistory(e){const t=await this.archiveColl.findOne(e);if(t){const n=new(be())(t.dbname);await n.clean(),await this.archiveColl.remove(e)}}async recover(e,t){const n=await this.archiveColl.findOne(e);if(n){const e=new(be())(n.dbname);return await t.clean(),await this.dumpColl(e,t),!0}return!1}async exportFileArchive(e){const t=await this.coll.findOne({id:e}),n=await this.store.getItem(e);n&&("page"===t.type?Se(new Blob([JSON.stringify(n)]),t.name+".json"):Se(await xe(n),t.name))}async importFileArchive(e,t){const{appService:n}=this;if(t.name.endsWith(".json")){const i=JSON.parse(await t.text());i.elements?await n.createPage(e,(0,ze.basename)(t.name,".json"),i):await n.createFile(e,new File([JSON.stringify(i)],t.name,{type:"text/json"}))}else await n.createFile(e,t)}async exportAppArchive(){const e=new(we()),t=await this.coll.find({}),n=Pe(t);await this.zipFolder(e,n);const i=await e.generateAsync({type:"blob"});Se(i,"应用归档"+(0,ze.formateDate)()+".zip")}async zipFolder(e,t){for(const n of t)if("directory"===n.type){const t=e.folder(n.label);await this.zipFolder(t,n.children)}else{const t=await this.store.getItem(n.key);"page"===n.type?e.file(n.label+".json",JSON.stringify(t)):e.file(n.label,await xe(t))}}async importAppArchive(e){const t=new(we());await t.loadAsync(e);const{appService:n}=this;await this.coll.clean(),await this.store.clear();const i=[];t.forEach((async(e,t)=>{i.push({filePath:e,zipObject:t})}));for(const{filePath:e,zipObject:t}of i)if(t.dir)await n.ensureDir(e);else{const i=await n.ensureDir((0,ze.dirname)(e)),o=i?i.id:-1,a=(0,ze.basename)(t.name),r=(0,ze.extname)(t.name);if(e.endsWith(".json")){const e=JSON.parse(await t.async("text"));e.elements?await n.createPage(o,(0,ze.basename)(a,".json"),e):await n.createFile(o,a,new File([JSON.stringify(e)],a),"text/json")}else await n.createFile(o,a,new File([await t.async("blob")],a),je(r))}return i}}const Ae={version:me,style:Object.assign({width:1920,height:1080,background:"",classNames:[]}),properties:[],cssFiles:[],jsFiles:[],storeFiles:[],elements:[],rootElements:[]},{nanoid:Me}=n(57053),Ie=r()("ridge:app-service");class De{constructor(){this.collection=new(be())("ridge.app.db"),this.store=ve().createInstance({name:"ridge-store"}),this.backUpService=new Re(this),this.dataUrlByPath={},this.dataUrls={},this.fileTree=null}async init(){await this.getAppFileTree()}getFileTree(){return this.fileTree}filterFiles(e){return Oe(this.fileTree,e)}getFileByPath(e){const t=Oe(this.fileTree,(t=>t.path===e));return t.length>0?t[0]:null}async getAppFileTree(){if(!this.fileTree){const e=await this.getFiles();this.fileTree=Pe(e)}return this.fileTree}async updateAppFileTree(){Ie("Update File Tree");const e=await this.getFiles();this.fileTree=Pe(e)}async createDirectory(e,t){if(await this.collection.findOne({parent:e,name:t}))throw new Error("File existed",t);const n={parent:e,id:Me(10),name:t,type:"directory"};return await this.collection.insert(n)}async createComposite(e,t){if(await this.collection.findOne({parentId:e,name:t}))throw new Error("File existed",t);const n=Me(10),i=Ae,o={id:n,name:t,type:"page",parent:e,mimeType:"text/json"};return await this.store.setItem(n,i),await this.collection.insert(o),o}async createFile(e,t,n,i){if(await this.collection.findOne({parent:e,name:t}))throw new Error("File existed",t);const o=Me(10),a=await ke(n);return await this.store.setItem(o,a),await this.collection.insert({id:o,mimeType:n.type||i,size:n.size,name:t,parent:e})}async updateFileContent(e,t,n){this.filterFiles((t=>t.id===e))[0].textContent=t,await this.store.setItem(e,(async(e,t)=>{const n=new Blob([e],{type:t});return await ke(n)})(t,n))}async savePageContent(e,t){await this.store.setItem(e,t)}async rename(e,t){const n=await this.collection.findOne({id:e});return!!n&&(!await this.collection.findOne({parent:n.parent,name:t})&&(await this.collection.patch({id:e},{name:t}),!0))}async checkNewNameValid(e,t){return await this.collection.findOne({parent:e,name:t})}async move(e,t){const n=await this.collection.findOne({id:e});return n.parent!==t&&(!await this.collection.findOne({parent:t,name:n.name})&&(await this.collection.patch({id:e},{parent:t}),await this.updateAppFileTree(!0),!0))}async copy(e){const t=await this.collection.findOne({id:e});if(t){const n=Me(10),i={id:n,name:await this.getNewFileName(t.parent,t.name,(e=>`(${e})`)),type:t.type,parent:t.parent,mimeType:t.mimeType,copyFrom:e};await this.collection.insert(i);const o=await this.store.getItem(t.id);o&&await this.store.setItem(n,o),await this.updateAppFileTree(!0)}}async trash(e){const t=await this.collection.findOne({id:e});if(t){"directory"!==t.type&&await this.store.removeItem(e);const n=await this.collection.find({parent:e});if(n.length)for(const e of n)await this.trash(e.id,!1);await this.collection.remove({id:e})}}async getPackageJSONObject(){const e=this.getFileByPath("package.json");if(null==e)return null;{const t=await this.store.getItem(e.key);try{return JSON.parse(await Ee(t))}catch(e){return{}}}}async getFiles(e){const t={};e&&(t.name=new RegExp(e));const n=await this.collection.find(t);return n.filter((e=>-1===e.parent&&"package.json"===e.name))[0]||n.push(await this.createFile(-1,"package.json",Ce(JSON.stringify({name:"ridge-app-hello",description:"My First Ridge App #RidgeApp #HelloWorld",version:"1.0.0",dependencies:{"ridge-basic":"1.0.0","ridge-container":"1.0.0"}}),"text/json"))),n}async getFile(e){const t=await this.collection.findOne({id:e});if(t)return t.content=await this.store.getItem(e),t.mimeType.startsWith("text")&&(t.textContent=await Ee(t.content)),t}getFileByPath(e){if(!this.fileTree)return null;const t=e.split("/").filter((e=>e));let n=this.fileTree,i=null;for(const e of t)if(e){if(i=n&&n.filter((t=>t.label===e))[0],null==i)return null;n=i.children||[]}return i}async ensureDir(e){const t=e.split("/");let n=-1,i=null;for(const e of t)e&&(i=await this.collection.findOne({parent:n,name:e}),null==i&&(i=await this.createDirectory(n,e)),n=i.id);return i}async getRecentPage(){const e=await this.collection.find({parent:-1,type:"page"},{sort:{name:1}});return 0===e.length?this.createPage(-1):{...e[0],...await this.store.getItem(e[0].id)}}async getFilePath(e){if(e.parent&&-1!==e.parent){const t=await this.getFile(e.parent);return await this.getFilePath(t)+"/"+e.name}return e.name}async getByMimeType(e){const t=await this.collection.find({mimeType:new RegExp(e)});for(const e of t)"file"===e.type&&(e.src=await this.store.getItem(e.id));return t}async isParent(e,t){let n=await this.getFile(t);for(;-1!==n.parent;){if(n.parent===e)return!0;n=await this.getFile(n.parent)}return!1}async updateDataUrl(){const e=await this.getByMimeType("image");for(const t of e)this.dataUrls[t.id]=t.dataUrl}getDataUrl(e){return e.startsWith("http")?e:this.dataUrlByPath[e]}async getFileContent(e){const t=await this.store.getItem(e.key);return e.mimeType&&e.mimeType.indexOf("text")>-1?await Ee(t):await xe(t)}async exportAppArchive(){await this.backUpService.exportAppArchive(this.collection,this.store)}async exportPage(e){const t=await this.collection.findOne({id:e}),n=await this.store.getItem(e);n&&("page"===t.type?Se(new Blob([JSON.stringify(n)]),t.name+".json"):Se(await xe(n),t.name))}async importAppArchive(e){await this.backUpService.importAppArchive(e,this.collection,this.store)}async backUpAppArchive(e){await this.backUpService.createHistory(this.collection,e)}async recoverBackUpAppArchive(e){await this.backUpService.recover(e,this.collection)}async getAllBackups(){return await this.backUpService.listAllHistory()}async removeBackup(e){return await this.backUpService.deleteHistory(e)}async exportArchive(){this.backUpService.exportColl(this.collection)}async archive(){}}var Ze=n(29507),Ve=n(73345),Ue=n.n(Ve);const Be=r()("ridge:workspace");class Je{init({workspaceEl:e,viewPortEl:t}){this.workspaceEl=e,this.viewPortEl=t,this.zoom=1,this.selectorDropableTarget=[".ridge-container",".ridge-droppable"],this.initKeyBind(),this.initComponentDrop(),this.viewPortEl.style.transformOrigin="center center"}enable(){this.initSelecto(),this.initMoveable(),this.setWorkSpaceMovable(),this.enabled=!0}disable(){this.enabled&&(this.selecto.destroy(),this.selecto=null,this.moveable.destroy(),this.moveable=null,this.workspaceMovable&&(this.workspaceMovable.destroy(),this.workspaceMovable=null),this.enabled=!1,this.viewPortEl.style.transform="")}updateMovable(){this.moveable.updateTarget()}fitToCenter(e=40){this.viewPortEl.style.transform="";const t=this.workspaceEl.getBoundingClientRect(),n=this.viewPortEl.getBoundingClientRect();this.zoom=1;const i=function(e,t){if(e.width<t.width&&e.height<t.height)return e;const n={};return e.width/e.height>t.width/t.height?(n.fitTo="width",n.width=parseInt(t.width),n.height=Math.floor(e.height*(t.width/e.width))):(n.fitTo="height",n.width=Math.floor(e.width*(t.height/e.height)),n.height=parseInt(t.height)),n}({width:n.width,height:n.height},{width:t.width-2*e,height:t.height-2*e});return i.width!==n.width&&(this.zoom=i.width/n.width),this.viewPortX=(t.width-i.width)/2,this.viewPortY=(t.height-i.height)/2,this.viewPortEl.style.transform=`translate(${this.viewPortX}px, ${this.viewPortY}px) scale(${this.zoom})`,this.zoom}setZoom(e){this.zoom=e,this.moveable&&(this.moveable.target=[],this.moveable.updateTarget()),this.viewPortEl.style.transform=`translate(${this.viewPortX}px, ${this.viewPortY}px) scale(${this.zoom})`}setWorkSpaceMovable(){this.workspaceMovable=k({target:this.workspaceEl,className:"workspace-movable"}),this.workspaceMovable.on("dragStart",(e=>{e.inputEvent.ctrlKey?(this.workspaceMovable.dragWorkSpace=!0,this.moveable.target=[]):this.workspaceMovable.dragWorkSpace=!1})),this.workspaceMovable.on("drag",(e=>{e.inputEvent.ctrlKey&&this.workspaceMovable.dragWorkSpace&&(this.moveable.target=null,this.viewPortX+=e.delta[0],this.viewPortY+=e.delta[1],this.viewPortEl.style.transform=`translate(${this.viewPortX}px, ${this.viewPortY}px) scale(${this.zoom})`)}))}isElementMovable(e){return null!=this.moveable.target&&1===this.moveable.target.length&&this.moveable.target[0]==e}initMoveable(){const e=this;this.moveable=k({target:[],snappable:!0}),this.moveable.on("dragStart",(e=>{const t=e.target;if(t.classList.contains("is-locked")||t.classList.contains("is-full"))return!1})),this.moveable.on("drag",(t=>{const n=t.target;if(n.classList.contains("is-locked")||n.classList.contains("is-full"))return;if(this.workspaceMovable.dragWorkSpace)return;const i=t.target.ridgeNode.config;e.onElementDragStart(t.target,t.inputEvent),t.target.style.transform=`translate(${i.style.x+t.dist[0]}px,${i.style.y+t.dist[1]}px)`})),this.moveable.on("dragEnd",(t=>{const n=t.target;n.classList.contains("is-locked")||n.classList.contains("is-full")||(t.isDrag?e.placeElementAt(t.target,t.clientX,t.clientY):e.selectElements([t.target]))})),this.moveable.on("resize",(({target:e,width:t,height:n,drag:i,delta:o,transform:a})=>{const r={};a.match(/[0-9.]+/g),r.x=i.translate[0],r.y=i.translate[1],o[0]&&(r.width=t),o[1]&&(r.height=n),_e.updateComponentStyle(e.ridgeNode,r)})),this.moveable.on("resizeEnd",(({target:e,width:t,height:n,delta:i,transform:o})=>{this.selectElements([e])})),this.moveable.on("dragGroup",(({events:e})=>{e.forEach((({target:e,transform:t})=>{e.ridgeNode.config.parent||(e.style.transform=t)}))})),this.moveable.on("dragGroupEnd",(e=>{e.events.forEach((({target:e})=>{if(!e.ridgeNode.config.parent){const t=e.getBoundingClientRect();this.putElementToRoot(e,t.left+t.width/2,t.top+t.height/2)}}))})),this.moveable.on("resizeGroup",(({events:e})=>{e.forEach((({target:e,width:t,height:n,delta:i,transform:o})=>{e.style.transform=o,i[0]&&(e.style.width=`${t}px`),i[1]&&(e.style.height=`${n}px`)}))})),this.moveable.on("resizeGroupEnd",(e=>{e.events.forEach((({target:e})=>{if(!e.ridgeNode.config.parent){const t=e.getBoundingClientRect();_e.updateComponentConfig(e.ridgeNode,{style:{x:t.left+t.width/2,y:t.top+t.height/2}})}}))}))}initSelecto(){this.selecto=new Ze.ZP({rootContainer:null,dragContainer:this.workspaceEl,selectableTargets:[".ridge-element"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"ctrl",preventDefault:!0,keyContainer:window,hitRate:0}),this.selecto.on("dragStart",this.onSelectoDragStart.bind(this)),this.selecto.on("selectEnd",this.onSelectoDragEnd.bind(this))}onSelectoDragStart(e){const t=e.inputEvent,n=t.target;if(n.classList&&(n.classList.contains("moveable-area")||n.classList.contains("moveable-control")))return void e.stop();if(t.ctrlKey)return void e.stop();if(n.closest(".menu-bar"))return void e.stop();if(this.moveable.target&&1===this.moveable.target.length&&!this.moveable.target[0].contains(n)){const{clientX:e,clientY:n}=t,i=this.moveable.target[0].getBoundingClientRect();e>i.x&&e<i.x+i.width&&n>i.y&&(i.y,i.height)}const i=n.closest(".ridge-element");this.isElementMovable(i)?e.stop():i?(i.classList.contains("ridge-is-locked")||i.classList.contains("ridge-is-full")?this.moveable.resizable=!1:this.moveable.resizable=!0,this.moveable.target&&1===this.moveable.target.length&&this.moveable.target[0].contains(i)&&this.disableClickThrough||(this.moveable.target=i),this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((e=>e!==this.moveable.target&&e.closest(".ridge-element")!==this.moveable.target))],this.moveable.elementGuidelines=this.guidelines,this.moveable.elementSnapDirections={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},this.moveable.snapDirections={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},this.moveable.dragStart(t),e.inputEvent&&e.inputEvent.stopPropagation(),e.inputEvent&&e.inputEvent.preventDefault(),e.stop()):t.ctrlKey&&e.stop()}onSelectoDragEnd({isDragStart:e,selected:t,inputEvent:n,rect:i}){e&&n.preventDefault(),this.moveable.elementGuidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((e=>-1===t.indexOf(e)))],this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll('.ridge-element[snappable="true"]')).filter((e=>-1===t.indexOf(e)))],this.selectElements(t)}initComponentDrop(){this.workspaceEl.addEventListener("dragover",this.onWorkspaceDragOver.bind(this)),this.workspaceEl.addEventListener("drop",this.onWorkspaceDrop.bind(this))}onWorkspaceDragOver(e){this.enabled&&(_e.draggingComponent&&(this.selected.length&&this.selectElements([]),e.dataTransfer.dropEffect="move",this.checkDropTargetStatus({width:_e.draggingComponent.width,height:_e.draggingComponent.height,clientX:e.clientX,clientY:e.clientY})),e.preventDefault())}onWorkspaceDrop(e){if(this.enabled&&(e.preventDefault(),_e.draggingComponent)){const t=document.createElement("div"),n=_e.editorComposite.createNewElement(_e.draggingComponent);_e.onElementCreated(n),n.mount(t),this.placeElementAt(t,e.pageX,e.pageY),_e.draggingComponent=null}}checkDropTargetStatus({target:e,clientX:t,clientY:n,width:i,height:o}){this.getDroppableTarget(e,{x:t,y:n,width:i,height:o},!0)}placeElementAt(e,t,n){Be("placeElementAt:",e,{x:t,y:n}),this.putElementToRoot(e,t,n);const i=this.getDroppableTarget(e,{x:t,y:n},!1),o=e.ridgeNode,a=i?i.ridgeNode:null;a&&(Be("Into container",a),a.appendChild(o,{x:t,y:n})),_e.onElementMoveEnd(e),this.moveable.updateTarget()}putElementToRoot(e,t,n){this.viewPortEl.appendChild(e);const i=this.viewPortEl.getBoundingClientRect(),o=e.getBoundingClientRect();null==t||null==n||t>o.x&&t<o.x+o.width&&n>o.y&&n<o.y+o.height?e.ridgeNode.updateStyleConfig({x:Math.floor((o.x-i.x)/this.zoom),y:Math.floor((o.y-i.y)/this.zoom)}):e.ridgeNode.updateStyleConfig({x:Math.floor((t-i.x-o.width/2)/this.zoom),y:Math.floor((n-i.y-o.height/2)/this.zoom)}),this.moveable.updateTarget()}onElementDragStart(e,t){if(e.ridgeNode&&e.ridgeNode.parent&&e.ridgeNode.parent!==_e.editorComposite){const t=e.getBoundingClientRect(),n=this.viewPortEl.getBoundingClientRect();e.ridgeNode.parent.removeChild(e.ridgeNode),_e.editorComposite.appendChild(e.ridgeNode),_e.services.outlinePanel.updateOutline(),e.ridgeNode.updateStyleConfig({position:"absolute",x:(t.x-n.x)/this.zoom,y:(t.y-n.y)/this.zoom,width:t.width/this.zoom,height:t.height/this.zoom})}this.checkDropTargetStatus({target:e,clientX:t.clientX,clientY:t.clientY})}selectElements(e,t){this.disableClickThrough=!1,document.querySelectorAll(".ridge-element.selected").forEach((e=>{e.classList.remove("selected")}));const n=e.filter((e=>!e.classList.contains("is-hidden")));n&&1===n.length?_e.onElementSelected(n[0]):_e.onPageSelected(),n&&(_e.selected=n),1===n.length?n[0].offsetParent&&(n[0].classList.contains("is-locked")||n[0].classList.contains("is-full")?this.moveable.resizable=!1:this.moveable.resizable=!0,this.disableClickThrough=t,this.selected=n,n.forEach((e=>{e.classList.add("selected")})),this.moveable.target=n,this.moveable.updateTarget()):(this.moveable.resizable=!0,this.selected=n.filter((e=>!e.classList.contains("is-locked"))),this.moveable.target=n.filter((e=>!e.classList.contains("is-locked"))))}unSelectElements(e){this.selected=this.selected.filter((t=>-1===e.indexOf(t))),this.moveable.target=this.selected,this.moveable.updateTarget()}getDroppableTarget(e,t,n){let i=[];for(const e of this.selectorDropableTarget)i=i.concat(Array.from(document.querySelectorAll(e)));const o=Array.from(i).filter((n=>{if(!n.ridgeNode)return!1;const{x:i,y:o,width:a,height:r}=n.getBoundingClientRect();return(!n.invoke||!1!==n.invoke("isDroppable",[e]))&&(e?!e.contains(n)&&t.x>i&&t.x<i+a&&t.y>o&&t.y<o+r&&n!==e&&n.closest("[ridge-id]")!==e:t.x>i&&t.x<i+a&&t.y>o&&t.y<o+r)}));let a=null;if(1===o.length)a=o[0];else if(o.length>1){const e=o.sort(((e,t)=>e.contains(t)?1:t.contains(e)?-1:e.style.zIndex>t.style.zIndex?1:-1));a=e[0]}if(n){try{a&&a.ridgeNode&&a.ridgeNode.invoke("onDragOver",e?[e.ridgeNode||{}]:[t])}catch(e){console.error("Container dragOver Error",a)}i.forEach((e=>{e!==a&&e.ridgeNode&&e.ridgeNode.invoke("onDragOut")}))}return a}capture(){this.moveable.target&&window.html2canvas(this.moveable.target[0].firstChild,{backgroundColor:null}).then((e=>{const t=e.toDataURL("image/png");this.downloadImg("capture.png",t)}))}downloadImg(e,t){const n=document.createElement("a"),i=new window.MouseEvent("click");n.download=e||this.props.photoName||"photo",n.href=t,n.dispatchEvent(i)}initKeyBind(){Ue().bind("del",(()=>{if(this.enabled&&this.selected){for(const e of this.selected)_e.onElementRemoved(e);this.selectElements([])}})),Ue().bind("right",(()=>{if(this.selected){for(const e of this.selected){const t=_e.getNode(e);t.updateStyleConfig({x:t.config.style.x+1})}this.moveable.updateTarget()}})),Ue().bind("left",(()=>{if(this.selected){for(const e of this.selected){const t=_e.getNode(e);t.updateStyleConfig({x:t.config.style.x-1})}this.moveable.updateTarget()}})),Ue().bind("up",(()=>{if(this.selected){for(const e of this.selected){const t=_e.getNode(e);t.updateStyleConfig({x:t.config.style.y-1})}this.moveable.updateTarget()}})),Ue().bind("down",(()=>{if(this.selected){for(const e of this.selected){const t=_e.getNode(e);t.updateStyleConfig({x:t.config.style.y+1})}this.moveable.updateTarget()}})),Ue().bind("ctrl+c",(()=>{this.selected?(this.copied=this.selected,this.copied.forEach((e=>{e.dataset.copy_x=e.ridgeNode.config.style.x,e.dataset.copy_y=e.ridgeNode.config.style.y}))):this.copied=[]})),Ue().bind("ctrl+v",(()=>{if(this.copied&&this.copied.length)for(const e of this.copied){const t=e.ridgeNode.clone(_e.editorComposite),n=document.createElement("div");t.loadAndMount(n).then((()=>{let n=null;this.selected&&1===this.selected.length&&(n=this.selected[0]===e&&this.selected[0].elementWrapper.parentWrapper?this.selected[0].elementWrapper.parentWrapper:this.selected[0].elementWrapper),n?(Be("复制到父容器内",n),!1===this.pageManager.attachToParent(n,t)&&(t.updateStyleConfig({x:t.config.style.x+20,y:t.config.style.y+20}),this.putElementToRoot(t))):(t.updateStyleConfig({x:t.config.style.x+20,y:t.config.style.y+20}),this.putElementToRoot(updateStyleConfig.el))}))}})),this.workspaceEl.onwheel=e=>{e.preventDefault();let t=this.zoom+.01*(e.deltaY>0?-1:1);t=Math.min(Math.max(.1,t),2),this.zoomBack&&this.zoomBack(t),this.setZoom(t)}}}var qe=n(98784),$e=n.n(qe);const We=class extends ae{constructor(e){super(e),e.componentDefinition&&(this.componentDefinition=e.componentDefinition)}getProperties(){return Object.assign({},this.config.props,{children:this.children},{__isEdit:!0})}mounted(){this.el.ridgeNode=this,null!=this.config.props.children&&this.el.classList.add("ridge-container")}appendChild(e){this.children.push(e),e.parent=this,this.invoke("appendChild",[e])}removeChild(e){this.children=this.children.filter((t=>t!==e)),e.parent=null,this.invoke("removeChild",[e])}initPropsOnCreate(){if(this.componentDefinition)for(const e of this.componentDefinition.props||[])e&&(null!=e.value&&(this.config.props[e.name]=e.value),"children"===e.type&&(this.config.props[e.name]=[]))}updateStyleConfig(e){$e().merge(this.config.style,e),this.updateStyle(),e.locked?this.el.classList.add("is-locked"):this.el.classList.remove("is-locked")}updateChildConfig(e){this.config.props.children=e.map((e=>e.getId())),this.properties.children=e,this.updateProps()}updateConfig(e){$e().merge(this.config,e),Object.assign(this.properties,e.props),this.updateStyle(),this.updateProps()}childRemoved(e){this.invoke("removeChild",[e])}updateChildList(e){const t=e.map((e=>this.composite.getNode(e))).filter((e=>e));this.invoke("updateChildList",[t]),this.updateChildConfig(t)}selected(){this.invoke("selected");const e=this.getParent();e&&e.invoke&&e.invoke("childSelected",[this])}exportJSON(){return this.children&&(this.config.props.children=this.children.map((e=>e.getId()))),JSON.parse(JSON.stringify(this.config))}},Ye=class extends pe{createElement(e){return new We({composite:this,config:e})}getClassNames(){return this.classNames||[]}updatePageConfig(e){Object.assign(this.config,e),this.updateStyle(),this.refresh()}async refresh(){await this.importStyleFiles(),await this.importJSFiles(),this.loadStore()}async loadStore(){this.storeModules=[];for(const e of this.jsModules)e&&e.name&&this.parseJsStoreModule(e)}updateStyle(){if(super.updateStyle(),this.config.style){const{width:e,height:t}=this.config.style;this.el.style.width=e+"px",this.el.style.height=t+"px"}}async importStyleFiles(){const e=document.querySelectorAll('style[page-id="'+this.config.id+'"]');for(const t of e)document.head.removeChild(t);const{cssFiles:t}=this.config,{appService:n}=this.context.services;this.classNames=[];for(const e of t||[]){const t=n.getFileByPath(e);if(t){t.textContent||(t.textContent=await n.getFileContent(t));const e=document.createElement("style");e.setAttribute("page-id",this.config.id),document.head.appendChild(e),e.textContent="\r\n"+t.textContent;const i=t.textContent.match(/\/\*.+\*\/[^{]+{/g);for(const e of i){const t=e.match(/\/\*.+\*\//)[0].replace(/[/*]/g,""),n=e.match(/\n[^{]+/g)[0].trim().substring(1);this.classNames.push({className:n,label:t})}}}}async importJSFiles(){const e=[],t=document.querySelectorAll('script[page-id="'+this.config.id+'"]');for(const e of t)document.head.removeChild(e);const{jsFiles:n}=this.config;for(const t of n||[]){const n=await this.importJSFile(t,!0);n&&e.push(n)}return e}async importJSFile(e){const{appService:t}=this.context.services,n=t.getFileByPath(e);if(n){n.textContent||(n.textContent=await t.getFileContent(n));const e=document.createElement("script");e.setAttribute("page-id",this.config.id);const i="ridge-store-"+(0,ze.nanoid)(10);e.textContent=n.textContent.replace("export default",'window["'+i+'"]=');try{return document.head.append(e),window[i]}catch(e){return console.error("Store Script Error",e),null}}}parseJsStoreModule(e){const t={module:e,name:e.name??"未命名",actions:[],states:[],scoped:[]};if(this.storeModules.push(t),e.state){let n={};"function"==typeof e.state?n=e.state():"object"==typeof e.state&&(n=e.state);for(const e of Object.keys(n))t.states.push({name:e})}if(e.scoped)for(const n of Object.keys(e.scoped))t.scoped.push({name:n});e.actions&&"object"==typeof e.actions&&Object.keys(e.actions||{}).forEach((e=>{t.actions.push({name:e})}))}getStoreModules(){return this.storeModules}createNewElement(e){const t={title:e.title,path:e.componentPath,id:(0,ze.nanoid)(5),style:{position:"absolute",visible:!0,width:e.width??100,height:e.height??100},styleEx:{},props:{},propEx:{},events:{}},n=new We({config:t,componentDefinition:e,composite:this});return this.nodes[n.config.id]=n,n.initPropsOnCreate(),n}unmount(){super.unmount(),this.el.style.width=0,this.el.style.height=0}appendChild(e){this.children.push(e),e.parent=this,this.el.appendChild(e.el)}removeChild(e){this.children=this.children.filter((t=>t!==e)),e.parent=null,this.el.removeChild(e.el)}deleteNode(e){if(e){const t=e.getParent();t&&t.removeChild(e);const n=e.getChildNodes();if(n)for(const e of n)this.deleteNode(e);e.unmount(),delete this.nodes[e.config?.id]}}updateChildList(e){for(let t=0;t<e.length;t++)this.getNode(e[t]).setRootIndex(t)}childAppended(e){e.updateStyle()}exportPageJSON(){this.config.elements=[];for(const e of this.getNodes())this.config.elements.push(e.exportJSON());return this.config.children=this.children.map((e=>e.getId())),JSON.parse(JSON.stringify(this.config))}},Ge=class extends Ye{createElement(e,t){return new ae({composite:this,compositeView:this,config:e,i:t})}updateViewPort(e,t){this.el.style.width=e+"px",this.el.style.height=t+"px"}async loadStore(){this.store=new K,this.store.load(this.jsModules)}unmount(){super.unmount(),this.el.style.width=0,this.el.style.height=0}},Qe=r()("ridge:editor"),He=new URLSearchParams(location.href).get("registry")||localStorage.getItem("registry")||"https://cdn.jsdelivr.net/npm",Xe=location.host.startsWith("localhost")||location.host.startsWith("127.0.0.1")?"/npm":He,Ke=new class extends ge{constructor({baseUrl:e}){super({baseUrl:e}),this.baseUrl=e,this.services.appService=new De,window.ridge=this,window.editor=this}async editorDidMount(e,t,n){this.Editor=e;const{appService:i}=this.services;await i.init(),this.viewPortContainerEl=n,this.workspaceEl=t,this.workspaceControl=new Je,this.workspaceControl.init({workspaceEl:t,viewPortEl:n,ridgeEditorService:this}),this.Editor.setEditorLoaded()}getNode(e){if(e instanceof ae)return e;if("string"==typeof e){if(this.editorComposite)return this.editorComposite.getNode(e);if(this.runtimeView)return this.runtimeView.getNode(e)}else if(e instanceof Node)return e.ridgeNode;return null}async loadPackages(){const{appService:e}=this.services,t=await e.getPackageJSONObject();if(null==t)return[];const n=Object.keys(t.dependencies),i=[];for(const e of n)i.push(await this.getPackageJSON(e));return await Promise.allSettled(i),i.filter((e=>null!=e)).map((e=>(e.componentLoaded=!1,e.icon&&(e.icon=this.baseUrl+"/"+e.name+"/"+e.icon),e)))}async saveCurrentPage(){if(this.editorComposite){const{appService:e}=this.services,t=this.editorComposite.exportPageJSON();this.pageJSON=t,Qe("Save Page ",t);try{await e.savePageContent(t.id,t)}catch(e){console.error("save page error",e)}}}async openFile(e){const{appService:t}=this.services,n=await t.getFile(e);n&&("page"===n.type?(this.currentOpenFile=n,await this.loadEdit(n)):n.mimeType.startsWith("text/")?this.Editor.openCodeEditor(n):n.mimeType.startsWith("image/")&&this.Editor.openImage(n.content))}async loadEdit(e){const{configPanel:t,outlinePanel:n,menuBar:i}=this.services;e&&(this.pageContent=e.content),this.editorComposite&&this.editorComposite.unmount(),this.editorComposite=new Ye({el:this.viewPortContainerEl,config:this.pageContent,context:this}),this.editorComposite.updateStyle(),this.workspaceControl.enabled||this.workspaceControl.enable();const o=this.workspaceControl.fitToCenter();i.setZoom(o),await this.editorComposite.load(),await this.editorComposite.mount(),this.Editor.togglePageEdit(),t.updatePageConfigFields(),this.workspaceControl.selectElements([]),n.updateOutline()}async loadPreview(){this.runtimeComposite=new Ge({config:this.pageContent,context:this}),await this.runtimeComposite.mount(this.viewPortContainerEl),this.Editor.togglePagePreview(),this.runtimeComposite.updateViewPort(this.pageContent.style.width,this.pageContent.style.height);const{previewBar:e}=this.services;this.workspaceControl.fitToCenter(),e.setState({width:this.pageContent.style.width,height:this.pageContent.style.height})}updatePreviewSize(e,t){this.runtimeComposite.updateViewPort(e,t),this.workspaceControl.fitToCenter()}async toggleMode(){this.editorComposite?(await this.saveCurrentPage(),this.closeCurrentPage(),this.loadPreview()):this.runtimeComposite&&(this.runtimeComposite.unmount(),await this.loadEdit())}onElementSelected(e){const{configPanel:t,outlinePanel:n}=this.services,i=this.getNode(e);i&&(i.selected(),t.componentSelected(i),n.setCurrentNode(i)),this.el=i}onElementRemoved(e){const t=this.getNode(e);t&&this.editorComposite&&this.editorComposite.deleteNode(t);const{outlinePanel:n}=this.services;n.updateOutline()}onElementMoveEnd(e){const{configPanel:t,outlinePanel:n}=this.services,i=this.getNode(e);i&&(t.componentSelected(i),n.updateOutline())}onElementCreated(e){}onPageSelected(){const{configPanel:e,outlinePanel:t}=this.services;this.el=null,e.updatePageConfigFields(),t.setCurrentNode()}updateComponentConfig(e,t){const n=t.title!==e.config.title;if(e.updateConfig(t),n){const{outlinePanel:e}=this.services;e.updateOutline()}this.workspaceControl.updateMovable()}updateComponentStyle(e,t){e.updateStyleConfig(t)}async onCodeEditComplete(e,t){await this.services.appService.updateFileContent(e,t),this.editorComposite&&await this.editorComposite.refresh()}closeCurrentPage(){this.editorComposite&&this.editorComposite.unmount(),this.editorComposite=null,this.workspaceControl.disable(),this.Editor.togglePageClose()}}({baseUrl:Xe}),_e=Ke,et=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]),[a,r]=(0,i.useState)();return i.createElement(s.J2,{content:()=>i.createElement("div",{style:{width:"320px",padding:"0",height:"360px",overflow:"overlay"}},i.createElement(s.mp,{style:{height:320},value:e,filterTreeNode:!0,expandAll:!0,treeData:n,onSelect:n=>{e===n&&t(null)},onChange:e=>{t(e)}}),i.createElement(s.T,null,i.createElement(s.zx,{theme:"solid",onClick:()=>{r(!1)}},"确定"),i.createElement(s.zx,{theme:"solid",type:"warn",onClick:()=>{t(null),r(!1)}},"取消连接"))),trigger:"click",showArrow:!0,visible:a,onVisibleChange:e=>{r(e),(()=>{const e=_e.editorComposite.getStoreModules(),t=[];for(const n of e){const e={key:n.name,label:n.label??n.name,children:[]};for(const t of n.states)e.children.push({key:n.name+".state."+t.name,label:t.label??t.name});for(const t of n.scoped)e.children.push({key:n.name+".scoped."+t.name,label:t.label??t.name});t.push(e)}o(t)})()}},i.createElement("div",{style:{height:26,display:"flex",alignItems:"center"}},i.createElement(s.zx,{className:"btn-code",placeholder:"连接数据",type:e?"primary":"tertiary",size:"small",theme:"borderless",onClick:()=>{r(!a)},icon:i.createElement(D.Z,{style:{margin:"0 2px",flexShrink:0}})})))}));var tt=n(86919),nt=n(35225),it=n(52580),ot=n(72216),at=n(98741);const{Text:rt}=s.Typography,{Option:st}=s.Select,lt=(0,s.Q2)((({value:e,options:t,onChange:n})=>{const[o,a]=(0,i.useState)(""),[r,l]=(0,i.useState)([]),c=e||[],d=()=>{const e=[...c,{store:"",method:"",payload:""}];l([...r,e.length-1]),n(e)},p=e=>{l([...r,e])},m=e=>{n(c.filter(((t,n)=>n!==e)))},h=e=>{l(r.filter((t=>t!==e.index))),n(c.map(((t,n)=>n===e.index?{store:e.store,method:e.method,payload:e.payload}:t)))},g=[{label:t.label,key:"action-root",root:!0,disabled:!0,children:[...c.map(((e,t)=>{const n={};return n.key="node-"+t,n.index=t,n.store=e.store,n.method=e.method,n.payload=e.payload||"",n.label=(e=>{if(_e.editorComposite)return e.method;const{storeName:t,method:n}=e,i=_e.editorComposite.getStoreModules();return i[t]?.actions.filter((e=>e.name===n))[0]?.label??n})(e),n}))]}];return i.createElement("div",{className:"event-edit"},i.createElement(s.mp,{className:"event-tree",expandAll:!0,disabled:!0,renderLabel:(e,t)=>i.createElement("div",{className:"tree-label"},t.root&&i.createElement(i.Fragment,null,i.createElement(rt,{className:"label-content"},i.createElement(s.Vp,{color:"green"},e," ")),i.createElement(s.T,{className:"action"},i.createElement(s.zx,{size:"small",theme:"borderless",type:"tertiary",onClick:d,icon:i.createElement(tt.Z,null)},"处理动作"))),!t.root&&r.indexOf(t.index)>-1&&(e=>{const t=_e.editorComposite.getStoreModules();return i.createElement(i.Fragment,null,i.createElement("div",{className:"label-content"},i.createElement(s.Select,{noLabel:!0,defaultValue:e.store+"."+e.method,placeholder:"请选择处理动作",size:"small",onChange:t=>{const[n,i]=t.split(".");e.store=n,e.method=i}},t.map((({name:e,actions:t})=>i.createElement(s.Select.OptGroup,{label:e,key:e},t.map((t=>i.createElement(s.Select.Option,{key:t.name,value:e+"."+t.name},t.label||t.name))))))),i.createElement(s.J2,{trigger:"click",content:i.createElement("div",{style:{padding:10}},i.createElement(rt,null,"请输入方法参数"),i.createElement(s.Kx,{value:o,onChange:e=>{a(e)}}),i.createElement(s.zx,{"aria-label":"确定",onClick:()=>{e.payload=o,h(e)}},"确定"))},i.createElement(s.zx,{theme:"borderless",type:"primary",onClick:()=>{a(e.payload)},size:"small",icon:i.createElement(nt.Z,null)}))),i.createElement(s.T,{className:"action"},i.createElement(s.zx,{size:"small",onClick:()=>{h(e)},icon:i.createElement(it.Z,null)},"确定")))})(t),!t.root&&-1===r.indexOf(t.index)&&(e=>i.createElement(i.Fragment,null,i.createElement(rt,{className:"label-content"},e.label||"未配置动作",e.payload?`(${e.payload})`:""),i.createElement(s.T,{className:"action"},i.createElement(s.zx,{size:"small",icon:i.createElement(ot.Z,null),theme:"borderless",type:"tertiary",onClick:()=>{p(e.index)}}),i.createElement(s.zx,{size:"small",theme:"borderless",type:"tertiary",icon:i.createElement(at.Z,null),onClick:()=>{m(e.index)}}))))(t)),treeData:g}))})),ct=lt;n(5839);var dt=n(55097),pt=n(35633),mt=n(92895);const ht=(0,s.Q2)((({value:e,options:t,onChange:n})=>{const[o,a]=(0,i.useState)(!1),[r,l]=(0,i.useState)(""),c=i.createRef();return i.createElement("div",null,i.createElement(s.u_,{closeOnEsc:!1,lazyRender:!1,onCancel:()=>{a(!1),l("")},keepDOM:!0,title:"编辑JSON数据",visible:o,onOk:()=>{try{const e=c.current.editorComposite.state.doc.toString();if(""!==e){const t=JSON.parse(e);n(t)}else n("");a(!1),l("")}catch(e){l(e.message)}}},i.createElement("div",null,"默认值/代码"),i.createElement("div",{style:{border:"1px solid var(--semi-color-border)",overflow:"auto",height:"300px",width:"100%"},className:"code-editor-container",ref:c}),i.createElement("div",{style:{color:"red"}},r)),i.createElement(s.zx,{size:"small",type:"tertiary",onClick:()=>{a(!0),c.current.editorComposite&&c.current.editorComposite.destroy(),c.current.editorComposite=new dt.tk({doc:null!=e?JSON.stringify(e,null,2):"",extensions:[pt.Xy,(0,mt.AV)(),(0,dt.jH)({position:"absolute"})],parent:c.current}),c.current.editorComposite.jsonParseLinter=mt.ap}},"编辑"))}));var gt=n(26451),ut=n(39299),bt={};bt.styleTagTransform=w(),bt.setAttributes=b(),bt.insert=g().bind(null,"head"),bt.domAPI=m(),bt.insertStyleElement=v(),d()(ut.Z,bt),ut.Z&&ut.Z.locals&&ut.Z.locals;const ft=({images:e,select:t})=>i.createElement("div",{zIndex:3001,className:"app-image-list"},e.map(((e,n)=>i.createElement("div",{key:n,className:"image-item"},i.createElement("div",{className:"image-wrapper"},i.createElement("img",{onClick:()=>{var n;t((n=e).path,n.src)},src:e.src})))))),vt=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]),a=()=>i.createElement("div",{style:{width:"510px",height:"430px"}},i.createElement(ft,{images:n,select:e=>{t(e)}}));return i.createElement(s.II,{size:"small",showClear:!0,onClear:()=>t(""),value:e,onChange:e=>t(e),suffix:i.createElement(s.J2,{onVisibleChange:e=>{if(e){const{appService:e}=_e,t=Object.entries(e.dataUrlByPath).map((e=>({path:e[0],src:e[1]})));o(t)}},trigger:"click",showArrow:!0,zIndex:2001,content:i.createElement(a,null)},i.createElement(gt.Z,{style:{cursor:"pointer"}}))})}));var yt=n(89539);const{Text:wt}=s.Typography,xt=(0,s.Q2)((({value:e,onChange:t})=>{const{icons:n}=window.Ridge,o=()=>i.createElement(i.Fragment,null,i.createElement(s.mQ,{type:"button",size:"small"},Object.values(n).map(((e,n)=>i.createElement(s.Jm,{key:n,itemKey:n,tab:i.createElement("div",{className:e.options.icon})},i.createElement("div",{className:"icon-list"},e.icons.map((e=>i.createElement("i",{onClick:()=>{t(e)},key:e,className:e})))))))));return i.createElement(s.II,{size:"small",showClear:!0,onClear:()=>t(""),value:e,onChange:e=>t(e),suffix:i.createElement(s.J2,{trigger:"click",className:"pop-icon-container",showArrow:!0,zIndex:2001,content:i.createElement(o,null)},i.createElement("span",{className:"picker-button"},i.createElement(yt.Z,null)))})}));var Et=n(10888);const Ct=({position:e="border",value:t,onChange:n})=>{const o=(t||"0 0 0 0").split(" ").map((e=>parseInt(e)||0));return i.createElement(i.Fragment,null,i.createElement(s.II,{size:"small",value:t,onChange:n,suffix:i.createElement(s.J2,{trigger:"click",stopPropagation:!0,content:i.createElement("div",{className:"input-padding-pop"},i.createElement("div",{className:"input-padding position-"+e},o.map(((e,t)=>i.createElement(s.Rn,{className:"input-padding-number order-"+t,key:t,size:"small",value:e,onChange:e=>{o[t]=e,n(o.map((e=>e+"px")).join(" "))}})))))},i.createElement(Et.Z,{style:{cursor:"pointer"}}))}))},kt=(0,s.Q2)(Ct),St=(0,s.Q2)((({value:e,onChange:t})=>{const n="string"!=typeof e?"#fff":e,o=n.match(/[0-9]+deg|\s[^%]+%/g);let a,r,l,c=[];null==o||o.length<3?(a=n,c.push({color:a})):(l=parseInt(o[0])||0,r=o.slice(1),c.push(...r.map((e=>{const t=e.trim().split(/\s+/);return{color:t[0],percent:parseInt(t[1])}}))));const d=e=>{e?c=c.filter(((t,n)=>n!==e)):c.push({color:"#fff",percent:100}),p()},p=()=>{1===c.length?t(c[0].color):t(`linear-gradient(${l||0}deg, ${c.map(((e,t)=>{let n=e.percent;return 0===t&&(n=0),t===c.length-1&&(n=100),e.color+" "+n+"%"})).join(", ")})`)};return i.createElement("div",{className:"background-edit"},i.createElement("div",{className:"color-list"},i.createElement(s.aV,{dataSource:c,size:"small",renderItem:(e,t)=>{let n=e.percent||0,o=!1;return 0===t&&(n=0,o=!0),t===c.length-1&&(n=100,o=!0),i.createElement(s.T,{style:{width:"100%"}},i.createElement(A,{value:e.color,onChange:e=>((e,t)=>{c=c.map(((n,i)=>({color:i===e?t:n.color,percent:n.percent}))),p()})(t,e)}),t>0&&i.createElement("div",{style:{flex:1}},i.createElement(s.iR,{value:n,disabled:o,onChange:e=>((e,t)=>{c=c.map(((n,i)=>({color:n.color,percent:i===e?t:n.percent}))),p()})(t,e)})),t>0&&i.createElement(s.zx,{icon:i.createElement("i",{className:"bi bi-x-lg"}),size:"small",type:"danger",onClick:()=>d(t),style:{marginRight:4}}))}}),c.length>1&&i.createElement(s.T,null,i.createElement(s.Rn,{insetLabel:"渐变角度",size:"small",value:l,onChange:e=>(e=>{l=e,p()})(e)}))),i.createElement("div",{style:{fontSize:14}},i.createElement(s.zx,{size:"small",theme:"borderless",icon:i.createElement("i",{className:"bi bi-plus-lg"}),onClick:()=>d()})))})),zt=({value:e,options:t,onChange:n})=>i.createElement(s.J2,{content:i.createElement("div",{className:"preset-color-picker",style:{padding:"10px"}},t&&t.map(((t,o)=>i.createElement("div",{key:o},i.createElement("div",{style:{margin:"5px"}},t.title),i.createElement(R.iY,{colors:t.colors,color:e,onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}})))))},i.createElement(s.zx,{size:"small",style:{backgroundColor:e,height:"22px",width:"22px",padding:0,border:"1px solid #ccc"}})),Pt=(0,s.Q2)((e=>i.createElement(zt,e))),Nt=(0,s.Q2)((({value:e,options:t,onChange:n})=>i.createElement(s.FX,{type:"button",buttonSize:"small",value:e,onChange:e=>{n(e.target.value)}},t&&t.map((e=>e.icon?i.createElement(s.Y8,{key:e.value,value:e.value},i.createElement("i",{className:e.icon,style:{fontSize:18}})):e.label?i.createElement(s.Y8,{key:e.value,value:e.value},i.createElement("div",{style:{fontSize:"14px",...e.style}},e.label)):i.createElement(s.Y8,{key:e.value,value:e.value})))))),Lt=Nt;var Ot=n(11176);const Ft=(0,s.Q2)((({value:e,optionList:t,selectAll:n,onChange:o})=>{const a=e&&t&&e.length>0&&e.length<t.length,[r,l]=(0,i.useState)(!1);return i.createElement(i.Fragment,null,n&&i.createElement("div",{style:{paddingBottom:6,paddingLeft:4,borderBottom:"1px solid var(--semi-color-border)"}},i.createElement(s.XZ,{indeterminate:a,onChange:e=>{o(e.target.checked?t&&t.map((e=>e.value)):[]),l(e.target.checked)},checked:r,"aria-label":"Checkbox 示例"},"全选")),i.createElement(s.cO,{direction:"horizontal",type:t&&t[0]&&t[0].icon?"pureCard":"card",buttonSize:"small",value:e,onChange:e=>{o(e)}},t&&t.map((e=>{if(e.icon){const t=Ot[e.icon];return i.createElement(s.u,{content:e.label,key:e.value},i.createElement(s.XZ,{value:e.value,"aria-label":e.label},i.createElement(t,{rotate:e.rotate||0})))}return e.label?i.createElement(s.XZ,{key:e.value,value:e.value},e.label):i.createElement(s.XZ,{key:e.value,value:e.value})}))))})),Tt=({value:e,options:t,onChange:n})=>i.createElement(s.J2,{showArrow:!0,trigger:"click",content:i.createElement(i.Fragment,null,i.createElement(s.zx,{size:"small",onClick:()=>{n(null)}},"清除颜色"),i.createElement(R.xS,{color:e,width:220,style:{boxShadow:"none"},triangle:"hide",onChange:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))},onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}}))},i.createElement(s.zx,{size:"small",style:{backgroundColor:e,height:"20px",width:"20px",margin:"0 3px",padding:0,border:"1px solid #ccc"}})),jt=(0,s.Q2)((({value:e,onChange:t})=>{let n=[0,0,5,5,"#ccc"];e&&(n=e.split(" ").map(((e,t)=>t<4?parseInt(e):e)));const o=e=>{t(`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px ${e[4]}`)};return i.createElement(s.T,{spacing:2,wrap:!0},i.createElement(s.Rn,{className:"digit2",size:"small",value:n[0],onChange:e=>{n[0]=e,o(n)}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:n[1],onChange:e=>{n[1]=e,o(n)}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:n[2],onChange:e=>{n[2]=e,o(n)}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:n[3],onChange:e=>{n[3]=e,o(n)}}),i.createElement(Tt,{value:n[4],onChange:e=>{n[4]=e,o(n)}}))})),Rt=(0,s.Q2)((({icon:e,value:t,onChange:n})=>i.createElement("div",{style:{height:24,display:"flex",alignItems:"center"}},i.createElement(s.zx,{placeholder:"启用调试模式",type:t?"primary":"tertiary",size:"small",theme:"borderless",onClick:()=>{n(!t)},icon:e}))));var At=n(11177);const{Text:Mt}=s.Typography,It=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)(!1),a=e||{},r=(a.boxShadow||"0 0 0 0 #fff").split(" ").map(((e,t)=>t<4?parseInt(e):e)),l=()=>{t(Object.assign(a,{boxShadow:`${r[0]}px ${r[1]}px ${r[2]}px ${r[3]}px ${r[4]}`}))};return i.createElement(i.Fragment,null,i.createElement(s.T,null,i.createElement(Mt,{type:"tertiary"},"边框及背景"),i.createElement(Tt,{value:a.borderColor,onChange:e=>{t(Object.assign(a,{borderColor:e}))}}),i.createElement(Tt,{value:a.backgroundColor,onChange:e=>{t(Object.assign(a,{backgroundColor:e}))}}),i.createElement(s.Select,{value:a.borderStyle,optionList:[{label:"实线",value:"solid"},{label:"点划线",value:"dashed"}],size:"small",onChange:e=>{t(Object.assign(a,{borderStyle:e}))}}),i.createElement(s.zx,{type:n?"primary":"tertiary",theme:"borderless",icon:i.createElement(At.Z,null),onClick:()=>{o(!n)}})),i.createElement(s.zF,{isOpen:n},i.createElement(s.T,{style:{marginTop:8}},i.createElement(Mt,{type:"tertiary",style:{width:60}},"边框宽度"),i.createElement(Ct,{value:a.borderWidth,onChange:e=>{t(Object.assign(a,{borderWidth:e}))}})),i.createElement(s.T,{style:{marginTop:12}},i.createElement(Mt,{type:"tertiary",style:{width:60}},"内边距"),i.createElement(Ct,{value:a.padding,onChange:e=>{t(Object.assign(a,{padding:e}))}})),i.createElement(s.T,{style:{marginTop:12}},i.createElement(Mt,{type:"tertiary",style:{width:60}},"圆角"),i.createElement(Ct,{position:"corner",value:a.borderRadius,onChange:e=>{t(Object.assign(a,{borderRadius:e}))}})),i.createElement(s.T,{style:{marginTop:12}},i.createElement(Mt,{type:"tertiary"},"阴影"),i.createElement(s.Rn,{className:"digit2",size:"small",value:r[0],onChange:e=>{r[0]=e,l()}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:r[1],onChange:e=>{r[1]=e,l()}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:r[2],onChange:e=>{r[2]=e,l()}}),i.createElement(s.Rn,{className:"digit2",size:"small",value:r[3],onChange:e=>{r[3]=e,l()}}),i.createElement(Tt,{value:r[4],onChange:e=>{r[4]=e,l()}}))))})),Dt=It;var Zt=n(76737),Vt=n(91897);const Ut=[{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"微软雅黑",value:"Microsoft Yahei"},{name:"微软正黑体",value:"Microsoft JhengHei"},{name:"楷体",value:"KaiTi"},{name:"新宋体",value:"NSimSun"},{name:"仿宋",value:"FangSong"},{name:"幼圆",value:"YouYuan"},{name:"隶书",value:"LiSu"},{name:"苹方",value:"PingFang SC"}],Bt=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)(!1),a=e||{},r=parseInt(a.fontSize||"20");return i.createElement(i.Fragment,null,i.createElement(s.T,null,i.createElement(s.Rn,{size:"small",style:{width:"46px"},value:r,onChange:e=>{t(Object.assign(a,{fontSize:e+"px"}))}}),i.createElement(Tt,{value:a.color,onChange:e=>{t(Object.assign(a,{color:e}))}}),i.createElement(s.zx,{icon:i.createElement(Zt.Z,null),size:"small",type:"bold"===a.fontWeight?"primary":"tertiary",theme:"bold"===a.fontWeight?"solid":"borderless",onClick:()=>{t(Object.assign(a,{fontWeight:"bold"===a.fontWeight?"normal":"bold"}))}}),i.createElement(s.zx,{type:"tertiary",theme:"borderless",icon:i.createElement(Vt.Z,{rotate:n?180:0}),onClick:()=>{o(!n)}})),i.createElement(s.zF,{isOpen:n},i.createElement(s.T,null,i.createElement(s.Select,{size:"small",defaultValue:a.fontFamily,style:{width:120},onChange:e=>{t(Object.assign(a,{fontFamily:e}))}},Ut.map((e=>i.createElement(s.Select.Option,{key:e.name,value:e.value},e.name)))))))})),Jt=Bt;var qt=n(53523),$t=n(91197);const Wt=(0,s.Q2)((({value:e,onChange:t,options:n})=>{const o=e||[],[a,r]=(0,i.useState)(1),l=(e,n,i)=>{t(o.map(((t,o)=>o===6*(a-1)+i?e?Object.assign(t,{[e]:n}):n:t)))};return i.createElement(i.Fragment,null,i.createElement(s.aV,{dataSource:(e=>{const t=6*(e-1),n=6*e;return o.slice(t,n)})(a),split:!1,size:"small",className:"component-list-demo-booklist",style:{border:"1px solid var(--semi-color-border)",flexBasis:"100%",flexShrink:0},renderItem:(e,n)=>{let r=null;if("string"==typeof e)r=i.createElement(s.II,{onChange:e=>{l("",e,n)},value:e,size:"small"});else{const t=Object.keys(e);r=i.createElement(i.Fragment,null,t.map((t=>i.createElement(s.II,{key:t,onChange:e=>{l(t,e,n)},value:e[t],size:"small"}))))}return i.createElement("div",{style:{margin:4,gap:4,display:"flex"},className:"list-item"},r,i.createElement(s.zx,{size:"small",type:"danger",theme:"borderless",icon:i.createElement(qt.Z,null),onClick:()=>(e=>{t(o.filter(((t,n)=>n!==6*(a-1)+e)))})(n),style:{marginRight:4}}))}}),i.createElement("div",{style:{margin:4,fontSize:14,display:"flex",justifyContent:"space-between"}},i.createElement(s.zx,{size:"small",theme:"borderless",icon:i.createElement($t.Z,null),onClick:()=>{t([...o,JSON.parse(JSON.stringify(n.item))])},style:{marginRight:4,color:"var(--semi-color-info)"}},"新增项"),i.createElement("div",null,o.length>6&&i.createElement(s.tl,{size:"small",style:{height:24,width:"100%",flexBasis:"100%",justifyContent:"center"},pageSize:6,total:o.length,currentPage:a,onChange:e=>r(e)}))))})),Yt=Wt;var Gt=n(5553);const Qt=(0,s.Q2)((({value:e,onChange:t})=>{const n=e||{},i=n.categories||["分类1"],o=n.series||[{name:"系列1",data:[10]}];return React.createElement(React.Fragment,null,React.createElement(s.J2,{trigger:"click",content:React.createElement("table",{className:"series-table-edit"},React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"分类"),o.map(((e,n)=>React.createElement("th",{key:n,onBlur:e=>((e,n)=>{t({categories:i,series:o.map(((t,i)=>i===e?{name:n.target.textContent,data:t.data}:t))})})(n,e),contentEditable:!0},e.name))),React.createElement("th",{className:"column-plus",placeholder:"增加一个数据系列",onClick:()=>{t({categories:i,series:[...o,{name:"系列",data:[]}]})}},"+")),i.map(((e,n)=>React.createElement("tr",{key:n},React.createElement("td",null,n),React.createElement("td",{contentEditable:!0,onBlur:e=>((e,n)=>{t({categories:i.map(((t,i)=>i===e?n.target.textContent:t)),series:o})})(n,e),onPaste:e=>((e,n)=>{e.stopPropagation(),e.preventDefault();const a=(e.clipboardData||window.clipboardData).getData("text/plain").split("\r\n");for(let e=0;e<a.length;e++){const t=a[e].split(/ +|\t|,/).filter((e=>e));i[n+e]=t[0];for(let i=1;i<t.length;i++)o[i-1]&&(o[i-1].data[n+e]=parseFloat(t[i])||0)}t({categories:i,series:o})})(e,n)},e),o.map(((e,a)=>React.createElement("td",{key:a,contentEditable:!0,onBlur:e=>((e,n,a)=>{t({categories:i,series:o.map(((t,i)=>i===n?(t.data[e]=parseFloat(a.target.textContent)||0,t):t))})})(n,a,e),onPaste:e=>((e,n,a)=>{e.stopPropagation(),e.preventDefault();const r=(e.clipboardData||window.clipboardData).getData("text/plain").split("\r\n");for(let e=0;e<r.length;e++){const t=r[e].split(/ +|\t|,/).filter((e=>e));for(let i=0;i<t.length;i++)o[a+i]&&(o[a+i].data[n+e]=parseFloat(t[i])||0)}t({categories:i,series:o})})(e,n,a)},e.data[n]))),React.createElement("td",{className:"row-delete",onClick:()=>{return e=n,i.splice(e,1),void t({categories:i,series:o.map((t=>(t.data.splice(e,1),{name:t.name,data:t.data})))});var e}},React.createElement(Gt.Z,null))))),React.createElement("tr",null,React.createElement("td",{className:"row-plus",placeholder:"增加一个",onClick:()=>{t({categories:[...i,"分类"],series:o.map((e=>({name:e.name,data:[...e.data,0]})))})}},"+"),React.createElement("td",null),o.map(((e,n)=>React.createElement("td",{key:n,className:"column-delete",onClick:()=>{return e=n,void t({categories:i,series:o.filter(((t,n)=>n!==e))});var e}},React.createElement(Gt.Z,null))))))},React.createElement(s.zx,{size:"small",type:"primary"},"编辑")))})),Ht=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)(-1),[a,r]=(0,i.useState)(""),[l,c]=(0,i.useState)(!0),d=e||{current:"",list:[]},{current:p,list:m}=d;return i.createElement("div",{className:"state-list-edit"},i.createElement(s.aV,{className:"state-list",dataSource:m,split:!0,size:"small",renderItem:(e,d)=>d===n?i.createElement("div",{style:{display:"flex",height:"32px",alignItems:"center"},className:"list-item"},i.createElement("div",{style:{flex:1}},i.createElement(s.II,{validateStatus:l?"":"error",value:a,size:"small",onChange:e=>{var t;r(e),""===(t=e).trim()?c(!1):-1===m.filter(((e,t)=>t!==n)).indexOf(t)?c(!0):c(!1)}})),i.createElement(s.zx,{disabled:!l,type:"danger",size:"small",theme:"borderless",icon:i.createElement("i",{class:"bi bi-check-lg"}),onClick:()=>{-1===m.filter(((e,t)=>t!==n)).indexOf(a)&&(m[n]=a,o(-1),r(""),t({current:p,list:m}))},style:{marginRight:4}})):i.createElement("div",{className:"list-item"+(p===e?" is-current":""),onClick:()=>{(e=>{t({current:m[e],list:m})})(d)}},i.createElement("div",{className:"state-name",style:{flex:1}},e),i.createElement(s.zx,{type:"danger",theme:"borderless",icon:i.createElement("i",{class:"bi bi-pencil"}),onClick:()=>(e=>{o(e),r(m[e])})(d),style:{marginRight:4}}),i.createElement(s.zx,{theme:"borderless",icon:i.createElement("i",{class:"bi bi-trash"}),onClick:()=>(e=>{m.splice(e,1),t({current:p,list:m}),o(-1)})(d),style:{marginRight:4}}))}),i.createElement("div",{style:{margin:4,fontSize:14},onClick:()=>(()=>{let e="State",n=1;for(;m.indexOf(e)>-1;)e="State"+n,n++;t({current:p,list:[...m,e]}),r(e),o(m.length)})()},i.createElement(s.zx,{size:"small",theme:"borderless",icon:i.createElement("i",{class:"bi bi-plus-lg"}),style:{marginRight:4,color:"var(--semi-color-info)"}})))}));var Xt=n(18042),Kt={};Kt.styleTagTransform=w(),Kt.setAttributes=b(),Kt.insert=g().bind(null,"head"),Kt.domAPI=m(),Kt.insertStyleElement=v(),d()(Xt.Z,Kt),Xt.Z&&Xt.Z.locals&&Xt.Z.locals;const _t=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{_e.editorComposite&&o(_e.editorComposite.getClassNames().map((e=>({label:e.label,value:e.className}))))}),[e]),i.createElement(s.Select,{size:"small",multiple:!0,value:e,onChange:t},n.map((e=>i.createElement(s.Select.Option,{value:e.value,key:e.value},e.label))))})),en=(0,s.Q2)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{o(_e.appService.filterFiles((e=>e.mimeType&&e.mimeType.indexOf("audio")>-1)).map((e=>(console.log("audio file=>",e),{value:e.path,label:e.label}))))}),[e]),i.createElement(s.Select,{size:"small",value:e,showClear:!0,onChange:t},n&&n.map((e=>i.createElement(s.Select.Option,{value:e.value,key:e.value},e.label))))})),tn=[{name:"默认",value:"default"},{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"微软雅黑",value:"Microsoft Yahei"},{name:"微软正黑体",value:"Microsoft JhengHei"},{name:"楷体",value:"KaiTi"},{name:"新宋体",value:"NSimSun"},{name:"仿宋",value:"FangSong"},{name:"幼圆",value:"YouYuan"},{name:"隶书",value:"LiSu"},{name:"苹方",value:"PingFang SC"}],nn=(0,s.Q2)((({value:e,onChange:t})=>i.createElement(s.Select,{size:"small",value:e,onChange:t,showClear:!0},tn.map((e=>i.createElement(s.Select.Option,{key:e.name,value:e.value},e.name)))))),on=(0,s.Q2)((({value:e,onChange:t,...n})=>n.icon?i.createElement(s.zx,{icon:i.createElement("i",{style:{fontSize:20},className:n.icon}),size:"small",type:e?"primary":"tertiary",theme:e?"solid":"borderless",onClick:()=>{t(!e)}}):n.toggle?i.createElement(i.Fragment,null):i.createElement(s.XZ,{size:"small",checked:e,onChange:()=>t(!e)})));function an(){return an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},an.apply(this,arguments)}class rn extends i.Component{constructor(e){super(e),this.ref=i.createRef();const{InputNumber:t,Select:n,Checkbox:o,Input:a}=s.Form;this.controlGeneratorMap={divider:e=>i.createElement(s.iz,{margin:"0",align:"center"},e.label),number:(e,n)=>i.createElement(t,{size:"small",label:e.label,disabled:n,innerButtons:!0,field:e.field}),length:(e,n)=>i.createElement(t,{size:"small",label:e.label,disabled:n,field:e.field}),string:(e,t)=>i.createElement(a,{size:"small",label:e.label,field:e.field,disabled:t}),text:(e,t)=>i.createElement(a,{size:"small",label:e.label,field:e.field,disabled:t}),checkbox:(e,t)=>i.createElement(o,{size:"small",label:e.label,field:e.field,disabled:t}),boolean:(e,t)=>i.createElement(on,e),select:(e,t)=>i.createElement(n,{size:"small",label:e.label,showClear:!1===e.required,field:e.field,placeholder:e.placeholder,multiple:e.multiple,optionList:e.options||e.optionList,disabled:t}),radiogroup:(e,t)=>i.createElement(Lt,{label:e.label,field:e.field,options:e.optionList,disabled:t}),checkboxgroup:(e,t)=>i.createElement(Ft,{label:e.label,field:e.field,optionList:e.optionList,selectAll:e.selectAll,disabled:t}),states:(e,t)=>i.createElement(Ht,an({label:e.label,field:e.field},e)),fontFamily:(e,t)=>i.createElement(nn,{label:e.label,field:e.field,disabled:t}),border:(e,t)=>i.createElement(I,{label:e.label,field:e.field,disabled:t}),padding:(e,t)=>i.createElement(kt,an({disabled:t},e)),boxshadow:(e,t)=>i.createElement(jt,{label:e.label,field:e.field,disabled:t}),event:(e,t,n)=>i.createElement(ct,{className:"event-field",noLabel:!0,field:e.field,options:{label:e.label,...n}}),image:(e,t)=>i.createElement(vt,{label:e.label,field:e.field,disabled:t}),icon:(e,t)=>i.createElement(xt,{label:e.label,field:e.field,disabled:t}),audio:(e,t)=>i.createElement(en,{label:e.label,field:e.field,disabled:t}),rect:(e,t)=>i.createElement(Dt,{label:e.label,field:e.field,noLabel:!0,disabled:t}),font:(e,t)=>i.createElement(Jt,{label:e.label,field:e.field,disabled:t}),background:(e,t)=>i.createElement(St,{label:e.label,field:e.field,disabled:t}),colorpicker:(e,t)=>i.createElement(M,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),color:(e,t)=>i.createElement(M,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),presetcolorpicker:(e,t)=>i.createElement(Pt,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),json:(e,t)=>i.createElement(ht,{label:e.label,field:e.field,disabled:t}),array:e=>i.createElement(Yt,{label:e.label,field:e.field,options:e}),class:e=>i.createElement(_t,{label:e.label,field:e.field,options:e}),SeriesData:e=>i.createElement(Qt,e)}}getRenderField(e,t,n){return this.controlGeneratorMap[e.control]?this.controlGeneratorMap[e.control](e,t,n):i.createElement("div",null,e.label,"类型不支持",e.control)}renderField(e,t,n,o){if("slot"===e.type||"children"===e.type)return;if("function"==typeof e.hidden?e.hidden(n.values):e.hidden)return;const a="function"==typeof e.readonly?e.readonly(n.values):e.readonly;null==e.control&&(e.control=e.type);const r=this.getRenderField(e,a,o);return"divider"===e.type?i.createElement(s.iz,{key:t,margin:"0",align:"left"},e.label||""):e.fieldEx?i.createElement("div",{key:t,className:"field-block with-code-expr "+(e.width?"":"full-width"),style:{width:e.width||"100%"}},i.createElement("div",{style:{flex:1}},r),i.createElement(et,{className:"field-code-expr",noLabel:!0,field:e.fieldEx,options:o})):i.createElement("div",{key:t,className:"field-block",style:{width:e.width||"100%"}},r)}render(){const e=this.renderField.bind(this),{fields:t,tableStyle:n,getFormApi:o,onValueChange:a,style:r,initValues:l,options:c,labelPosition:d="left"}=this.props,p=e=>{const n=[{dataIndex:"label",width:68},{dataIndex:"bind",render:(t,n,i)=>{const o="function"==typeof n.readonly?n.readonly(e.values):n.readonly,a=this.getRenderField(n,o,c);return a.props.noLabel=!0,a}},{dataIndex:"bind",width:32,render:(e,t,n)=>"debug"===t.extra?i.createElement(Rt,{noLabel:!0,field:"debug",icon:i.createElement(j.Z,null)}):!1===t.bindable?null:i.createElement(et,{noLabel:!0,field:t.fieldEx,options:c})}];return i.createElement(s.iA,{columns:n,dataSource:t,pagination:!1})},m=e=>{this.api=e,o&&o(e)};return i.createElement("div",{className:"object-form",style:r},!n&&i.createElement(s.Form,{size:"small",labelAlign:"right",labelPosition:d,layout:"horizontal",getFormApi:m,initValues:l,onValueChange:a,render:({formState:n,formApi:o,values:a})=>i.createElement(i.Fragment,null,t&&t.map(((t,i)=>e(t,i,n,c))))}),n&&i.createElement(s.Form,{noLabel:!0,labelPosition:d,getFormApi:m,initValues:l,onValueChange:a,render:({formState:e,formApi:n,values:o})=>i.createElement(i.Fragment,null,t&&p(e))}))}}const sn={ADD:[5,5,0,0,280,450],LEFT_BOTTOM:[5,460,0,8,280,0],PROP:[0,5,5,0,320,540],DATA:[0,550,5,5,320,0]},ln={ADD:[5,5,0,0,280,360],LEFT_BOTTOM:[5,370,0,5,280,0],PROP:[0,5,5,0,280,400],DATA:[0,410,5,5,280,0]},cn=r()("editor:config-panel"),dn=[{label:"名称",control:"text",bindable:!1,field:"title"}],pn=[{label:"X",control:"number",width:"50%",readonly:e=>!(e&&e.style&&"absolute"===e.style.position),field:"style.x",fieldEx:"styleEx.x"},{label:"Y",width:"50%",control:"number",readonly:e=>!(e&&e.style&&"absolute"===e.style.position),field:"style.y",fieldEx:"styleEx.Y"},{label:"W",width:"50%",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"H",width:"50%",control:"number",field:"style.height",fieldEx:"styleEx.height"},{label:"显示",type:"boolean",control:"checkbox",width:"50%",field:"style.visible",fieldEx:"styleEx.visible"}],mn=[{label:"填满页面",width:"50%",type:"boolean",field:"style.full"},{label:"透明度",type:"number",width:"50%",field:"style.opacity",fieldEx:"styleEx.opacity"},{label:"层高",type:"number",width:"50%",field:"style.zIndex"}],hn=[{label:"页面名称",control:"text",readonly:!0,bindable:!1,field:"name"},{label:"宽度",bindable:!1,control:"number",width:"50%",field:"style.width"},{label:"高度",bindable:!1,width:"50%",control:"number",field:"style.height"},{label:"背景",control:"background",field:"style.background"}];class gn extends i.Component{constructor(e){super(e),this.ref=i.createRef(),this.componentPropFormApi=null,this.componentEventFormApi=null,this.pagePropFormApi=null,_e.services.configPanel=this,this.state={configPage:!0,pageFields:[],pageEventFields:[],nodePropFields:[],nodeEventFields:[]}}static contextType=F;componentDidMount(){}componentSelected(e){let t=e;e instanceof Node&&(t=e.view),this.componentView=t,cn("updatePanelConfig",t);const n=[];n.push(...dn),t.getParent()!==_e.editorComposite?n.push(...t.getParent().componentDefinition?.childProps||[]):n.push(...pn);const i=[];if(t.componentDefinition){for(const e of t.componentDefinition.props){const t={};e.connect?Object.assign(t,e,{field:"props."+e.name,fieldEx:"propEx."+e.name}):Object.assign(t,e,{field:"props."+e.name}),n.push(t)}for(const e of t.componentDefinition.events||[]){const t={label:e.label,type:"function",control:"event",field:"events."+e.name};i.push(t)}}this.setState({configPage:!1,nodePropFields:n,nodeEventFields:i},(()=>{for(const e of["title","props","propEx","style","styleEx","id"])this.componentPropFormApi.setValue(e,JSON.parse(JSON.stringify(t.config[e])),{notNotify:!0});this.componentEventFormApi.setValue("events",JSON.parse(JSON.stringify(t.config.events)),{notNotify:!0})}))}updateComponentConfig(e){if(e===this.componentView)for(const t of["title","props","propEx","style","styleEx","id"])this.componentPropFormApi.setValue(t,JSON.parse(JSON.stringify(e.config[t])),{notNotify:!0})}updatePageConfigFields(){const{editorComposite:e}=_e,{appService:t}=_e.services;this.setState({configPage:!0,pageFields:[...hn,{field:"cssFiles",label:"样式表",control:"select",placeholder:"请选择样式文件",optionList:t.filterFiles((e=>"text/css"===e.mimeType)).map((e=>({value:e.path,label:e.label}))),required:!1,multiple:!0},{field:"jsFiles",label:"脚本库",control:"select",placeholder:"请选择脚本文件",optionList:t.filterFiles((e=>"text/javascript"===e.mimeType)).map((e=>({value:e.path,label:e.label}))),required:!1,multiple:!0},{field:"style.classNames",label:"样式库",control:"select",placeholder:"请选择样式",optionList:e.classNames.map((e=>({label:e.label,value:e.className}))),required:!1,multiple:!0}]});const{cssFiles:n,jsFiles:i,storeFiles:o,style:a,name:r}=e.config;this.pagePropFormApi.setValue("cssFiles",n,{notNotify:!0}),this.pagePropFormApi.setValue("jsFiles",i,{notNotify:!0}),this.pagePropFormApi.setValue("storeFiles",o,{notNotify:!0}),this.pagePropFormApi.setValue("style",a,{notNotify:!0}),this.pagePropFormApi.setValue("name",r,{notNotify:!0})}nodeRectChange(e){this.styleChange(e)}render(){const{nodePropFields:e,nodeEventFields:t,pageFields:n,configPage:o}=this.state,a=(e,t)=>{_e.updateComponentConfig(this.componentView,e)};return i.createElement(i.Fragment,null,i.createElement(s.mQ,{type:"card",className:"on-title",style:{display:o?"none":"block"}},i.createElement(s.Jm,{tab:"属性",itemKey:"props"},i.createElement(rn,{fields:e,getFormApi:e=>{this.componentPropFormApi=e},onValueChange:(e,t)=>{e.id===this.componentView.config.id&&_e.updateComponentConfig(this.componentView,e)}})),i.createElement(s.Jm,{tab:"交互",itemKey:"interact"},i.createElement(rn,{fields:t,getFormApi:e=>{this.componentEventFormApi=e},onValueChange:a})),i.createElement(s.Jm,{tab:"样式",itemKey:"style"},i.createElement(rn,{fields:mn,getFormApi:e=>{this.componentStyleFormApi=e},onValueChange:(e,t)=>{_e.updateComponentConfig(this.componentView,e)}}))),i.createElement(s.mQ,{type:"card",className:"on-title",style:{display:o?"block":"none"}},i.createElement(s.Jm,{tab:"基础",itemKey:"style"},i.createElement(rn,{fields:n,getFormApi:e=>{this.pagePropFormApi=e},onValueChange:(e,t)=>{_e.editorComposite.updatePageConfig(e)}})),i.createElement(s.Jm,{tab:"交互",itemKey:"interact"},i.createElement(rn,{getFormApi:e=>{},onValueChange:a}))))}}function un(){return un=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},un.apply(this,arguments)}class bn extends i.Component{constructor(){super(),this.state={show:!0}}render(){return i.createElement(T,un({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),i.createElement(gn,null))}}var fn=n(87188),vn={};vn.styleTagTransform=w(),vn.setAttributes=b(),vn.insert=g().bind(null,"head"),vn.domAPI=m(),vn.insertStyleElement=v(),d()(fn.Z,vn),fn.Z&&fn.Z.locals&&fn.Z.locals;const{IconUnlock:yn,IconLock:wn,IconEyeOpened:xn,IconEyeClosedSolid:En}=Ot,{Text:Cn}=s.Typography,kn=r()("ridge:outline");class Sn extends i.Component{constructor(){super(),this.state={componentTreeData:[],expandedKeys:[],selected:null},_e.services.outlinePanel=this}static contextType=F;updateOutline(){if(_e.editorComposite){const e=this.buildElementTree(_e.editorComposite.children);kn("updateOutline",e),this.setState({componentTreeData:e})}}setCurrentNode(e){e?this.setState({selected:e.config.id}):this.setState({selected:null})}onNodeSelected(e){const t=_e.getNode(e);t&&t.el&&_e.workspaceControl.selectElements([t.el],!0),this.setState({selected:e})}buildElementTree(e){const t=[];for(const n of e)t.push(this.getElementTree(n));return t}getElementTree(e){const t={key:e.getId(),value:e.getId(),label:e.config.title,element:e};return e.componentDefinition&&e.componentDefinition.icon&&(t.icon=i.createElement("img",{className:"item-icon",src:e.componentDefinition.icon})),e.children&&(t.children=e.children.map((e=>({...this.getElementTree(e),parent:t})))),t}toggleLock=e=>{const t=_e.getNode(e.element),n=!t.config.style.locked;t.updateStyleConfig({locked:n}),_e.workspaceControl.selectElements([t.el])};toggleVisible=e=>{const t=_e.getNode(e.element),n=!t.config.style.visible;t.updateStyleConfig({visible:n}),_e.workspaceControl.selectElements([t.el]),this.updateOutline()};renderFullLabel=(e,t)=>{const{toggleLock:n,toggleVisible:o}=this,{visible:a,locked:r}=t.element.config.style;return i.createElement("div",{className:"tree-label "+(a?"is-visible":"is-hidden")+" "+(r?"is-locked":"")},i.createElement(s.T,{className:"label-content"},i.createElement(Cn,{className:"label-text"},e??t.key),t.tags&&t.tags.map((e=>i.createElement(s.Vp,{size:"small",color:"amber",key:e}," ",e," ")))),i.createElement(s.T,{spacing:2},i.createElement(s.zx,{className:r?"":"hover-show",size:"small",theme:"borderless",type:"tertiary",onClick:()=>{n(t)},icon:r?i.createElement(wn,null):i.createElement(yn,null)}),i.createElement(s.zx,{className:a?"hover-show":"",size:"small",theme:"borderless",type:"tertiary",onClick:()=>{o(t)},icon:a?i.createElement(xn,null):i.createElement(En,null)})))};ordering(e,t,n,i){const o=[];for(let a=0;a<e.length;a++)e[a].key===n.key?-1===i?(o.push(t.key),o.push(n.key)):1===i&&(o.push(n.key),o.push(t.key)):e[a].key!==t.key&&o.push(e[a].key);return o}onTreeDrop({event:e,node:t,dragNode:n,dragNodesKeys:i,dropPosition:o,dropToGap:a}){const r=t.pos.split("-"),l=o-Number(r[r.length-1]),c=t.parent?t.parent.element:_e.editorComposite,d=n.parent?n.parent.element:_e.editorComposite;if(!0===a){const e=t.parent?t.parent.children:this.state.componentTreeData,i=this.ordering(e,n,t,l);c!==d&&d.removeChild(n.element),i.length!==e.length&&c.appendChild(n.element),c.updateChildList(i)}else{if(!t.element.isContainer)return void s.FN.warning({content:"目标节点无法再放入子节点",duration:3});d.removeChild(n.element),t.element.appendChild(n.element)}this.updateOutline(),_e.workspaceControl.selectElements([n.element.el],!0)}render(){const{selected:e,componentTreeData:t,expandedKeys:n}=this.state,{renderFullLabel:o,onTreeDrop:a}=this;return i.createElement(s.mp,{className:"outline-tree",autoExpandWhenDragEnter:!0,autoExpandParent:!0,draggable:!0,renderLabel:o,onDrop:a.bind(this),onChange:e=>{this.onNodeSelected(e)},onExpand:e=>{this.setState({expandedKeys:e})},expandedKeys:n,value:e,treeData:t})}}const zn=Sn;function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Pn.apply(this,arguments)}class Nn extends i.Component{constructor(){super(),this.state={show:!0}}render(){return i.createElement(T,Pn({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),i.createElement(zn,null))}}const Ln=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},i.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 5a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm10 0a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1zM4 15a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1zm10 2h6m-3-3v6"})),On=n(96292)("ridge:cl"),{Text:Fn}=s.Typography;class Tn extends i.Component{constructor(){super(),this.el=document.createElement("div"),this.ref=i.createRef(),this.state={loadedPackages:[],loadedComponents:[],currentPackage:"",fullLoading:!0},_e.services.componentListPanel=this,this.loadedComponents=[]}async ensurePackageComponents(e){for(const t of e.components){const n=e.name+"/"+t;0===this.loadedComponents.filter((e=>e.componentPath===n)).length&&_e.loadComponent(n).then((i=>{i&&(i.packageName=e.name,i.componentName=t,i.componentPath=n,this.loadedComponents.push(i),this.setState({loadedComponents:[...this.loadedComponents]}))}))}}tabChange(e){this.setState({currentPackage:e});const t=this.state.loadedPackages.filter((t=>t.name===e))[0];this.ensurePackageComponents(t)}async loadPackages(){this.setState({fullLoading:!0});const e=await _e.loadPackages();e.length?this.setState({fullLoading:!1,loadedPackages:e,currentPackage:e[0].name}):this.setState({fullLoading:!1}),this.ensurePackageComponents(e[0])}componentDidMount(){this.loadPackages()}dragStart(e,t){_e.draggingComponent=t,window.dragComponent=t,e.dataTransfer.setData("text/plain",JSON.stringify(t));const n=new window.Image;n.src=t.icon,n.style.width="50px",n.style.height="50px";const i=document.createElement("canvas");i.width=i.height=50,i.getContext("2d").drawImage(n,0,0,50,50),On("drag start",t,n),e.dataTransfer.setDragImage(i,25,25)}getFilteredComponents(e){const{loadedComponents:t}=this.state;return this.context?t.filter((e=>(e.title||e.label).indexOf(this.context)>-1)):t.filter((t=>t.packageName===e))}renderComponentIcon(e,t){return e?i.createElement("div",{className:"image-icon"},i.createElement("img",{src:e}),i.createElement(Fn,null,t," ")):i.createElement(Fn,null,t," ")}render(){const{fullLoading:e,loadedPackages:t,currentPackage:n,loadedComponents:o}=this.state,{dragStart:a,renderComponentIcon:r}=this,l=this.tabChange.bind(this);return i.createElement(i.Fragment,null,e&&i.createElement(s.yC,{size:"large",tip:"等待应用载入"}),!e&&i.createElement(s.mQ,{type:"button",size:"small",tabPosition:"left",tabBarExtraContent:i.createElement("div",{className:"package-icon"},i.createElement(Ln,null)),activeKey:n,onChange:e=>l(e)},t.length&&t.map((e=>{let t=i.createElement("div",{className:"package-icon "+e.icon});return t=e.icon?i.createElement("div",{className:"package-icon"},i.createElement("img",{src:e.icon})):i.createElement("div",{className:"package-icon"},e.name.charAt(0)),i.createElement(s.Jm,{style:{padding:"4px"},className:"tab-title",collapsible:!0,tab:t,key:e.name,itemKey:e.name},i.createElement(s.aV,{grid:{gutter:6,span:8},dataSource:e.components,renderItem:t=>{const n=o.filter((n=>n.packageName===e.name&&n.componentName===t))[0];return n?i.createElement(s.aV.Item,null,i.createElement("div",{draggable:!0,onDragStart:t=>a(t,Object.assign(n,{componentPath:e.name+"/"+n.path})),className:"component-container"},r(n.icon,n.title))):i.createElement(s.aV.Item,null,i.createElement("div",{className:"component-container loading"}))}}))}))))}}const jn=Tn;var Rn=n(5900),An={};function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Mn.apply(this,arguments)}An.styleTagTransform=w(),An.setAttributes=b(),An.insert=g().bind(null,"head"),An.domAPI=m(),An.insertStyleElement=v(),d()(Rn.Z,An),Rn.Z&&Rn.Z.locals&&Rn.Z.locals;class In extends i.Component{render(){return i.createElement(T,Mn({},this.props,{className:"component-panel"}),i.createElement(jn,null))}}const Dn=In;var Zn=n(1605),Vn=n(78013),Un=n(96994),Bn=n(21812),Jn=n(6377),qn=n(73231),$n=n(95687),Wn=n(94015),Yn=n(95408),Gn=n(28969);const Qn=({show:e,value:t,siblingNames:n,change:o,confirm:a,cancel:r})=>{const[l,c]=(0,i.useState)(!0);return i.createElement(s.u_,{title:"重命名",visible:e,onOk:()=>{l&&a()},onCancel:()=>{r()}},i.createElement(s.II,{value:t,validateStatus:l?"":"error",label:"名称",onChange:e=>{o(e),(e=>{const t=le()(e);c(!0),(""===t||n&&n.indexOf(t)>-1)&&c(!1)})(e)}}))},Hn=({show:e,title:t,parentPaths:n,siblingNames:o,confirm:a,cancel:r})=>{const[l,c]=(0,i.useState)(!0),[d,p]=(0,i.useState)("");return i.createElement(s.u_,{title:t||"新增..",visible:e,onOk:()=>{l&&(a(d),p(""))},onCancel:()=>{r(),p("")}},i.createElement(s.Form,{labelPosition:"left",labelAlign:"right",labelWidth:80},i.createElement(s.Form.Input,{disabled:!0,label:"所在目录",initValue:n}),i.createElement(s.Form.Input,{value:d,validateStatus:l?"":"error",label:"名称",onChange:e=>{p(e),(e=>{const t=le()(e);c(!0),(""===t||o&&o.indexOf(t)>-1)&&c(!1)})(e)}})))},Xn=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"M3 1h12.414L21 6.586V23H3V1Zm2 2v18h14V9h-6V3H5Zm10 .414V7h3.586L15 3.414Zm-3.793 8.793L9.414 14l1.793 1.793l-1.414 1.414L6.586 14l3.207-3.207l1.414 1.414Zm3-1.414L17.414 14l-3.207 3.207l-1.414-1.414L14.586 14l-1.793-1.793l1.414-1.414Z"})),Kn=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"M1 2.5h8.48l2 2.5H23v7h-2V7H10.52l-2-2.5H3V19h11v2H1V2.5ZM21 14v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2Z"})),_n=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1.2em",height:"1.2em",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"M3 1h12.414L21 6.586V12h-2V9h-6V3H5v18h7v2H3V1Zm12 2.414V7h3.586L15 3.414ZM20 14v4h4v2h-4v4h-2v-4h-4v-2h4v-4h2Z"})),ei=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"M12 2.586L17.914 8.5L16.5 9.914l-3.5-3.5V16h-2V6.414l-3.5 3.5L6.086 8.5L12 2.586ZM4.5 14v5h15v-5h2v7h-19v-7h2Z"})),ti=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"M6 1h9.414L21 6.586V19H6V1Zm2 2v14h11V9h-6V3H8Zm7 .414V7h3.586L15 3.414ZM4 5v16h11v2H2V5h2Z"})),ni=()=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},i.createElement("path",{fill:"currentColor",d:"m16.427 1.963l5.61 5.61L7.61 22.001H2v-5.61L16.427 1.962Zm0 2.828l-2.781 2.782l2.781 2.782l2.782-2.782l-2.782-2.782Zm-1.414 6.978l-2.782-2.782L4 17.22V20h2.782l8.231-8.232Zm7.212 10.232h-9.543v-2h9.543v2Z"}));var ii=n(30049),oi={};oi.styleTagTransform=w(),oi.setAttributes=b(),oi.insert=g().bind(null,"head"),oi.domAPI=m(),oi.insertStyleElement=v(),d()(ii.Z,oi),ii.Z&&ii.Z.locals&&ii.Z.locals,r()("ridge:file");const{Text:ai}=s.Typography;class ri extends i.Component{constructor(){super(),this.ref=i.createRef(),this.state={treeData:[],selectedNodeKey:null,dialgeCreateFileType:"",dialogCreateShow:!1,dialogCreateTitle:"",dialogRenameShow:!1,valueRename:""}}componentDidMount(){this.loadAndUpdateFileTree()}async loadAndUpdateFileTree(){const{appService:e}=_e.services;await e.updateAppFileTree();const t=await e.getAppFileTree();this.rebuildTreeIcons(t),this.setState({treeData:t})}rebuildTreeIcons(e){this.nodeMap={},Le(e,(e=>{this.nodeMap[e.id]=e,e.mimeType&&("application/font-woff"===e.mimeType?e.icon=i.createElement(Zn.Z,{style:{color:"var(--semi-color-text-2)"}}):e.mimeType.indexOf("audio")>-1?e.icon=i.createElement(Vn.Z,{style:{color:"var(--semi-color-text-2)"}}):e.mimeType.indexOf("image")>-1?e.icon=i.createElement(Un.Z,{style:{color:"var(--semi-color-text-2)"}}):e.icon=i.createElement(Bn.Z,{style:{color:"var(--semi-color-text-2)"}})),"directory"===e.type&&(e.icon=i.createElement(Jn.Z,{style:{color:"var(--semi-color-text-2)"}}))}))}getCurrentSiblingNames(){const{selectedNodeKey:e,treeData:t}=this.state;let n=[];if(e){const i=this.nodeMap[e];n=-1===i.parent?t:i.parentNode.children}else n=t;return n.map((e=>e.label))}getCurrentPath(){const{selectedNodeKey:e}=this.state;return e?this.nodeMap[e].path:"/"}getCurrentParentId(){const{selectedNodeKey:e}=this.state;if(e){const t=this.nodeMap[e];return"directory"===t.type?t.key:t.parent}return-1}showCreateDialog=e=>{this.setState({dialgeCreateFileType:e,dialogCreateShow:!0,dialogCreateTitle:{js:"创建程序文件",page:"创建页面",folder:"创建目录"}[e]})};onCreateConfirm=async e=>{const{dialgeCreateFileType:t}=this.state,{appService:n}=_e.services;try{"page"===t?await n.createComposite(this.getCurrentParentId(),e):"folder"===t?await n.createDirectory(this.getCurrentParentId(),e):"js"===t&&n.createFile(this.getCurrentParentId(),e,Ce("","text/javascript")),this.setState({dialogCreateShow:!1}),this.loadAndUpdateFileTree(),s.FN.success("已经成功创建 "+e)}catch(e){s.FN.success("创建文件失败 "+e)}};onFileUpload=async(e,t)=>{const{appService:n}=_e.services,i=[];for(const t of e)try{await n.createFile(this.getCurrentParentId(),t.name,t)}catch(e){i.push(t)}await this.loadAndUpdateFileTree(),s.FN.success("文件上传完成"),i.length&&s.FN.warning({content:"文件添加错误：存在相同名称文件",duration:3})};onRenameConfirm=async()=>{const{appService:e}=_e.services,{selectedNodeKey:t,valueRename:n}=this.state;await e.rename(t,n)&&(await this.loadAndUpdateFileTree(),this.setState({dialogRenameShow:!1}))};onRemoveClicked=async e=>{s.u_.confirm({zIndex:10001,title:"确认删除",content:"删除后文件无法找回，推荐您可先通过导出进行备份",onOk:async()=>{const{appService:t}=_e.services;await t.trash(e.key),this.setState({selectedNodeKey:null}),this.loadAndUpdateFileTree(),s.FN.success("已经成功删除 "+e.label)}})};copy=async e=>{const{appService:t}=_e.services;await t.copy(e.key),s.FN.success("文件复制完成")};onOpenClicked=e=>{_e.openFile(e.key)};onRenameClicked=e=>{this.setState({selectedNodeKey:e.key,dialogRenameShow:!0,valueRename:e.label})};move=async(e,t,n)=>{let i=-1;i=!1===n&&"directory"===e.type?e.key:e.parent;const{appService:o}=ridge;await o.move(t.key,i)||s.FN.warning({content:"目录移动错误：存在同名的文件",duration:3})};renderFullLabel=(e,t)=>{const{currentOpenId:n}=this.state,o=[];return"page"===t.type&&o.push(i.createElement(s.Lt.Item,{key:"open",icon:i.createElement(gt.Z,null),onClick:()=>{this.onOpenClicked(t)}},"打开")),o.push(i.createElement(s.Lt.Item,{key:"copy",icon:i.createElement(ti,null),onClick:()=>{this.onCopyClicked(t)}},"复制")),o.push(i.createElement(s.Lt.Item,{key:"export",icon:i.createElement(qn.Z,null),onClick:()=>{this.onExportClicked(t)}},"导出")),o.push(i.createElement(s.Lt.Item,{key:"rename",icon:i.createElement(ni,null),onClick:()=>{this.onRenameClicked(t)}},"重命名")),o.push(i.createElement(s.Lt.Divider,{key:"div"})),o.push(i.createElement(s.Lt.Item,{key:"delete",type:"danger",icon:i.createElement($n.Z,null),onClick:()=>{this.onRemoveClicked(t)}},"删除")),i.createElement("div",{className:"tree-label"+(n===t.key?" opened":"")},i.createElement(ai,{ellipsis:{showTooltip:!0},style:{width:"calc(100% - 48px)"},className:"label-content"},e),i.createElement(s.Lt,{className:"app-files-dropdown",trigger:"click",clickToHide:!0,render:i.createElement(s.Lt.Menu,null,o)},i.createElement(s.zx,{className:"more-button",size:"small",theme:"borderless",type:"tertiary",icon:i.createElement(Wn.Z,{rotate:90})})))};async exportApp(){if(this.state.exportToastId)return;const e=s.FN.info({content:"正在导出应用，请稍侯...",duration:0,onClose:()=>{this.setState({exportToastId:null})}});this.setState({exportToastId:e}),await appService.exportAppArchive(),s.FN.close(e),this.setState({exportToastId:null})}renderAppDropDown(){return i.createElement(s.Lt,{trigger:"click",render:i.createElement(s.Lt.Menu,null,i.createElement(s.Lt.Item,{icon:i.createElement(qn.Z,null),onClick:()=>{this.exportApp()}},"导出应用"),i.createElement(s.Lt.Item,{icon:i.createElement(Yn.Z,null)},i.createElement(s.gq,{action:"none",showUploadList:!1,uploadTrigger:"custom",onFileChange:e=>{s.u_.confirm({zIndex:10001,title:"确认导入应用",content:"导入应用会首先覆盖现有应用，如果有需要的工作，建议您首先导出备份。 是否继续?",onOk:()=>{ridge.backUpService.importAppArchive(e[0]).then((e=>{s.FN.info("成功导入应用，共"+e.length+"个文件")}))}})},accept:".zip"},"导入应用")),i.createElement(s.Lt.Item,{disabled:!0},"Menu Item 3"))},i.createElement(s.zx,{size:"small",theme:"borderless",type:"tertiary",icon:i.createElement(Gn.Z,null)}))}RenderCreateDropDown=()=>{const{showCreateDialog:e}=this;return i.createElement(s.Lt,{trigger:"click",closeOnEsc:!0,clickToHide:!0,keepDOM:!0,position:"bottomLeft",render:i.createElement(s.Lt.Menu,{className:"app-files-dropdown"},i.createElement(s.Lt.Item,{icon:i.createElement(_n,null),onClick:()=>e("page")},"创建页面"),i.createElement(s.Lt.Item,{icon:i.createElement(Kn,null),onClick:()=>e("folder")},"创建目录"),i.createElement(s.Lt.Item,{icon:i.createElement(Xn,null),onClick:()=>e("js")},"创建程序文件"),i.createElement(s.Lt.Item,{icon:i.createElement(ei,null)},i.createElement(s.gq,{action:"none",multiple:!0,showUploadList:!1,uploadTrigger:"custom",onFileChange:e=>{this.onFileUpload(e)},accept:"image/*,video/*,audio/*,.woff,.json,.css,.js"},"上传文件")))},i.createElement(s.zx,{size:"small",theme:"borderless",type:"tertiary",icon:i.createElement(tt.Z,null)}))};render(){const{renderFullLabel:e,state:t,RenderCreateDropDown:n}=this,{treeData:o,dialogCreateShow:a,dialogCreateTitle:r,selectedNodeKey:l,dialogRenameShow:c,valueRename:d}=t;return i.createElement(i.Fragment,null,i.createElement("div",{className:"file-actions"},i.createElement(n,null)),i.createElement(Hn,{show:a,title:r,parentPaths:this.getCurrentPath(),siblingNames:this.getCurrentSiblingNames(),confirm:e=>{this.onCreateConfirm(e)},cancel:()=>{this.setState({dialogCreateShow:!1})}}),i.createElement(Qn,{show:c,value:d,siblingNames:this.getCurrentSiblingNames(),change:e=>{this.setState({valueRename:e})},confirm:()=>{this.onRenameConfirm()},cancel:()=>{this.setState({dialogRenameShow:!1})}}),o&&i.createElement(s.mp,{className:"file-tree",draggable:!0,renderLabel:e,value:l,treeData:o,onDrop:({node:e,dragNode:t,dropPosition:n,dropToGap:i})=>{this.move(e,t,i)},onDoubleClick:(e,t)=>{this.onOpenClicked(t)},onChange:e=>{this.setState({selectedNodeKey:e})}}),!o&&i.createElement("div",{className:"tree-loading"},i.createElement(s.yC,{size:"middle"})),this.renderAppDropDown())}}const si=ri;class li extends i.Component{render(){return i.createElement(T,this.props,i.createElement(si,null))}}const ci=li;var di=n(71617),pi=n(92530),mi=n(13571);const hi=({value:e,title:t,type:n,visible:o,onChange:a,onClose:r})=>{const l=(0,i.useRef)(null);(0,i.useEffect)((()=>{if(o){let t=null;"text/css"===n&&(t=(0,mi.iv)()),"text/javascript"===n&&(t=(0,pi.eJ)()),l.current.editorComposite=new dt.tk({doc:e,extensions:[pt.Xy,dt.$f.of([di.oc]),t,(0,dt.jH)({position:"absolute"})],parent:l.current})}return()=>{l.current.editorComposite&&l.current.editorComposite.destroy()}}),[o,e]);const c=e=>{const t=l.current.editorComposite.state.doc.toString();a(t,e)},d=i.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},i.createElement(s.zx,{style:{marginRight:8},onClick:r},"关闭"),i.createElement(s.zx,{style:{marginRight:8},theme:"solid",onClick:()=>c(!1)},"保存"),i.createElement(s.zx,{theme:"solid",onClick:()=>(c(!0),void(r&&r()))},"保存并关闭"));return i.createElement(s.Uu,{closeOnEsc:!1,size:"large",mask:!1,maskClosable:!1,title:t||"代码编辑",visible:o,footer:d,bodyStyle:{zIndex:1001,overflow:"hidden"},onOk:()=>{const e=l.current.editorComposite.state.doc.toString();a(e)},onCancel:r},i.createElement("div",{style:{border:"1px solid var(--semi-color-border)",overflow:"auto",height:"100%",width:"100%"},className:"code-editor-container",ref:l}))};var gi=n(30252),ui=n(86489),bi=n(74466),fi=n(49329),vi={};vi.styleTagTransform=w(),vi.setAttributes=b(),vi.insert=g().bind(null,"head"),vi.domAPI=m(),vi.insertStyleElement=v(),d()(fi.Z,vi),fi.Z&&fi.Z.locals&&fi.Z.locals;class yi extends i.Component{constructor(){super(),_e.services.menuBar=this,this.state={pageChanged:!1,zoom:1,containerMask:!0}}setZoom(e){this.setState({zoom:e})}zoomChange=e=>{_e.workspaceControl.setZoom(e),this.setZoom(e)};toggleContainerMask=()=>{};toggoleRunMode=()=>{_e.toggleMode()};savePage=()=>{_e.saveCurrentPage()};render(){const{zoomChange:e,toggleContainerMask:t,toggoleRunMode:n,savePage:o,state:a,props:r}=this,{zoom:l,isPreview:c,containerMask:d,pageChanged:p}=a,{visible:m}=r;return i.createElement("div",{className:"menu-bar",style:{display:m?"":"none"}},i.createElement(s.T,{className:"bar-content"},i.createElement(s.Ct,{dot:p},i.createElement(s.zx,{type:"tertiary",theme:"borderless",icon:i.createElement(gi.Z,null),size:"small",onClick:o})),i.createElement("div",{style:{width:"180px"}},i.createElement(s.iR,{min:10,max:200,marks:{50:"",100:"",150:""},value:100*l,onChange:t=>e(t/100),showBoundary:!1,size:"small"})),i.createElement(s.zx,{theme:"borderless",type:"tertiary",size:"small",style:{width:"54px"}},Math.floor(100*l),"%"),i.createElement(s.iz,{layout:"vertical"}),i.createElement(s.zx,{icon:i.createElement(ui.Z,null),size:"small",type:d?"primary":"tertiary",theme:d?"solid":"borderless",onClick:t}),i.createElement(s.zx,{type:"tertiary",theme:"borderless",icon:i.createElement("i",{className:"bi bi-x-lg"}),onClick:()=>{_e.closeCurrentPage()}},"关闭"),i.createElement(s.zx,{type:"tertiary",theme:"borderless",icon:i.createElement(bi.Z,null),onClick:()=>{_e.toggleMode()}},"预览")))}}const wi=yi;var xi=n(91622);const{Text:Ei}=s.Typography,Ci=[{name:"Apple iPhone 15 Pro Max",width:430,height:932},{name:"Apple iPhone 15",width:393,height:852},{name:'Apple iPad 10.2"',width:810,height:1080}];class ki extends i.Component{constructor(){super(),_e.services.previewBar=this;const e=Ci.map((e=>({value:e.name,label:i.createElement(s.T,null,i.createElement(Ei,null,e.name),i.createElement(Ei,{type:"tertiary"},e.width,"-",e.height))})));this.state={vpName:"default",viewPortList:[...e,{value:"config",label:"设计宽高"}],width:0,height:0}}setZoom(e){this.setState({zoom:e})}zoomChange=e=>{_e.workspaceControl.setZoom(e),this.setZoom(e)};toggleContainerMask=()=>{};toggoleRunMode=()=>{_e.toggleMode(),this.setState({isPreview:!this.state.isPreview})};changeViewPort=(e,t)=>{this.setState({width:e,height:t}),_e.updatePreviewSize(e,t)};onSelectVpChange=e=>{if("config"===e)this.changeViewPort(_e.pageContent.style.width,_e.pageContent.style.height),this.setState({vpName:e,width:_e.pageContent.style.width,height:_e.pageContent.style.height});else{const t=Ci.filter((t=>t.name===e))[0];this.changeViewPort(t.width,t.height),this.setState({vpName:e,width:t.width,height:t.height})}};render(){const{toggoleRunMode:e,state:t,props:n,changeViewPort:o,onSelectVpChange:a}=this,{width:r,height:l,vpName:c,viewPortList:d}=t,{visible:p}=n;return i.createElement("div",{className:"menu-bar",style:{display:p?"":"none"}},i.createElement(s.T,{className:"bar-content"},i.createElement(s.Select,{size:"small",style:{width:160},optionList:d,value:c,onChange:a}),i.createElement(s.Rn,{size:"small",style:{width:80},value:r,onChange:e=>{o(e,l)}})," - ",i.createElement(s.Rn,{size:"small",style:{width:80},value:l,onChange:e=>{o(r,e)}}),i.createElement(s.zx,{type:"primary",theme:"solid",icon:i.createElement(xi.Z,null),onClick:e},"返回编辑")))}}const Si=ki;var zi=n(11670),Pi={};Pi.styleTagTransform=w(),Pi.setAttributes=b(),Pi.insert=g().bind(null,"head"),Pi.domAPI=m(),Pi.insertStyleElement=v(),d()(zi.Z,Pi),zi.Z&&zi.Z.locals&&zi.Z.locals,r()("ridge:editor");class Ni extends i.Component{constructor(e){super(e),this.workspaceRef=i.createRef(),this.viewPortContainerRef=i.createRef(),this.state={editorLoading:!0,componentPanelVisible:!0,propPanelVisible:!1,outlinePanelVisible:!1,appFilePanelVisible:!0,editMenuBarVisible:!1,previewMenuBarVisible:!1,panelPosition:sn,imagePreviewSrc:null,imagePreviewVisible:!1,codeEditTitle:"",codeEditText:"",codeEditVisible:!1,codeEditType:""},window.screen.width<=1366&&(this.state.panelPosition=ln)}componentDidMount(){_e.editorDidMount(this,this.workspaceRef.current,this.viewPortContainerRef.current)}setEditorLoaded(){this.setState({editorLoading:!1})}openCodeEditor(e){this.currentEditFile=e,this.setState({codeEditTitle:e.name,codeEditText:e.textContent,codeEditVisible:!0,codeEditType:e.mimeType})}completeCodeEdit(e){_e.onCodeEditComplete(this.currentEditFile.id,e)}openImage(e){this.setState({imagePreviewSrc:e,imagePreviewVisible:!0})}togglePageEdit(){this.setState({componentPanelVisible:!0,appFilePanelVisible:!0,propPanelVisible:!0,editMenuBarVisible:!0,previewMenuBarVisible:!1,outlinePanelVisible:!0})}togglePagePreview(){this.setState({componentPanelVisible:!1,appFilePanelVisible:!1,propPanelVisible:!1,editMenuBarVisible:!1,previewMenuBarVisible:!0,outlinePanelVisible:!1})}togglePageClose(){this.setState({componentPanelVisible:!0,appFilePanelVisible:!0,propPanelVisible:!1,editMenuBarVisible:!1,previewMenuBarVisible:!1,outlinePanelVisible:!1})}render(){const{state:e,workspaceRef:t,viewPortContainerRef:n}=this,{editorLoading:o,componentPanelVisible:a,appFilePanelVisible:r,propPanelVisible:l,outlinePanelVisible:c,panelPosition:d,containerMask:p,editMenuBarVisible:m,previewMenuBarVisible:h,imagePreviewVisible:g,imagePreviewSrc:u,codeEditTitle:b,codeEditText:f,codeEditVisible:v,codeEditType:y}=e;return i.createElement(i.Fragment,null,i.createElement("div",{ref:t,className:"workspace "+(p?"show-container":"")},i.createElement("div",{className:"viewport-container",ref:n}),!o&&i.createElement(i.Fragment,null,i.createElement(wi,{visible:m}),i.createElement(Si,{visible:h}),i.createElement(Dn,{title:"组件",position:d.ADD,visible:a}),i.createElement(ci,{title:"应用资源",position:d.LEFT_BOTTOM,visible:r}),i.createElement(Nn,{title:"布局导航",position:d.DATA,visible:c}),i.createElement(bn,{position:d.PROP,visible:l}),i.createElement(s.eT,{src:u,visible:g,onVisibleChange:()=>{this.setState({imagePreviewVisible:!1})}}),i.createElement(hi,{title:b,value:f,visible:v,lang:y,onChange:(e,t)=>{this.completeCodeEdit(e,t)},type:y,onClose:()=>{this.setState({codeEditVisible:!1})}}))),o&&i.createElement("div",{className:"editor-loading"},i.createElement(s.yC,{tip:"编辑器已启动.. 正在加载应用资源"})))}}const Li=document.getElementById("root");Li&&(0,o.s)(Li).render(i.createElement(Ni,null))},64551:(e,t,n)=>{const i=n(84151),o=n(96292)("ridge:nedb");e.exports=class{constructor(e){this.filename=e,this.store=new i({filename:e,timestampData:!0,autoload:!0})}async compactDatafile(){await this.store.persistence.compactDatafile()}async insert(e){return o("insert",e),new Promise(((t,n)=>{this.store.insert(e,(function(e,i){e?n(e):t(i)}))}))}async update(e,t,n){return o("update",e,t),new Promise(((i,o)=>{let a=e;"string"==typeof e&&(a={_id:e}),this.store.update(a,t,n||{},(function(e,t){e?o(e):i(t)}))}))}async patch(e,t){return o("patch",e,t),"string"==typeof e?this.update({_id:e},{$set:t}):this.update(e,{$set:t})}async clean(){return o("clean"),this.filename,new Promise(((e,t)=>{this.store.remove({},{multi:!0},(function(n,i){n?t(n):e(i)}))}))}async remove(e){if(o("remove",e),"object"==typeof e){if(!Array.isArray(e))return this.doRemove(e);for(const t of e)await this.remove(t)}else if("string"==typeof e)return this.doRemove({_id:e})}async doRemove(e,t){return new Promise(((n,i)=>{this.store.remove(e,t||{multi:!0},(function(e,t){e?i(e):n(t)}))}))}async findOne(e){if("string"==typeof e)return new Promise(((t,n)=>{this.store.findOne({_id:e},(function(e,i){e?n(e):t(i)}))}));{const t=await this.find(e);return t.length>0?t[0]:null}}async find(e,{sort:t,projection:n,skip:i=0,limit:a=-1}={}){return o("db find",e,n),new Promise(((r,s)=>{let l=this.store.find(e);n&&(l=l.projection(n)),t&&(l=l.sort(t)),i&&(l=l.skip(i)),a>0&&(l=l.limit(a)),o("cursor exec",e,n),l.exec((function(e,t){o("cursor exec result ",e,t),e?s(e):(o("found",t),r(t))}))}))}async count(e){return o("count",e),new Promise(((t,n)=>{this.store.count(e,(function(e,i){e?n(e):t(i)}))}))}async exist(e){return o("exist",e),(await this.find(e,{limit:1})).length>0}async distinct(e,t){o("distinct",e,t);const n=await this.find(t);return Array.from(new Set(n.filter((t=>t[e])).map((t=>t[e]))))}}},57053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{basename:()=>h,camelCase:()=>a.a,dirname:()=>m,extname:()=>g,formateDate:()=>p,nanoid:()=>d,trim:()=>s.a});var i=n(72155),o=n(97429),a=n.n(o),r=n(55663),s=n.n(r),l=n(27693),c=n.n(l);const d=(0,i.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10),p=(e,t)=>{const n=e||(new Date).getTime();return c()(n).format(t||"YYYY-MM-DD HH:mm:ss")},m=e=>e.substring(0,e.lastIndexOf("/")),h=(e,t)=>{const n=e.substring(e.lastIndexOf("/")+1);return t?n.substring(0,n.lastIndexOf(t)):n},g=e=>e.substring(e.lastIndexOf("."))},8731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,'.moveable-control {\n  width: 8px!important;\n  height: 8px!important;\n  border: 1px solid var(--semi-color-primary)!important;\n  box-sizing: border-box;\n  border-radius: 0!important;\n  background: #fff!important;\n  margin-top: -4px!important;\n  margin-left: -4px!important;\n  z-index: 10;\n}\n.moveable-control-box {\n  z-index: 100!important;\n}\n\n.moveable-line {\n  background: var(--semi-color-primary)!important;\n}\n\n.workspace-movable .moveable-control {\n  width: 18px!important;\n  height: 18px!important;\n  opacity: 0;\n}\n\n.workspace-movable .moveable-line {\n  opacity: 0;\n}\n\n.rCSwd26qe .moveable-line.moveable-vertical.moveable-bold {\n  width: 0.5px!important;\n  background-color: var(--semi-color-warning)!important;\n}\n.rCSwd26qe .moveable-line.moveable-horizontal.moveable-bold {\n  height: 1px!important;\n  background-color: var(--semi-color-warning)!important;\n}\n\n/*\n.rCSwd26qe {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.rCSwd26qe .moveable-control-box {\n    z-index: 0;\n}\n.rCSwd26qe .moveable-line, .rCSwd26qe .moveable-control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.rCSwd26qe .moveable-control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.rCSwd26qe .moveable-padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.rCSwd26qe .moveable-line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.rCSwd26qe .moveable-line.moveable-edge {\n    z-index: 1;\n    background: transparent;\n}\n.rCSwd26qe .moveable-line.moveable-dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.rCSwd26qe .moveable-line.moveable-dashed.moveable-horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.rCSwd26qe .moveable-line.moveable-dashed.moveable-vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.rCSwd26qe .moveable-line.moveable-vertical {\n    transform: translateX(-50%);\n}\n.rCSwd26qe .moveable-line.moveable-horizontal {\n    transform: translateY(-50%);\n}\n.rCSwd26qe .moveable-line.moveable-vertical.moveable-bold {\n    width: 2px;\n}\n.rCSwd26qe .moveable-line.moveable-horizontal.moveable-bold {\n    height: 2px;\n}\n\n.rCSwd26qe .moveable-control.moveable-origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n\n.rCSwd26qe .moveable-direction[data-rotation="0"],  .moveable-view-control-rotation0 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(0deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="15"],  .moveable-view-control-rotation15 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(15deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="30"],  .moveable-view-control-rotation30 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(30deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="45"],  .moveable-view-control-rotation45 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(45deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="60"],  .moveable-view-control-rotation60 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(60deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="75"],  .moveable-view-control-rotation75 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(75deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="90"],  .moveable-view-control-rotation90 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(90deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="105"],  .moveable-view-control-rotation105 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(105deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="120"],  .moveable-view-control-rotation120 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(120deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="135"],  .moveable-view-control-rotation135 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(135deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="150"],  .moveable-view-control-rotation150 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(150deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="165"],  .moveable-view-control-rotation165 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(165deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n.rCSwd26qe .moveable-group {\n    z-index: -1;\n}\n.rCSwd26qe .moveable-area {\n    position: absolute;\n}\n.rCSwd26qe .moveable-area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.rCSwd26qe .moveable-area.moveable-avoid, .rCSwd26qe .moveable-area.moveable-pass {\n    pointer-events: none;\n}\n.rCSwd26qe .moveable-area.moveable-avoid+.moveable-area-pieces {\n    display: block;\n}\n.rCSwd26qe .moveable-area-piece {\n    position: absolute;\n}\n\n\n.rCSwd26qe {\n    --bounds-color: #d66;\n}\n.rCSwd26qe .moveable-guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.rCSwd26qe .moveable-guideline.moveable-bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.rCSwd26qe .moveable-guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.rCSwd26qe .moveable-guideline-group .moveable-size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.rCSwd26qe .moveable-guideline-group.moveable-horizontal .moveable-size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.rCSwd26qe .moveable-guideline-group.moveable-vertical .moveable-size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.rCSwd26qe .moveable-guideline.moveable-gap {\n    background: #f55;\n}\n.rCSwd26qe .moveable-size-value.moveable-gap {\n    color: #f55;\n}\n\n.rCSwd26qe .moveable-edge.moveable-edgeDraggable.moveable-line {\n    cursor: move;\n}\n.rCSwd26qe .moveable-rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n\n*/',""]);const s=r},11670:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,"html,\nbody {\n  overflow: hidden;\n  overflow-y: hidden!important;\n  user-select: none;\n  background-color: var(--semi-color-bg-0) !important;\n  width: 100%;\n  height: 100%;\n}\n#root {\n  height: 100%;\n  width: 100%;\n}\n:focus-visible {\n  outline: none;\n}\n::-webkit-scrollbar,\n::-webkit-scrollbar-thumb {\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-clip: padding-box;\n  border: 2px solid transparent;\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb:hover {\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb:active {\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb {\n  box-shadow: inset 0 0 0 10px;\n}\n::-webkit-scrollbar-corner {\n  display: none;\n}\n.workspace {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: var(--semi-color-fill-1);\n}\n.workspace .viewport-container {\n  background-color: var(--semi-color-bg-0);\n}\n.workspace.show-container .ridge-container {\n  background-color: #97d5ff30;\n}\n.workspace.show-container .ridge-droppable {\n  background-color: #97d5ff30;\n}\n.workspace .ridge-element-edit:has(.ridge-element-edit:hover) {\n  outline: none;\n}\n.workspace .ridge-element-edit.selected:hover {\n  outline: none;\n}\n.workspace .ridge-element-edit:hover {\n  outline: 1px dashed var(--semi-color-secondary);\n  outline-offset: 2px;\n}\n.workspace .ridge-element-edit:hover:has(.drop-shadow) {\n  outline: none;\n  outline-offset: 2px;\n}\n.status-drag-over {\n  z-index: 0;\n  background-color: var(--semi-color-primary-light-default);\n  border: 2px dashed var(--semi-color-primary);\n}\nslot {\n  position: relative;\n}\n.pop-code-editor-container {\n  width: 420px;\n  margin: 5px 0;\n  height: 240px;\n  overflow: auto;\n  position: relative;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n}\n.tree-label {\n  display: flex;\n}\n.tree-label .label-content {\n  flex: 1;\n  height: 24px;\n}\n.tree-label .label-action {\n  display: none;\n}\n.tree-label:hover .label-action {\n  display: initial;\n}\n.tree-label:hover .hover-show {\n  visibility: initial;\n}\n.tree-label .hover-show {\n  visibility: hidden;\n}\n.editor-loading {\n  position: absolute;\n  z-index: 10001;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: var(--semi-color-bg-3);\n}\n.editor-loading .semi-spin {\n  width: 300px;\n}\n",""]);const s=r},18042:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,"/**sketch拾取*/\n.sketch-picker {\n  border-radius: 5px;\n  box-shadow: none!important;\n  padding: 0!important;\n}\n/*输入边距Pop*/\n.input-padding-pop {\n  background-color: var(--semi-color-bg-0);\n  height: 100px;\n  width: 280px;\n}\n/*输入边距*/\n.input-padding {\n  position: relative;\n  top: 30px;\n  left: 10px;\n  margin: 0 40px 15px 25px;\n  border: 1px solid #ece;\n  height: 40px;\n  width: 200px;\n}\n.input-padding.position-border .order-0 {\n  left: 50%;\n  margin-left: -35px;\n  top: -12px;\n}\n.input-padding.position-border .order-1 {\n  left: 100%;\n  margin-left: -25px;\n  top: 5px;\n}\n.input-padding.position-border .order-2 {\n  left: 50%;\n  margin-left: -35px;\n  top: 28px;\n}\n.input-padding.position-border .order-3 {\n  left: 0;\n  margin-left: -25px;\n  top: 5px;\n}\n.input-padding.position-corner .order-0 {\n  left: 0;\n  margin-left: -25px;\n  top: -15px;\n}\n.input-padding.position-corner .order-1 {\n  left: 100%;\n  margin-left: -25px;\n  top: -15px;\n}\n.input-padding.position-corner .order-2 {\n  left: 100%;\n  margin-left: -25px;\n  top: 28px;\n}\n.input-padding.position-corner .order-3 {\n  left: 0;\n  margin-left: -25px;\n  top: 28px;\n}\n.input-padding .input-padding-number {\n  position: absolute;\n  background-color: var(--semi-color-bg-0);\n  width: 60px;\n}\n.event-edit {\n  width: 100%;\n  border-radius: 10px;\n  border: 1px solid var(--semi-color-border);\n}\n.object-form {\n  padding: 0 3px;\n  height: 100%;\n  overflow-y: overlay;\n}\n.object-form .semi-form-horizontal .semi-form-field:last-child {\n  margin-right: 2px;\n}\n.object-form .semi-form-horizontal .semi-form-field {\n  padding-right: 2px;\n}\n.object-form .semi-table-wrapper table thead {\n  display: none;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row .btn-code {\n  visibility: hidden;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row .btn-code.semi-button-primary {\n  visibility: visible;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row:hover .btn-code {\n  visibility: visible;\n}\n.object-form .semi-table-wrapper table td.semi-table-row-cell {\n  padding: 4px 2px;\n}\n.object-form .semi-table-wrapper table td.semi-table-row-cell .semi-form-field {\n  padding: 0;\n}\n.object-form .semi-form .semi-form-field-label {\n  margin-bottom: 0;\n  margin-right: 0;\n  padding-top: 0px;\n  min-width: 44px;\n  line-height: 26px;\n  padding-bottom: 0px;\n  font-weight: normal;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .field-block {\n  padding: 4px 0;\n}\n.object-form .semi-form .with-code-expr {\n  display: flex;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.btn-code {\n  visibility: hidden;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.btn-code.semi-button-primary {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.is-open {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr:hover .semi-button-tertiary.btn-code {\n  visibility: initial;\n}\n.object-form .semi-form .semi-form-field-main > .semi-checkbox {\n  padding: 2px;\n}\n.object-form .semi-form .semi-divider_inner-text {\n  font-size: 14px;\n  font-weight: normal;\n  color: var(--semi-color-text-1);\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType {\n  padding-top: 0;\n  padding-bottom: 0;\n  gap: 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType .semi-checkbox {\n  padding: 2px 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType .semi-checkbox .semi-checkbox-addon {\n  font-weight: normal;\n}\n.object-form .semi-form .semi-form-field .semi-radio-addon-buttonRadio-small {\n  padding: 2px 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-pureCardType .semi-checkbox {\n  column-gap: 0;\n  align-items: center;\n  padding: 2px 5px;\n}\n.object-form .state-list-edit {\n  display: flex;\n}\n.object-form .state-list-edit .state-list {\n  flex: 1;\n}\n.object-form .state-list-edit .state-list .list-item {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n}\n.object-form .state-list-edit .state-list .list-item:hover {\n  background-color: var(--semi-color-fill-1);\n}\n.object-form .state-list-edit .state-list .list-item.is-current {\n  border: 1px solid var(--semi-color-info-light-active);\n  background-color: var(--semi-color-info-light-default);\n}\n.object-form .state-list-edit .state-list .list-item .state-name {\n  padding: 0 5px;\n}\n.object-form .background-edit {\n  display: flex;\n}\n.object-form .background-edit .color-list {\n  flex: 1;\n}\n.object-form .semi-input-number.digit2 {\n  width: 46px;\n}\n.object-form .semi-input-wrapper .semi-input {\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.object-form .semi-input-wrapper .semi-input-append {\n  padding: 0 5px;\n}\n.object-form .semi-input-textarea-wrapper .semi-input-textarea {\n  padding: 0;\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.object-form .semi-input-number-suffix-btns {\n  margin-left: 1px;\n}\n.object-form .picker-button {\n  font-size: 20px;\n  width: 21px;\n  cursor: pointer;\n}\n.pop-icon-container .icon-list {\n  width: 420px;\n  height: 330px;\n  overflow: auto;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n.pop-icon-container .icon-list i {\n  cursor: pointer;\n  color: var(--semi-color-tertiary-hover);\n  padding: 5px;\n  width: 40px;\n  height: 40px;\n  font-size: 24px;\n}\n.pop-icon-container .icon-list i:hover {\n  color: var(--semi-color-primary-hover);\n}\n.series-table-edit {\n  border: 1px solid var(--semi-color-border);\n  border-collapse: collapse;\n  font-size: 14px;\n  border-right: none;\n  border-bottom: none;\n}\n.series-table-edit th {\n  background-color: var(--semi-color-fill-1);\n}\n.series-table-edit th:nth-child(1),\n.series-table-edit td:nth-child(1),\n.series-table-edit th.column-plus {\n  background-color: var(--semi-color-fill-1);\n  width: 28px;\n  min-width: 28px;\n}\n.series-table-edit td.row-delete {\n  padding: 0 5px;\n  width: 28px;\n  min-width: 28px;\n  line-height: 14px;\n  color: var(--semi-color-danger);\n  border: none;\n  display: none;\n}\n.series-table-edit td.column-delete {\n  line-height: 14px;\n  cursor: pointer;\n  color: var(--semi-color-danger);\n}\n.series-table-edit tr:hover td.row-delete {\n  width: 28px;\n  border: none;\n  min-width: 28px;\n  cursor: pointer;\n  display: table-cell;\n}\n.series-table-edit td,\n.series-table-edit th {\n  border: 1px solid var(--semi-color-border);\n  padding: 0.1rem 0.5rem;\n  vertical-align: middle;\n  min-width: 60px;\n}\n.series-table-edit th.column-plus,\n.series-table-edit td.row-plus {\n  cursor: pointer;\n}\n.series-table-edit th.column-plus:hover,\n.series-table-edit td.row-plus:hover {\n  background-color: var(--semi-color-fill-0);\n}\n",""]);const s=r},5900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,".component-panel .package-icon {\n  width: 22px;\n  height: 22px;\n  font-size: 18px;\n  text-align: center;\n}\n.component-panel .package-icon img {\n  object-fit: contain;\n  width: 22px;\n  height: 22px;\n}\n.component-panel .semi-tabs-bar-left .semi-tabs-tab {\n  padding: 6px;\n}\n.component-panel .component-container {\n  margin: 5px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  width: 100%;\n  border-radius: 8px;\n  height: 70px;\n  background-color: var(--semi-color-tertiary-light-default);\n  cursor: pointer;\n}\n.component-panel .component-container:hover {\n  background-color: var(--semi-color-primary-light-hover);\n}\n.component-panel .component-container i {\n  width: 36px;\n  height: 36px;\n}\n.component-panel .component-container .image-icon {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n}\n.component-panel .component-container .image-icon img {\n  height: 36px;\n}\n.component-panel .component-container .component-icon {\n  width: 36px;\n  height: 36px;\n  -webkit-mask-size: 36px auto;\n  background: linear-gradient(145deg, #8cb8ff, #1c85ff);\n  background-size: cover;\n  background-repeat: no-repeat;\n}\n.component-panel .component-container .font-icon {\n  font-size: 28px;\n  padding-top: 6px;\n  height: 40px;\n  text-align: center;\n  color: var(--semi-color-secondary);\n}\n.component-add-panel .package-tab {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0 2px;\n}\n.component-add-panel .semi-tabs-bar-button .semi-tabs-tab {\n  padding: 8px 3px;\n}\n.component-add-panel .package-tab img {\n  width: 24px;\n  height: 24px;\n}\n",""]);const s=r},39299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a),s=n(91678),l=n.n(s),c=new URL(n(66801),n.b),d=r()(o()),p=l()(c);d.push([e.id,`.app-image-list {\n  display: grid;\n  grid-template-columns: repeat(6, 80px);\n  grid-template-rows: repeat(6, 80px);\n  grid-row-gap: 6px;\n  grid-column-gap: 6px;\n}\n.app-image-list .image-item .image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  background-image: url(${p});\n  background-color: #f2f2f2;\n  width: 80px;\n  height: 80px;\n}\n.app-image-list .image-item .image-wrapper img {\n  cursor: pointer;\n  width: 64px;\n  object-fit: contain;\n  height: 64px;\n}\n.app-image-list .image-item .image-wrapper .semi-typography {\n  display: none;\n  overflow: hidden;\n  height: 20px;\n}\n.app-image-list .image-item .image-title {\n  width: 96px;\n  height: 23px;\n  text-align: center;\n  overflow: hidden;\n}\n.app-image-list-icon {\n  display: grid;\n  grid-template-columns: repeat(4, 96px);\n  grid-template-rows: repeat(4, 119px);\n  grid-row-gap: 8px;\n  grid-column-gap: 8px;\n  width: 420px;\n  height: 400px;\n  overflow: auto;\n}\n.app-image-list-icon .image-item .image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  background-image: url(${p});\n  background-color: #f2f2f2;\n  width: 96px;\n  height: 96px;\n}\n.app-image-list-icon .image-item .image-wrapper img {\n  cursor: pointer;\n  width: 64px;\n  object-fit: contain;\n  height: 64px;\n}\n.app-image-list-icon .image-item .image-title {\n  width: 96px;\n  height: 23px;\n  text-align: center;\n  overflow: hidden;\n}\n`,""]);const m=d},30049:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,".file-actions {\n  display: flex;\n  position: absolute;\n  z-index: 10;\n  right: 40px;\n  top: 6px;\n}\n.file-actions .align-right {\n  gap: 5px;\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n}\n.tree-loading {\n  height: calc(100% - 26px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n.file-tree {\n  height: calc(100% - 26px);\n  overflow: auto;\n}\n.file-tree .icon-image {\n  width: 18px;\n  height: 18px;\n  margin-right: 8px;\n  object-fit: contain;\n}\n.file-tree .tree-label {\n  display: flex;\n  align-items: center;\n}\n.file-tree .tree-label.opened .label-content {\n  color: var(--semi-color-success);\n  font-weight: bold;\n}\n.file-tree .tree-label .label-content {\n  flex: 1;\n}\n.file-tree .tree-label .more-button {\n  visibility: hidden;\n  margin-right: 5px;\n}\n.file-tree .tree-label:hover .more-button {\n  visibility: inherit;\n}\n.app-files-dropdown svg {\n  width: 1.2em;\n  height: 1.2em;\n}\n",""]);const s=r},49329:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,".menu-bar {\n  position: absolute;\n  left: 5px;\n  right: 5px;\n  bottom: 5px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.menu-bar .bar-content {\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 8px;\n  border-radius: 8px;\n  z-index: 101;\n}\n.menu-bar .semi-slider-handle {\n  width: 16px;\n  height: 16px;\n  margin-top: 8px;\n}\n",""]);const s=r},44426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,".movable-panel {\n  position: absolute;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 4px;\n  border-radius: 5px;\n  z-index: 300;\n}\n.movable-panel .semi-spin {\n  width: 100%;\n  height: 100%;\n}\n.movable-panel .title-bar {\n  position: relative;\n  height: 1px;\n  z-index: 1;\n  height: 32px;\n}\n.movable-panel .title-bar .title-text {\n  position: absolute;\n  left: 33px;\n  top: 5px;\n}\n.movable-panel .title-bar .toggle-search {\n  z-index: 101;\n  background-color: var(--semi-color-bg-2);\n}\n.movable-panel .title-bar .toggle-search .semi-input-suffix {\n  cursor: pointer;\n}\n.movable-panel .title-bar .icon-handle {\n  position: absolute;\n  top: 7px;\n  left: 7px;\n  cursor: move;\n}\n.movable-panel .title-bar .icon-search {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .title-bar .icon-close {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .panel-content {\n  height: calc(100% - 32px);\n}\n.movable-panel .semi-tabs-top {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top.on-title .semi-tabs-bar {\n  position: absolute;\n  top: -30px;\n  left: 36px;\n  right: 10px;\n  z-index: 9;\n}\n.movable-panel .semi-tabs-top .semi-tabs-bar .semi-tabs-tab {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs-top .semi-tabs-bar .semi-tabs-tab.semi-tabs-tab-active {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs-top .semi-tabs-content {\n  height: calc(100% - 24px);\n}\n.movable-panel .semi-tabs-top .semi-tabs-content .semi-tabs-pane {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top .semi-tabs-content .semi-tabs-pane .semi-tabs-pane-motion-overlay {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top.on-title .semi-tabs-content {\n  height: 100%;\n}\n.movable-panel .semi-tabs-left {\n  height: 100%;\n}\n.movable-panel.open-search .semi-tabs.on-title .semi-tabs-bar {\n  display: none;\n}\n",""]);const s=r},87188:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,".outline-tree {\n  height: 100%;\n  overflow: auto;\n}\n.outline-tree img.item-icon {\n  width: 18px;\n  height: 18px;\n  margin-right: 6px;\n}\n.outline-tree .semi-tree-option-label:has(.is-hidden) {\n  opacity: 0.6;\n}\n.outline-tree .semi-tree-option-label:has(.is-locked) {\n  opacity: 0.6;\n}\n.outline-tree .tree-label.is-hidden {\n  opacity: 0.6;\n}\n.outline-tree .tree-label.is-locked {\n  opacity: 0.6;\n}\n",""]);const s=r},49601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a)()(o());r.push([e.id,'/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n',""]);const s=r},45047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(54933),o=n.n(i),a=n(93476),r=n.n(a),s=n(91678),l=n.n(s),c=new URL(n(49878),n.b),d=r()(o()),p=l()(c);d.push([e.id,`html, body {\n    user-select: none;\n    -webkit-tap-highlight-color: none;\n    width: 100%;\n    height: 100%;\n}\n\n:focus-visible {\n  outline: none;\n}\n\n\n\n.ridge-composite > .ridge-element {\n    position: absolute;\n    left: 0;\n    top: 0;\n}\n\n.ridge-is-hidden {\n    display: none;\n}\n\n.ridge-overlay {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n}\n\n.status-Loading {\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\n    background-size: 400% 100%;\n    animation: skeleton-loading 3s ease infinite;\n    animation-fill-mode: forwards;\n}\n\n.status-not-found {\n    background-color: rgba(253, 185, 165, .3);\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    color: rgba(142, 8, 5);\n\n    background-size: 30%;\n    background-repeat: no-repeat;\n    background-position: center;\n    background-image: url(${p});\n}\n\n@keyframes skeleton-loading {\n    0% {\n        background-position: 100% 50%\n    }\n\n    to {\n        background-position: 0 50%\n    }\n}`,""]);const m=d},66801:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDkzNzZFN0RDODhFMTFFOEExOUJFNkQ0MTNFM0Q2OTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDkzNzZFN0VDODhFMTFFOEExOUJFNkQ0MTNFM0Q2OTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEOTM3NkU3QkM4OEUxMUU4QTE5QkU2RDQxM0UzRDY5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEOTM3NkU3Q0M4OEUxMUU4QTE5QkU2RDQxM0UzRDY5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PktroGEAAAAoSURBVHjaYvz06RMDDPDy8sLZTAw4AOkSjP///4dzPn/+TAs7AAIMAG56COJosoI3AAAAAElFTkSuQmCC"},49878:e=>{"use strict";e.exports='data:image/svg+xml,%3Csvg xmlns="http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" width="14" height="14" viewBox="0 0 14 14"%3E%3Cpath fill="none" stroke="rgba%28142%2C 8%2C 5%2C 0.5%29" stroke-linecap="round" stroke-linejoin="round" d="m8.54 9.7l2-2l2.12-2.12a3 3 0 0 0 0-4.24h0a3 3 0 0 0-4.24 0L7 2.76L5.46 4.3M3.5 6.26L1.38 8.38a3 3 0 0 0 0 4.24h0a3 3 0 0 0 4.24 0l1-1M4.17 2.05l5.66 9.9"%2F%3E%3C%2Fsvg%3E'}},n={};function i(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=t,e=[],i.O=(t,n,o,a)=>{if(!n){var r=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],s=!0,l=0;l<n.length;l++)(!1&a||r>=a)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(s=!1,a<r&&(r=a));if(s){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="./",(()=>{i.b=document.baseURI||self.location.href;var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[r,s,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(o in s)i.o(s,o)&&(i.m[o]=s[o]);if(l)var d=l(i)}for(t&&t(n);c<r.length;c++)a=r[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},n=globalThis.webpackChunkridge_editor=globalThis.webpackChunkridge_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var o=i.O(void 0,[736],(()=>i(16294)));o=i.O(o)})();