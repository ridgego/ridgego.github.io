(()=>{var e,t={4797:(e,t,n)=>{"use strict";n(796);var i=n(7363),a=n.n(i),o=n(745),r=n(6292),s=n.n(r),l=n(1533),c=n.n(l);const p=SemiUI;var d=n(1892),m=n.n(d),h=n(5760),g=n.n(h),u=n(8311),b=n.n(u),f=n(8192),y=n.n(f),v=n(8060),w=n.n(v),E=n(4865),x=n.n(E),k=n(8731),S={};S.styleTagTransform=x(),S.setAttributes=y(),S.insert=b().bind(null,"head"),S.domAPI=g(),S.insertStyleElement=w(),m()(k.Z,S),k.Z&&k.Z.locals&&k.Z.locals;var C=n(6947);const P=e=>new C.ZP(document.body,Object.assign({dimensionViewable:!0,deleteButtonViewable:!1,container:document.body,snappable:!1,snapGap:!1,isDisplayInnerSnapDigit:!1,draggable:!0,resizable:!0,scalable:!1,rotatable:!1,warpable:!1,pinchable:!1,origin:!0,keepRatio:!1,edge:!1,throttleDrag:0,throttleResize:1,throttleScale:0,throttleRotate:0,clipTargetBounds:!0},e)),N=SemiIcons;var I=n(4426),L={};L.styleTagTransform=x(),L.setAttributes=y(),L.insert=b().bind(null,"head"),L.domAPI=g(),L.insertStyleElement=w(),m()(I.Z,L),I.Z&&I.Z.locals&&I.Z.locals;const{Text:O}=p.Typography,z=a().createContext("light");class T extends a().Component{constructor(){super(),this.ref=a().createRef(),this.state={state:"normal",errors:null,openSearch:!1,search:null,hasError:!1}}static getDerivedStateFromError(e){return{errors:e,hasError:!0}}componentDidMount(){this.enablePanelMoveResize()}enablePanelMoveResize(){const e=P({className:"workspace-movable",target:this.ref.current,dragTarget:this.ref.current.querySelector(".title-bar .icon-handle")});e.on("resize",(({target:e,width:t,height:n,delta:i,transform:a})=>{e.style.transform=a,i[0]&&(e.style.width=`${t}px`),i[1]&&(e.style.height=`${n}px`)})),e.on("drag",(e=>{e.target.style.transform=e.transform,Array.from(document.querySelectorAll(".movable-panel")).forEach((e=>{e.style.zIndex=1e3})),this.ref.current.style.zIndex=1001}))}render(){const{onClose:e,position:t,visible:n,title:i,padding:o="0",className:r="default-panel"}=this.props,{state:s,openSearch:l,search:d}=this.state,m={};if(Array.isArray(t)&&6===t.length){const[e,n,i,a,o,r]=t;e&&(m.left=e+"px"),n&&(m.top=n+"px"),i&&(m.right=i+"px"),a&&(m.bottom=a+"px"),o&&(m.width=o+"px"),r&&(m.height=r+"px")}n||(m.display="none");const h=["movable-panel",r];return l&&h.push("open-search"),c().createPortal(a().createElement("div",{ref:this.ref,className:h.join(" "),style:m,id:this.props.id},a().createElement("div",{className:"title-bar",style:{}},a().createElement(N.IconHandle,{className:"icon-handle"}),i&&a().createElement(O,{className:"title-text"},i),l&&a().createElement(p.Input,{placeholder:"输入查询条件",prefix:a().createElement(N.IconSearchStroked,null),suffix:a().createElement(N.IconClose,{onClick:()=>{this.setState({openSearch:!1,search:null})}}),className:"toggle-search",value:d,onChange:e=>{this.setState({search:e})}}),a().createElement(p.Button,{className:"icon-search",icon:a().createElement(N.IconSearchStroked,null),theme:"borderless",size:"small",type:"tertiary",onClick:()=>{this.setState({openSearch:!0,search:""})}})),a().createElement("div",{className:"panel-content",style:{}},this.state.hasError?a().createElement("div",null,"Something went wrong. ",JSON.stringify(this.state.errors)):a().createElement(z.Provider,{value:d},this.props.children))),document.body)}}var D=n(7124);const F=({value:e,options:t,onChange:n})=>a().createElement(p.Popover,{showArrow:!0,trigger:"click",content:a().createElement(a().Fragment,null,a().createElement(p.Button,{size:"small",onClick:()=>{n(null)}},"清除颜色"),a().createElement(D.xS,{color:e||"#fff",width:220,style:{boxShadow:"none"},triangle:"hide",onChange:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))},onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}}))},a().createElement(p.Button,{size:"small",style:{backgroundColor:e,height:"22px",width:"22px",margin:"0 3px",padding:0,border:"1px solid #ccc"}})),M=(0,p.withField)(F),j=(0,p.withField)((({value:e,onChange:t})=>{const[n="",i="solid",o="#ccc"]=(e||"").split(" ");return a().createElement(p.Space,null,a().createElement(p.InputNumber,{width:40,size:"small",value:parseInt(n)||0,onChange:e=>{t(`${e}px ${i} ${o}`)}}),a().createElement(p.Select,{size:"small",value:i,onChange:e=>{t(`${n} ${e} ${o}`)}},a().createElement(p.Select.Option,{value:"solid"},"实线"),a().createElement(p.Select.Option,{value:"dashed"},"点划线")),a().createElement(M,{value:o,onChange:e=>{t(`${n} ${i} ${e}`)}}))}));var A=n(4146),R=n(3240),B=n(6051),U=n.n(B),V=n(6651),W=n.n(V);const Z=s()("ridge:loader");class q{async mount(){}setOption(e){}updateProps(e){}layout(e){}invoke(e,t){}on(e,t){}destroy(){}}class J extends q{constructor(e,t={}){super(),this.JSXComponent=e,this.props=t,this.props.ref||(this.props.ref=React.createRef()),this.renderRef=this.props.ref}mount(e){this.el=e,this.root=ReactDOM.createRoot(e),this.root.render(this.getRenderInstance())}getRenderInstance(){return React.createElement(this.JSXComponent,this.props)}on(e,t){Object.assign(this.props,{[e]:t}),ReactDOM.render(React.createElement(this.JSXComponent,this.props),this.el)}invoke(e,t){return this.renderRef&&this.renderRef.current&&this.renderRef.current[e]&&"function"==typeof this.renderRef.current[e]?this.renderRef.current[e](...t||[]):(console.error("无法调用无状态组件的方法!"),null)}setOption(e){this.updateProps(e)}updateProps(e){this.props=e,this.renderRef&&this.renderRef.current&&"function"==typeof this.renderRef.current.updateProps?this.renderRef.current.updateProps(e):ReactDOM.render(this.getRenderInstance(),this.el)}layout(e){ReactDOM.render(React.createElement(this.JSXComponent,e),this.el)}destroy(){ReactDOM.unmountComponentAtNode(this.el),this.renderRef&&(this.renderRef=null)}}class $ extends q{constructor(e,t={}){super(),this.VannilaComponent=e,this.props=t}mount(e){this.el=e,this.getRenderInstance().mount(e)}getRenderInstance(){return this.instance||(this.instance=new this.VannilaComponent(this.props)),this.instance}on(e,t){this.instance.on(e,t)}invoke(e,t){if(this.getRenderInstance()[e])return this.getRenderInstance()[e].apply(this.getRenderInstance(),t)}hasMethod(e){return null!=this.getRenderInstance()[e]}setOption(e){this.updateProps(e)}updateProps(e){this.getRenderInstance().update(e)}layout(e){this.getRenderInstance().layout(e)}destroy(){this.instance&&(this.instance.destroy&&this.instance.destroy(),this.instance=null)}}var Y=n(2155),G=(n(7429),n(5663)),K=n.n(G);const H=(0,Y.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10),X=e=>{const t=e.substring(e.lastIndexOf("/")+1);return t.includes(".")?t.substring(0,t.lastIndexOf(".")):t};var _=n(7215),Q=n.n(_);const ee=s()("ridge:element");s()("error:element");class te{constructor({config:e,mode:t,pageManager:n,isCreate:i}){this.config=e,this.id=e.id,this.componentPath=e.path,this.isCreate=i,this.mode=t,this.isEdit="edit"===t,this.pageManager=n,this.pageStore=n.pageStore,this.ridge=n.ridge,this.systemProperties={__mode:this.mode,__pageManager:n,__elementWrapper:this},this.properties={},this.style={},this.scopeState={},this.classList=[]}isEdit(){return"edit"===this.mode}isRoot(){return null==this.config.parent}getConfig(){return this.config}clone(e){const t=this.cloneElement(e);return t.forEachChildren(((n,i,a,o)=>{const r=n.clone(e);r.config.parent=t.id,null!=o?t.config.props[a][o]=r.id:t.config.props[a]=r.id})),t}cloneElement(e){const t=new te({mode:this.mode,config:this.toJSON(),pageManager:e||this.pageManager}),n=H(8);return t.cloneFrom=t.id,t.id=n,t.config.id=n,delete t.config.parent,this.componentDefinition&&(t.componentDefinition=this.componentDefinition,t.preloaded=!0),t.pageManager.pushElement(t),t}async loadAndMount(e){await this.preload(),this.mount(e)}async preload(e){if(!this.preloaded){if(this.setStatus("Loading"),this.componentDefinition=await this.loadComponentDefinition(),e&&this.config.props.children)for(const t of this.config.props.children){const n=this.pageManager.getElement(t);await n.preload(e)}this.componentDefinition?(this.removeStatus("Loading"),this.preloaded=!0):this.setStatus("Error")}}async loadComponentDefinition(){if(this.componentPath){const e=await this.pageManager.ridge.loadComponent(this.componentPath);return e&&e.component?e:(ee("加载图元失败: 未获取组件",this.componentPath),this.setStatus("加载失败"),null)}return null}forEachChildren(e){if(null==this.componentDefinition)return;const t=this.componentDefinition.props.filter((e=>"children"===e.type));if(t.length)for(const n of t)if(this.config.props[n.name]&&this.config.props[n.name].length)for(let t=0;t<this.config.props[n.name].length;t++)this.config.props[n.name][t]&&e(this.pageManager.pageElements[this.config.props[n.name][t]],"children",n.name,t);const n=this.componentDefinition.props.filter((e=>"slot"===e.type));if(n.length)for(const t of n)this.config.props[t.name]&&e(this.pageManager.pageElements[this.config.props[t.name]],"slot",t.name)}initPropsAndEvents(){this.config.parent&&!this.parentWrapper&&(this.parentWrapper=this.pageManager.getElement(this.config.parent)),this.adjustSize=this.componentDefinition.adjustSize;for(const e of this.componentDefinition.props||[])if(e){if(this.isCreate&&null==this.config.props[e.name]&&null!=e.value&&(this.config.props[e.name]=e.value),!this.isEdit){if("value"===e.name&&(this.properties.input=e=>{this.emit("input",e)}),!0===e.input){const t="set"+e.name.substr(0,1).toUpperCase()+e.name.substr(1);this.properties[t]=e=>{this.emit(t,e)}}null!=this.config.props[e.name]&&(this.properties[e.name]=this.config.props[e.name])}if("children"===e.name)this.isContainer=!0,this.classList.push("ridge-container"),Array.isArray(this.config.props.children)&&(this.properties.children=this.config.props.children.map((e=>"string"==typeof e?this.pageManager.getElement(e):e)));else if("slot"===e.type&&(this.isContainer=!0,this.classList.push("ridge-droppable"),this.config.props[e.name]&&"string"==typeof this.config.props[e.name])){const t=this.pageManager.getElement(this.config.props[e.name]);t&&(t.parentWrapper=this,this.properties[e.name]=t)}}for(const e of this.componentDefinition.events||[])this.properties[e.name]=(...t)=>{this.emit(e.name,t)}}getPropDefinationByName(e){return this.componentDefinition&&this.componentDefinition.props?this.componentDefinition.props.filter((t=>t.name===e))[0]:null}isMounted(){return null!=this.el}mount(e){e?(this.el=e,this.el.classList.add("ridge-element"),this.el.setAttribute("ridge-id",this.id),this.el.hasMethod=this.hasMethod.bind(this),this.el.invoke=this.invoke.bind(this),this.el.forceUpdate=this.forceUpdate.bind(this),this.el.getConfig=this.getConfig.bind(this),this.el.elementWrapper=this,this.el.wrapper=this,this.el.componentPath=this.componentPath,this.style=Object.assign({},this.config.style),this.componentDefinition?(this.initPropsAndEvents(),this.classList.forEach((e=>this.el.classList.add(e))),this.updateStyle(),this.updateAssetsProperties(),this.updateExpressionedStyle(),this.updateExpressionedProperties(),"edit"!==this.mode&&new Set([...Object.values(this.config.styleEx),...Object.values(this.config.propEx)]).forEach((e=>{this.pageStore.subscribe(e,(()=>{this.forceUpdate()}))})),this.renderer=this.createRenderer()):console.error("Element Not Loaded: ",this.id,this.componentPath)):console.error("Mout Without Element",this.id,this.componentPath)}unmount(){this.renderer&&(this.renderer.destroy(),this.renderer=null),this.el&&this.el.parentElement&&this.el.parentElement.removeChild(this.el),this.el=null}createRenderer(){try{if("vanilla"===this.componentDefinition.type){const e=new $(this.componentDefinition.component,this.getProperties());return e.mount(this.el),e}{const e=new J(this.componentDefinition.component,this.getProperties());return e.mount(this.el),e}}catch(e){console.error("组件初始化渲染异常",this.componentDefinition,e)}return null}getProperties(){return Object.assign({},this.config.props,this.systemProperties,this.properties)}updateSize(){if(this.adjustSize&&this.el){const e=this.el.querySelector(":not(.ridge-overlay)");this.setConfigStyle({width:e.getBoundingClientRect().width,height:e.getBoundingClientRect().height}),this.ridge.workspaceControl&&this.ridge.workspaceControl.updateMovable()}}updateExpressionedStyle(){if("edit"!==this.pageManager.mode)for(const e of Object.keys(this.config.styleEx||{}))null!=this.config.styleEx[e]&&""!==this.config.styleEx[e]&&(this.style[e]=this.pageStore.getStoreValue(this.config.styleEx[e],this.getScopeItems()))}setConfigStyle(e){Object.assign(this.config.style,e),this.updateStyle()}sizeChanged(){}getResetStyle(){return{left:"",top:"",flex:"",position:"",display:"",transform:""}}updateStyle(){const e=this.config.style;if(this.el.classList.remove("is-full"),this.el.classList.remove("is-locked"),this.el.classList.remove("is-hidden"),this.parentWrapper&&this.parentWrapper.hasMethod("updateChildStyle"))this.parentWrapper.invoke("updateChildStyle",[this]);else{const t=Object.assign({},this.getResetStyle());this.el&&(this.config.style.full?(t.width="100%",t.height="100%",this.el.classList.add("is-full")):(t.position="absolute",t.left=0,t.top=0,t.transform=`translate(${e.x}px, ${e.y}px)`,t.width=e.width?e.width+"px":"",t.height=e.height?e.height+"px":""),Object.assign(this.el.style,t))}this.invoke("updateStyle",[this]),this.updateAddonStyles(e,this.el)}updateAddonStyles(e,t){var n,i;!1===e.visible&&t.classList.add("is-hidden"),"edit"===this.mode&&!0===e.locked&&t.classList.add("is-locked"),e.zIndex&&(t.style.zIndex=e.zIndex),e.borderRadius&&(t.style.borderRadius=e.borderRadius),null!=e.opacity&&(t.style.opacity=e.opacity+"%"),e.padding&&(t.style.padding=e.padding),e.margin&&(t.style.margin=e.margin),e.borderStyle&&(t.style.borderStyle=e.borderStyle),e.borderColor&&(t.style.borderColor=e.borderColor),e.borderWidth&&(t.style.borderWidth=e.borderWidth),e.boxShadow&&(t.style.boxShadow=e.boxShadow),Object.assign(t.style,(n=e.background,i=this.ridge,this.mode,null==n?null:"color"===n.type||"code"===n.type?{background:n.value}:"image"===n.type?{background:`url(${i.appService.getDataUrl(n.value)})`,backgroundSize:"100%",backgroundRepeat:"no-repeat"}:void 0))}renderUpdate(e){if(e&&Object.assign(this.properties,e),this.renderer)try{ee("updateProps",this.id,this.properties),this.updateAssetsProperties(),this.renderer.updateProps(this.getProperties())}catch(e){ee("用属性渲染组件出错",e)}else ee("updateProps umounted",this.id)}setScopeItem(e){this.scopeItem=e}getScopeItems(){const e=this.parentWrapper?this.parentWrapper.getScopeItems():[];return null!=this.scopeItem?[...e,this.scopeItem]:e}forceUpdate(){this.el&&(this.updateExpressionedStyle(),this.updateStyle(),this.updateExpressionedProperties(),this.renderUpdate())}updateExpressionedProperties(){if("edit"!==this.pageManager.mode)for(const[e,t]of Object.entries(this.config.propEx)){if(null==t||""===t)continue;const n=this.pageStore.getStoreValue(t,this.getScopeItems()),i=this.getPropDefinationByName(e);if(i&&"string"==typeof i.connect){const t=JSON.parse(JSON.stringify(this.properties[e]));Q()(t,i.connect,n),this.properties[e]=t}else this.properties[e]=n}}updateAssetsProperties(){const e=this.componentDefinition.props.filter((e=>"image"===e.type||"audio"===e.type));for(const t of e)this.config.props[t.name]&&("edit"===this.pageManager.mode||"preview"===this.pageManager.mode?this.properties[t.name]=this.ridge.appService.getDataUrl(this.config.props[t.name]):"hosted"===this.pageManager.mode&&(this.properties[t.name]="/apps/"+this.pageManager.app+this.config.props[t.name]))}removeChild(e){if(this.renderer){const t=this.renderer.invoke("removeChild",[e]);Object.assign(this.config.props,t)}delete e.config.parent,delete e.parentWrapper}invoke(e,t){if(this.renderer)return this.renderer.invoke(e,t)}hasMethod(e){return this.renderer.hasMethod(e)}async emit(e,t){if("edit"!==this.mode)if(ee("Event:",e,t),"input"!==e||this.config.events[e]){if(this.config.events[e])for(const n of this.config.events[e])if(n.method){const[e,i]=n.method.split(".");this.pageStore.doStoreAction(e,i,[...t,n.payload,...this.getScopeItems()])}}else this.config.propEx.value&&this.pageStore.dispatchStateChange(this.config.propEx.value,t)}attachElEvent(e,t){e[t]=e=>{try{this.emit(t,this.componentConfig),e.stopPropagation()}catch(e){console.error("事件处理异常",e)}return!1}}setStatus(e,t){this.status=e,this.addMaskLayer({el:t||this.el,name:e,className:"status-"+e})}removeStatus(e,t){this.status===e&&(this.status=null,this.removeMaskLayer(e,t||this.el))}removeMaskLayer(e,t){t&&t.querySelector('[name="'+e+'"]')&&t.removeChild(t.querySelector('[name="'+e+'"]'))}addMaskLayer({el:e,name:t,zIndex:n,className:i,text:a,content:o}){if(!e)return;if(e.querySelector('[name="'+t+'"]'))return;const r=document.createElement("div");r.setAttribute("name",t),r.classList.add("ridge-overlay"),r.style.position="absolute",r.style.left=0,r.style.right=0,r.style.top=0,r.style.bottom=0,i&&r.classList.add(i),n&&(r.style.zIndex=n),r.innerHTML=o||a||"",e.insertBefore(r,e.firstChild)}setPropsConfig(e,t){for(const e of Object.keys(t)){const[n,i]=e.split(".");"props"===n&&(Object.assign(this.config.props,{[i]:t[e]}),Object.assign(this.properties,{[i]:t[e]})),"style"===n&&Object.assign(this.config.style,{[i]:t[e]}),"propsEx"===n&&(null==t[e]?delete this.config.propEx[i]:Object.assign(this.config.propEx,{[i]:t[e]})),"styleEx"===n&&(null==t[e]?delete this.config.styleEx[i]:Object.assign(this.config.styleEx,{[i]:t[e]})),"title"===e&&(this.config.title=t[e])}this.updateStyle(),this.renderUpdate()}setConfigLocked(e){this.config.style.locked=e,this.style.locked=e,e?this.el.classList.add("is-locked"):this.el.classList.remove("is-locked")}setConfigVisible(e){this.config.style.visible=e,this.el.style.visibility=e?"visible":"hidden"}setEventsConfig(e,t){Object.assign(this.config.events,e.event)}getStyle(){return this.config.style}getChildrenIds(){return this.config.props.children||[]}getSlotChildren(){return this.slotProps?this.slotProps.map((e=>({name:e,element:this.config.props[e]}))):[]}getConfigurableProps(){return[...this.componentDefinition.props,...this.parentWrapper?.componentDefinition?.childProps||[]]}toJSON(){return JSON.parse(JSON.stringify(this.config))}}const ne=te;var ie=n(5945),ae=n(6427);class oe{constructor(e){this.pageElementManager=e,this.ridge=e.ridge,this.ridge.pinia=(0,ie.WB)(),this.storeObjects={},this.stores={},this.storeTrees={},this.watcherCallbacks={}}getStoreValue(e,t){const[n,...i]=e.split(".");if(this.stores[n]){const e=this.stores[n][i[0]];return"function"==typeof e?e.apply(null,t):this.getByPath(this.stores[n],i)}}getByPath(e,t){let n=e;for(let e=0;e<t.length&&null!=n;e++)n=n[t[e]];return n}dispatchStateChange(e,t){const[n,...i]=e.split(".");this.stores[n]||globalThis[n]&&globalThis[n].state&&this.registerPageStore(n,globalThis[n]),this.stores[n]&&this.stores[n].$patch({[i.join(".")]:t})}subscribe(e,t){const[n,i]=e.split(".");this.watcherCallbacks[n]&&this.watcherCallbacks[n][i]&&this.watcherCallbacks[n][i].push(t)}doStoreAction(e,t,n){this.stores[e]&&this.stores[e][t]&&this.stores[e][t](...n)}async updateStore(){const{pageConfig:e}=this.pageElementManager,{properties:t,id:n}=e,i=document.querySelectorAll("script.page-"+n);for(const e of i)document.head.removeChild(e);if(this.stores={},t.jsFiles&&t.jsFiles.length)for(const e of t.jsFiles){const t=X(e);if("hosted"!==this.pageElementManager.mode){const i=this.ridge.appService.filterFiles((t=>t.path===e))[0];if(i){const e=document.createElement("script");e.classList.add("page-"+n);let a=i.textContent;a.startsWith("export default")&&(a="window."+t+"= "+a.substring(14)),e.textContent=a,document.head.append(e),globalThis[t]&&globalThis[t].state&&this.registerPageStore(t,globalThis[t])}}else{const i=document.createElement("script");i.setAttribute("type","module"),i.setAttribute("async",!0),i.classList.add("page-"+n),document.head.append(i),await new Promise(((n,a)=>{const o="resolve"+H(5);window[o]=e=>{e.default&&this.registerPageStore(t,e.default),window[t]&&window[t].state&&window[t].actions&&this.registerPageStore(t,window[t]),delete window[o],n()},i.textContent=`import * as Module from 'https://ridgego.github.io/apps/${this.pageElementManager.app}${e}'; window['${o}'](Module);`}))}}}registerPageStore(e,t){this.storeObjects[e]=t;const n=(0,ie.Q_)(e,t);this.stores[e]=n(this.ridge.pinia);const i=(0,ie.Jk)(this.stores[e]);this.storeTrees[e]=this.parseStoreTree(e,t),this.watcherCallbacks[e]={};const a=this.storeTrees[e].states;this.stores[e].$subscribe(((e,t)=>{console.log("Store Mutation",e.type,e.payload,e.storeId)}));for(const t of a)(0,ae.YP)(i[t.key],(n=>{for(const n of this.watcherCallbacks[e][t.key])n()}),{deep:!0}),this.watcherCallbacks[e][t.key]=[]}getStoreTrees(){return this.storeTrees}parseStoreTree(e,t){const n={states:[],actions:[]},i=t.alias||{};if(t.state&&"function"==typeof t.state){const a=t.state();n.states=this.getChildrenFromPlainObject(a,e,i)}return t.getters&&"object"==typeof t.getters&&Object.keys(t.getters).forEach((t=>{n.states.push({label:i[t]||t,value:e+"."+t,key:t})})),t.actions&&"object"==typeof t.actions&&Object.keys(t.actions||{}).forEach((e=>{n.actions.push({label:i[e]||e,value:e,key:e})})),n}getChildrenFromPlainObject(e,t,n){const i=[];return Object.keys(e).forEach((a=>{const o=(t?t+".":"")+a,r={label:n[o]||n[a]||a,value:o,key:a};var s;(s=e[a])&&"object"==typeof s&&s.constructor===Object&&(r.children=this.getChildrenFromPlainObject(e[a],o,n)),i.push(r)})),i}}const re=class{constructor({pageConfig:e,ridge:t,mode:n,app:i}){this.id=e.id,this.pageConfig=e,this.ridge=t,this.mode=n,this.app=i,this.decorators={},this.mounted=[],this.classNames=[],this.pageStore=new oe(this),this.initialize()}setMode(e){this.mode=e}initialize(){this.id=this.pageConfig.id,this.pageElements={};for(const e of this.pageConfig.elements){const t=new ne({pageManager:this,mode:this.mode,config:e});this.pageElements[t.id]=t}}getPageProperties(){return this.pageConfig.properties}updateImportedStyle(){let e=document.querySelector("#ridgePageStyle");e||(e=document.createElement("style"),e.id="ridgePageStyle",document.head.appendChild(e)),e.textContent="",this.classNames=[];const{properties:t}=this.pageConfig;if(t.cssFiles&&t.cssFiles.length)for(const n of t.cssFiles){const t=this.ridge.appService.filterFiles((e=>e.path===n))[0];if(t){const n=t.textContent.match(/\/\*.+\*\/[^{]+{/g);e.textContent="\r\n"+t.textContent;for(const e of n){const t=e.match(/\/\*.+\*\//)[0].replace(/[/*]/g,""),n=e.match(/\n[^{]+/g)[0].trim().substring(1);this.classNames.push({className:n,label:t})}}}}async updateImportedJS(){await this.pageStore.updateStore()}getStoreTrees(){return this.pageStore.getStoreTrees()}updatePageConfig(e){Object.assign(this.pageConfig,e),this.updateImportedStyle(),this.updateRootElStyle(),this.updateImportedJS()}getElement(e){return this.pageElements[e]}getPageElements(){return this.pageElements}async mount(e){this.el=e,this.rootClassList=Array.from(this.el.classList),this.updateRootElStyle(),this.updateImportedStyle(),await this.updateImportedJS();const t=[];for(const n of Object.values(this.pageElements).filter((e=>e.isRoot()))){const i=document.createElement("div");e.appendChild(i),t.push(await n.loadAndMount(i))}this.onPageMounted&&this.onPageMounted(),await Promise.allSettled(t),this.onPageLoaded&&this.onPageLoaded()}updateRootElStyle(){this.pageConfig.properties.background?Object.assign(this.el.style,{background:this.pageConfig.properties.background}):this.el.style.background="",this.el.classList.value="",this.rootClassList.forEach((e=>{this.el.classList.add(e)})),this.pageConfig.properties.classNames&&this.pageConfig.properties.classNames.length&&this.pageConfig.properties.classNames.forEach((e=>{this.el.classList.add(e)})),"edit"===this.mode?(this.el.style.width=this.pageConfig.properties.width+"px",this.el.style.height=this.pageConfig.properties.height+"px"):(this.el.style.width="100%",this.el.style.height="100%")}forceUpdate(){for(const e of Object.values(this.pageElements))e.forceUpdate()}async unmount(){for(const e of Object.values(this.pageElements).filter((e=>e.isRoot())))e.unmount();"edit"===this.mode&&(this.el.style.width=0,this.el.style.height=0)}async preload(){const e=[];for(const t of this.pageElements)e.push(await t.preload());await Promise.allSettled(e)}createElement(e){const t={title:e.title,id:H(5),isNew:!0,path:e.componentPath,style:{position:"absolute",visible:!0,width:e.width??100,height:e.height??100},styleEx:{},props:{},propEx:{},events:{}},n=new ne({isCreate:!0,mode:this.mode,config:t,pageManager:this});return this.pageElements[n.id]=n,n}cloneElementWithChild(e){const t=e.clone();console.log("mounted",t,t.config.style);const n=document.createElement("div");return t.mount(n),this.pushElement(t),t}pushElement(e){this.pageElements[e.id]=e}removeElement(e){const t=this.pageElements[e];t&&(t.parentWrapper&&this.detachChildElement(t,!0),t.forEachChildren(((e,t,n)=>{this.removeElement(e.id)})),t.unmount(),delete this.pageElements[e])}detachChildElement(e,t){const n=e.parentWrapper,i=n.invoke("removeChild",[e,t]);Object.assign(n.config.props,i),delete e.config.parent,delete e.parentWrapper}attachToParent(e,t,n={}){if(!e.hasMethod("appendChild"))return!1;const i=e.invoke("appendChild",[t,n.x,n.y]);if(!1===i)return!1;Object.assign(e.config.props,i),t.config.parent=e.id,t.parentWrapper=e}putElementToRoot(e){const t=document.createElement("div");return this.el.appendChild(t),e.mount(t),e}getPageJSON(){this.pageConfig.elements=[];for(const e of Object.values(this.pageElements))this.pageConfig.elements.push(e.toJSON());return this.pageConfig}addDecorators(e,t){this.decorators[e]||(this.decorators[e]=[]),this.decorators[e].push(t)}};class se{constructor(e={}){this.VERSION="1.0.0",this.opts=e,this.loader=new class{constructor({baseUrl:e}){this.baseUrl=e,Z("RidgeLoader baseUrl: "+this.baseUrl),this.componentCache={},this.packageJSONCache={},this.packageNotInstalled=[],this.loadedFonts=[],window.fcExternalLoaded=[],this.debugPackageName=null,this.packageLoadingPromises={},window.top.ridgeConfig&&window.top.ridgeConfig.loaderExternalOptions&&Object.assign(this.externalOptions,window.top.ridgeConfig.loaderExternalOptions),this.scriptLoadingPromises={},this.eventCallbacks=[],this.scriptUrlLibName={},this.pelCacheByLibName={},this.componentLoading=new Map,this.getPackageJSON=W()(this.getPackageJSONOnce),this.loadComponent=W()(this.loadComponentOnce)}setExternalOptions(e){this.externalOptions=e}setAppName(e){e&&(this.appName=e)}setProjectId(e){e&&(this.projectId=e)}getServePath(e){return e&&this.projectId?this.baseUrl+"/"+this.appName+"/"+this.projectId:this.appName?this.baseUrl+"/"+this.appName:this.baseUrl}getComponentUrl({packageName:e,path:t}){return`${this.baseUrl}/${e}/${t}`}getPackageJSONUrl(e){return`${this.baseUrl}/${e}/package.json`}getComponentLibName({packageName:e,path:t}){return`/${e}/${t}`}async loadComponentOnce(e){let t,n;if("object"==typeof e)t=e.packageName,n=e.path;else{const i=e.split("/");i[0].startsWith("@")?(t=i.splice(0,2).join("/"),n=i.join("/")):(t=i.splice(0,1).join("/"),n=i.join("/"))}try{return await this.doLoadComponent({packageName:t,path:n})}catch(e){return Z("组件加载异常",e),null}}async doLoadComponent({packageName:e,path:t}){const n=await this.confirmPackageDependencies(e),i=await this.loadComponentScript({packageName:e,path:t});if(!i)throw new Error;return await this.prepareComponent(i,{packageName:e,path:t},n),i}async prepareComponent(e,{packageName:t,path:n},i){if(e.packageName=t,e.path=n,e.title=e.title||e.label,e.requires&&e.requires.length&&await this.loadExternals(e.requires),e.component){let t=e.component;"function"==typeof t&&"AsyncFunction"===t.constructor.name&&(t=(await t()).default)}else Z("组件 Component定义未加载到",e)}on(e,t){this.eventCallbacks.push({eventName:e,callback:t})}async loadComponentScript({packageName:e,path:t}){const n=`${this.baseUrl}/${e}/build/${t}.js`,i=`${e}/${t}`;return await this.loadScript(n),window[i]?window[i].default:null}getComponent(e){return this.componentCache[e]?this.componentCache[e]:null}async loadFont(e,t,n){if(t&&!(this.loadedFonts.indexOf(t)>-1)&&"default"!==t)try{const i=e?e+"/"+n:t;let a=this.getServePath()+"/npm_packages/"+(e?e+"/"+n:t);e||n||-1!==t.indexOf(".woff")||(await this.confirmPackageDependencies("@gw/web-font-assets"),this.packageJSONCache["@gw/web-font-assets"]?this.packageJSONCache["@gw/web-font-assets"].fonts[t]&&(a=this.getServePath()+"/npm_packages/@gw/web-font-assets/"+this.packageJSONCache["@gw/web-font-assets"].fonts[t].url):console.error("加载字体地址未找到",t));const o=new FontFace(i,`url(${a})`);await o.load(),document.fonts.add(o),this.loadedFonts.push(t)}catch(n){console.error("加载字体异常",t,e,n)}}async loadCss(e){const t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,document.getElementsByTagName("HEAD")[0].appendChild(t)}async loadScript(e){this.scriptLoadingPromises[e]||(this.scriptLoadingPromises[e]=(async()=>{try{Z("加载库:"+e),await U()(e,{returnPromise:!0,before:function(e,t){t.crossOrigin=!0}})}catch(t){console.error("第三方库加载异常 ",`${e}`)}})()),await this.scriptLoadingPromises[e]}setPackageCache(e,t){this.packageJSONCache[e]=t}async getPackageJSONOnce(e){if(this.packageJSONCache[e])return this.packageJSONCache[e];const t=this.getPackageJSONUrl(e);try{const n=await R.Z.get(t).json();return this.prefixPackageJSON(n,this.baseUrl+"/"+e),this.setPackageCache(n),n}catch(t){console.error("NPM Package Not Loaded: ",e,t)}}prefixPackageJSON(e,t){e.icon?e.icon.startsWith("data:image"):e.icon=`${t}/icon.svg`;for(const n of e.components??[])n.icon&&!n.icon.startsWith("data:image")&&(n.icon=`${t}/${n.icon}`)}async confirmPackageDependencies(e){const t=await this.getPackageJSON(e);if(t&&t.externals)for(const n of t.externals)await this.loadScript(`${this.baseUrl}/${e}/${n}`);return t}async loadPackageAndComponents(e){const t=await this.getPackageJSON(e),n=[];if(t.components&&t.components.length){for(const i of t.components)n.push(await this.loadComponent(e+"/"+i));await Promise.allSettled(n)}return t.componentLoaded=n,t}async loadJSON(e){return await R.Z.get(e).json()}}({baseUrl:e.baseUrl}),this.pageElementManagers={},this.icons={}}static async init(){}static async load(e){const t=new se;window.ridge=t;const n=await t.loader.loadJSON(e);t.loadPage(null,n)}loadComponent(e){return this.loader.loadComponent(e)}async mountPage(e,t,n){const i=await R.Z.get(this.opts.baseUrl+`/apps/${t}/${n}`).json();this.loadPage(e,i,"hosted",t)}loadPage(e,t,n,i){const a=new re({pageConfig:JSON.parse(JSON.stringify(t)),ridge:this,mode:n,app:i});return a.mount(e||document.body),a}createPageManager(e,t){return new re({pageConfig:JSON.parse(JSON.stringify(e)),ridge:this,mode:t})}getPageElementManager(e){return this.pageElementManagers[e]}registerMethod(e,t){this[e]=t}setIcons(e,t,n){this.icons[e]={icons:t,options:n},n.css&&this.loader.loadCss("/plugins/"+e+"/"+n.css)}}const le=se;var ce=n(5047),pe={};pe.styleTagTransform=x(),pe.setAttributes=y(),pe.insert=b().bind(null,"head"),pe.domAPI=g(),pe.insertStyleElement=w(),m()(ce.Z,pe),ce.Z&&ce.Z.locals&&ce.Z.locals,window.Ridge=le;const de=le;var me=n(4551),he=n.n(me),ge=n(927),ue=n.n(ge),be=n(2858),fe=n.n(be);const ye=async e=>{const t=await fetch(e);return await t.blob()},ve=(e,t)=>new Blob([e],{type:t}),we=async e=>new Promise((t=>{const n=new FileReader;n.addEventListener("load",(()=>{t(n.result)}),!1),n.readAsDataURL(e)})),Ee=(e,t)=>{const n=document.createElement("a");e instanceof Blob?n.href=window.URL.createObjectURL(e):n.href=window.URL.createObjectURL(new Blob([e],{type:"text/plain"})),n.download=t||e.name||"下载",n.rel="noopener",setTimeout((function(){URL.revokeObjectURL(n.href)}),4e4),setTimeout((function(){!function(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}(n)}),0)};var xe=n(7053);const ke=(e,t)=>e.filter((e=>-1===e.parent)).map((n=>Ne(n,null,e,t))).sort(Se),Se=(e,t)=>"directory"===e.type&&"directory"===t.type?e.label>t.label?1:-1:"directory"===e.type?-1:"directory"===t.type||e.label>t.label?1:-1,Ce=async(e,t)=>{for(const n of e)await t(n),n.children&&await Ce(n.children,t)},Pe=(e,t)=>{const n=[];return e.forEach((e=>{t(e)&&n.push(e),e.children&&n.push(...Pe(e.children,t))})),n},Ne=(e,t,n,i)=>{const a={id:e.id,key:e.id,label:e.name,type:e.type,path:-1===e.parent?"/"+e.name:t.path+"/"+e.name,parent:e.parent,parentNode:t,raw:e,value:e.id};if(e.mimeType&&(a.mimeType=e.mimeType),"directory"===a.type){const t=n.filter((t=>t.parent===e.id));a.children=t.map((e=>Ne(e,a,n,i))).sort(Se)}return i&&i(a),a},Ie=new Map;Ie.set(".js","text/javascript"),Ie.set(".json","text/json"),Ie.set(".doc","application/msword"),Ie.set(".pdf","application/pdf"),Ie.set(".woff","application/font-woff"),Ie.set(".zip","application/zip"),Ie.set(".mid","audio/midi"),Ie.set(".mp4a","audio/mp4"),Ie.set(".m4a","audio/mp4a-latm"),Ie.set(".ogg","audio/ogg"),Ie.set(".aac","audio/x-aac"),Ie.set(".m3u","audio/x-mpegurl"),Ie.set(".wma","audio/x-ms-wma"),Ie.set(".gif","image/gif"),Ie.set(".jpeg","image/jpeg"),Ie.set(".jpg","image/jpeg"),Ie.set(".png","image/png"),Ie.set(".svg","image/svg+xml"),Ie.set(".ico","image/x-icon"),Ie.set(".css","text/css"),Ie.set(".csv","text/csv"),Ie.set(".html","text/html"),Ie.set(".txt","text/plain"),Ie.set(".avi","video/x-msvideo"),Ie.set(".gz","application/x-gzip"),Ie.set(".tgz","application/x-tar"),Ie.set(".tar","application/x-tar");const Le=e=>Ie.get(e)||"application/"+e;class Oe{constructor(e){this.appService=e,this.coll=e.collection,this.store=e.store,this.archiveColl=new(he())("ridge.backup.db")}async createHistory(e,t){const n=(0,xe.formateDate)(),i="ridge.backup-store-"+n+".db",a={created:n,name:t,pageCount:await e.count({type:"page"}),dbname:i};await this.archiveColl.insert(a);const o=new(he())(i);await this.dumpColl(e,o)}async dumpColl(e,t){await t.clean();const n=await e.find({});for(const e of n)await t.insert(e)}async listAllHistory(){return await this.archiveColl.find({})}async deleteHistory(e){const t=await this.archiveColl.findOne(e);if(t){const n=new(he())(t.dbname);await n.clean(),await this.archiveColl.remove(e)}}async recover(e,t){const n=await this.archiveColl.findOne(e);if(n){const e=new(he())(n.dbname);return await t.clean(),await this.dumpColl(e,t),!0}return!1}async exportFileArchive(e){const t=await this.coll.findOne({id:e}),n=await this.store.getItem(e);n&&("page"===t.type?Ee(new Blob([JSON.stringify(n)]),t.name+".json"):Ee(await ye(n),t.name))}async importFileArchive(e,t){const{appService:n}=this;if(t.name.endsWith(".json")){const i=JSON.parse(await t.text());i.elements?await n.createPage(e,(0,xe.basename)(t.name,".json"),i):await n.createFile(e,new File([JSON.stringify(i)],t.name,{type:"text/json"}))}else await n.createFile(e,t)}async exportAppArchive(){const e=new(fe()),t=await this.coll.find({}),n=ke(t);await this.zipFolder(e,n);const i=await e.generateAsync({type:"blob"});Ee(i,"应用归档"+(0,xe.formateDate)()+".zip")}async zipFolder(e,t){for(const n of t)if("directory"===n.type){const t=e.folder(n.label);await this.zipFolder(t,n.children)}else{const t=await this.store.getItem(n.key);"page"===n.type?e.file(n.label+".json",JSON.stringify(t)):e.file(n.label,await ye(t))}}async importAppArchive(e){const t=new(fe());await t.loadAsync(e);const{appService:n}=this;await this.coll.clean(),await this.store.clear();const i=[];t.forEach((async(e,t)=>{i.push({filePath:e,zipObject:t})}));for(const{filePath:e,zipObject:t}of i)if(t.dir)await n.ensureDir(e);else{const i=await n.ensureDir((0,xe.dirname)(e)),a=i?i.id:-1,o=(0,xe.basename)(t.name),r=(0,xe.extname)(t.name);if(e.endsWith(".json")){const e=JSON.parse(await t.async("text"));e.elements?await n.createPage(a,(0,xe.basename)(o,".json"),e):await n.createFile(a,o,new File([JSON.stringify(e)],o),"text/json")}else await n.createFile(a,o,new File([await t.async("blob")],o),Le(r))}return i}}const ze="workspaceReset",Te="fileTreeChange",De="pageLoaded",Fe="pageRenamed",Me="pageOpen",je="pagePropChange",Ae="pageOutlineChange",Re="elementSelected",Be="elementDragEnd",Ue="componentPropChange",Ve="componentEventChange",We="elementCreated",Ze={ADD:[5,5,0,0,280,450],LEFT_BOTTOM:[5,460,0,8,280,0],PROP:[0,5,5,0,320,540],DATA:[0,550,5,5,320,0]},qe={ADD:[5,5,0,0,280,360],LEFT_BOTTOM:[5,370,0,5,280,0],PROP:[0,5,5,0,280,400],DATA:[0,410,5,5,280,0]},{nanoid:Je}=n(7053);var $e=n(9507),Ye=n(3345),Ge=n.n(Ye);const Ke=s()("ridge:workspace"),He=new class{constructor(){const e=window.localStorage.getItem("ridge-env");null==e?(this.env={debug:!1,debugUrl:"http://localhost:5191",console:[]},window.localStorage.setItem("ridge-env",JSON.stringify(this.env))):this.env=JSON.parse(e),this.initEnv()}initEnv(){}getConfig(){return this.env}updateConfig(e){Object.assign(this.env,e),window.localStorage.setItem("ridge-env",JSON.stringify(this.env)),e.console&&(window.localStorage.debug=e.console.join(","))}},Xe=new class{constructor(){this.collection=new(he())("ridge.app.db"),this.store=ue().createInstance({name:"ridge-store"}),this.backUpService=new Oe(this),this.dataUrlByPath={},this.dataUrls={},this.fileTree=[],this.updateAppFileTree()}getFileTree(){return this.fileTree}filterFiles(e){return Pe(this.fileTree,e)}async getNewFileName(e,t,n){let i=0;for(;await this.collection.findOne({parent:e,name:0===i?t:t+n(i)});)i++;return 0===i?t:t+n(i)}async updateAppFileTree(){const e=(new Date).getTime();console.log("before");const t=await this.getFiles();return this.fileTree=ke(t),await Ce(this.fileTree,(async e=>{if(e.mimeType&&(e.mimeType.indexOf("image/")>-1||e.mimeType.indexOf("audio/")>-1)){if(null==this.dataUrlByPath[e.path]){const t=await this.store.getItem(e.key),n=await ye(t);this.dataUrlByPath[e.path]=window.URL.createObjectURL(n)}e.dataUrl=this.dataUrlByPath[e.path]}if(e.mimeType&&(e.mimeType.indexOf("text/css")>-1||e.mimeType.indexOf("text/javascript")>-1)){const t=await this.store.getItem(e.key);try{e.textContent=await(async e=>{const t=await ye(e);return await t.text()})(t)}catch(t){e.textContent=""}}})),console.log("dura",(new Date).getTime()-e),nt(Te,this.fileTree),this.fileTree}async createDirectory(e,t){const n={parent:e,id:Je(10),name:await this.getNewFileName(e,t||"新建文件夹",(e=>`(${e})`)),type:"directory"},i=await this.collection.insert(n);return await this.updateAppFileTree(),i}async createPage(e,t,n){const i=Je(10),a=n||{version:et.VERSION,states:[],reducers:[],properties:{type:"static",cssFiles:[],jsFiles:[],classNames:[],width:1366,height:768},elements:[]},o={id:i,name:await this.getNewFileName(e,t||"新建页面",(e=>`(${e})`)),type:"page",parent:e,mimeType:"text/json"};return await this.store.setItem(i,a),await this.collection.insert(o),await this.updateAppFileTree(),o}async createFile(e,t,n,i){const a=Je(10),o=await we(n);return await this.store.setItem(a,o),await this.collection.insert({id:a,mimeType:n.type||i,size:n.size,name:await this.getNewFileName(e,n.name||t,(e=>`(${e})`)),parent:e}),await this.updateAppFileTree(),!0}async updateFileContent(e,t,n){this.filterFiles((t=>t.id===e))[0].textContent=t,await this.store.setItem(e,(async(e,t)=>{const n=new Blob([e],{type:t});return await we(n)})(t,n))}async savePageContent(e,t){await this.store.setItem(e,t)}async rename(e,t){const n=await this.collection.findOne({id:e});return!!n&&(!await this.collection.findOne({parent:n.parent,name:t})&&(await this.collection.patch({id:e},{name:t}),await this.updateAppFileTree(!0),!0))}async move(e,t){const n=await this.collection.findOne({id:e});return n.parent!==t&&(!await this.collection.findOne({parent:t,name:n.name})&&(await this.collection.patch({id:e},{parent:t}),await this.updateAppFileTree(!0),!0))}async copy(e){const t=await this.collection.findOne({id:e});if(t){const n=Je(10),i={id:n,name:await this.getNewFileName(t.parent,t.name,(e=>`(${e})`)),type:t.type,parent:t.parent,mimeType:t.mimeType,copyFrom:e};await this.collection.insert(i);const a=await this.store.getItem(t.id);a&&await this.store.setItem(n,a),await this.updateAppFileTree(!0)}}async trash(e,t=!0){const n=await this.collection.findOne({id:e});if(n){"directory"!==n.type&&await this.store.removeItem(e);const i=await this.collection.find({parent:e});if(i.length)for(const e of i)await this.trash(e.id,!1);await this.collection.remove({id:e}),t&&await this.updateAppFileTree(!0)}}async getFiles(e){const t={};return e&&(t.name=new RegExp(e)),await this.collection.find(t)}async getFile(e){const t=await this.collection.findOne({id:e});if(t)return t.content=await this.store.getItem(e),t}async getFileByPath(e){const t=e.split("/");let n=-1,i=null;for(const e of t)if(e){if(i=await this.collection.findOne({parent:n,name:e}),null==i)return null;n=i.id}return i}async ensureDir(e){const t=e.split("/");let n=-1,i=null;for(const e of t)e&&(i=await this.collection.findOne({parent:n,name:e}),null==i&&(i=await this.createDirectory(n,e)),n=i.id);return i}async getRecentPage(){const e=await this.collection.find({parent:-1,type:"page"},{sort:{name:1}});return 0===e.length?this.createPage(-1):{...e[0],...await this.store.getItem(e[0].id)}}async getFilePath(e){if(e.parent&&-1!==e.parent){const t=await this.getFile(e.parent);return await this.getFilePath(t)+"/"+e.name}return e.name}async getByMimeType(e){const t=await this.collection.find({mimeType:new RegExp(e)});for(const e of t)"file"===e.type&&(e.src=await this.store.getItem(e.id));return t}async isParent(e,t){let n=await this.getFile(t);for(;-1!==n.parent;){if(n.parent===e)return!0;n=await this.getFile(n.parent)}return!1}async updateDataUrl(){const e=await this.getByMimeType("image");for(const t of e)this.dataUrls[t.id]=t.dataUrl}getDataUrl(e){return e.startsWith("http")?e:this.dataUrlByPath[e]}async exportAppArchive(){await this.backUpService.exportAppArchive(this.collection,this.store)}async exportPage(e){await this.backUpService.exportFileArchive(this.collection,e,this.store)}async importAppArchive(e){await this.backUpService.importAppArchive(e,this.collection,this.store)}async backUpAppArchive(e){await this.backUpService.createHistory(this.collection,e)}async recoverBackUpAppArchive(e){await this.backUpService.recover(e,this.collection),nt("appOpen")}async getAllBackups(){return await this.backUpService.listAllHistory()}async removeBackup(e){return await this.backUpService.deleteHistory(e)}async exportArchive(){this.backUpService.exportColl(this.collection)}async archive(){}},_e=new Oe(Xe),Qe=(He.getConfig(),new class{init({workspaceEl:e,viewPortEl:t}){this.workspaceEl=e,this.viewPortEl=t,this.zoom=.8,this.selectorDropableTarget=[".ridge-container",".ridge-droppable"],it(Re,(e=>{"outline"!==e.from||e.element.classList.contains("is-locked")||e.element.classList.contains("is-hidden")||e.element.classList.contains("is-full")||this.selectElements([e.element])})),it("elementUnSelect",(({element:e})=>{this.selectElements([])})),this.initKeyBind(),this.initComponentDrop(),this.viewPortEl.style.transformOrigin="top left"}enable(){this.initSelecto(),this.initMoveable(),this.setWorkSpaceMovable(),this.enabled=!0}disable(){this.enabled&&(this.selecto.destroy(),this.moveable.destroy(),this.workspaceMovable&&(this.workspaceMovable.destroy(),this.workspaceMovable=null),this.enabled=!1)}setPageManager(e){this.pageManager=e}updateMovable(){this.moveable.updateTarget()}fitToCenter(e,t){const n=window.innerWidth-620;let i=1;return e>n&&(i=n/e),this.viewPortEl.style.width=e+"px",this.viewPortEl.style.height=t+"px",this.workspaceX=290,this.workspaceY=5,this.viewPortEl.style.transform=`translate(${this.workspaceX}px, ${this.workspaceY}px) scale(${i})`,this.zoom=i,i}setZoom(e){this.zoom=e,this.moveable&&(this.moveable.target=[],this.moveable.updateTarget()),this.viewPortEl.style.transform=`translate(${this.workspaceX}px, ${this.workspaceY}px) scale(${this.zoom})`}setWorkSpaceMovable(){this.workspaceMovable=P({target:this.workspaceEl,className:"workspace-movable"}),this.workspaceMovable.on("dragStart",(e=>{Ke("viewPortEl dragStart"),e.inputEvent.ctrlKey?(this.workspaceMovable.dragWorkSpace=!0,this.moveable.target=[]):this.workspaceMovable.dragWorkSpace=!1})),this.workspaceMovable.on("drag",(e=>{Ke("viewPortEl drag"),e.inputEvent.ctrlKey&&this.workspaceMovable.dragWorkSpace&&(this.moveable.target=null,this.workspaceX+=e.delta[0],this.workspaceY+=e.delta[1],this.viewPortEl.style.transform=`translate(${this.workspaceX}px, ${this.workspaceY}px) scale(${this.zoom})`)}))}isElementMovable(e){return null!=this.moveable.target&&1===this.moveable.target.length&&this.moveable.target[0]==e}initMoveable(){const e=this;this.moveable=P({target:[],snappable:!0}),this.moveable.on("dragStart",(e=>{Ke("movable dragStart",e.target)})),this.moveable.on("drag",(t=>{const n=t.target;if(n.classList.contains("is-locked")||n.classList.contains("is-full"))return;if(this.workspaceMovable.dragWorkSpace)return;Ke("movable drag",t);const i=t.target.elementWrapper.config;i.parent?e.onElementDragStart(t.target,t.inputEvent):e.checkDropTargetStatus(t),t.target.style.transform=`translate(${i.style.x+t.dist[0]}px,${i.style.y+t.dist[1]}px)`})),this.moveable.on("dragEnd",(t=>{t.isDrag?(Ke("movable dragEnd"),e.placeElementAt(t.target,t.clientX,t.clientY)):e.selectElements([t.target])})),this.moveable.on("resize",(({target:e,width:t,height:n,drag:i,delta:a,transform:o})=>{const r={};o.match(/[0-9.]+/g),r.x=i.translate[0],r.y=i.translate[1],a[0]&&(r.width=t),a[1]&&(r.height=n),e.elementWrapper.setConfigStyle(r)})),this.moveable.on("resizeEnd",(({target:e,width:t,height:n,delta:i,transform:a})=>{e.wrapper.invoke("sizeChanged"),this.selectElements([e])})),this.moveable.on("dragGroup",(({events:e})=>{e.forEach((({target:e,transform:t})=>{e.elementWrapper.config.parent||(e.style.transform=t)}))})),this.moveable.on("dragGroupEnd",(e=>{e.events.forEach((({target:e})=>{if(!e.elementWrapper.config.parent){const t=e.getBoundingClientRect();this.putElementToRoot(e,t.left+t.width/2,t.top+t.height/2)}}))})),this.moveable.on("resizeGroup",(({events:e})=>{e.forEach((({target:e,width:t,height:n,delta:i,transform:a})=>{e.style.transform=a,i[0]&&(e.style.width=`${t}px`),i[1]&&(e.style.height=`${n}px`)}))})),this.moveable.on("resizeGroupEnd",(e=>{e.events.forEach((({target:e})=>{if(!e.elementWrapper.config.parent){const t=e.getBoundingClientRect();e.elementWrapper.setConfigStyle({x:t.left+t.width/2,y:t.top+t.height/2})}}))}))}initSelecto(){this.selecto=new $e.ZP({rootContainer:null,dragContainer:this.workspaceEl,selectableTargets:[".ridge-element"],selectByClick:!0,selectFromInside:!0,continueSelect:!1,toggleContinueSelect:"ctrl",preventDefault:!0,keyContainer:window,hitRate:0}),this.selecto.on("dragStart",this.onSelectoDragStart.bind(this)),this.selecto.on("selectEnd",this.onSelectoDragEnd.bind(this))}onSelectoDragStart(e){const t=e.inputEvent,n=t.target;if(n.classList&&(n.classList.contains("moveable-area")||n.classList.contains("moveable-control")))return void e.stop();if(t.ctrlKey)return void e.stop();if(n.closest(".menu-bar"))return void e.stop();if(this.moveable.target&&1===this.moveable.target.length&&!this.moveable.target[0].contains(n)){const{clientX:e,clientY:n}=t,i=this.moveable.target[0].getBoundingClientRect();e>i.x&&e<i.x+i.width&&n>i.y&&(i.y,i.height)}const i=n.closest(".ridge-element");this.isElementMovable(i)?e.stop():i?(i.classList.contains("is-locked")||i.classList.contains("is-full")?this.moveable.resizable=!1:this.moveable.resizable=!0,this.moveable.target&&1===this.moveable.target.length&&this.moveable.target[0].contains(i)&&this.disableClickThrough||(this.moveable.target=i),this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((e=>e!==this.moveable.target&&e.closest(".ridge-element")!==this.moveable.target))],this.moveable.elementGuidelines=this.guidelines,this.moveable.elementSnapDirections={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},this.moveable.snapDirections={top:!0,left:!0,bottom:!0,right:!0,center:!0,middle:!0},this.moveable.dragStart(t),e.inputEvent&&e.inputEvent.stopPropagation(),e.inputEvent&&e.inputEvent.preventDefault(),e.stop()):t.ctrlKey&&e.stop()}onSelectoDragEnd({isDragStart:e,selected:t,inputEvent:n,rect:i}){e&&n.preventDefault(),this.moveable.elementGuidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll(".ridge-element")).filter((e=>-1===t.indexOf(e)))],this.guidelines=[document.querySelector(".viewport-container"),...Array.from(document.querySelectorAll('.ridge-element[snappable="true"]')).filter((e=>-1===t.indexOf(e)))],this.selectElements(t)}initComponentDrop(){this.workspaceEl.addEventListener("dragover",(e=>{this.enabled&&(this.selected.length&&this.selectElements([]),e.dataTransfer.dropEffect="move",this.checkDropTargetStatus({width:window.dragComponent.width,height:window.dragComponent.height,clientX:e.clientX,clientY:e.clientY}),e.preventDefault())})),this.workspaceEl.addEventListener("drop",this.onWorkspaceDrop.bind(this))}checkDropTargetStatus({target:e,clientX:t,clientY:n,width:i,height:a}){this.getDroppableTarget(e,{x:t,y:n,width:i,height:a},!0)}placeElementAt(e,t,n){Ke("Element Drag End",e,{x:t,y:n});const i=this.getDroppableTarget(e,{x:t,y:n},!1);Ke("Drop target",i);const a=e.elementWrapper,o=i?i.elementWrapper:null;null==o?(Ke("页面上移动"),this.putElementToRoot(e,t,n)):(Ke("从页面到父容器"),!1===this.pageManager.attachToParent(o,a,{x:t,y:n})&&this.putElementToRoot(e,t,n)),nt(Be,{sourceElement:e,targetParentElement:o,elements:this.pageManager.getPageElements()}),this.moveable.updateTarget()}putElementToRoot(e,t,n){this.viewPortEl.appendChild(e);const i=this.viewPortEl.getBoundingClientRect(),a=e.getBoundingClientRect();null==t||null==n||t>a.x&&t<a.x+a.width&&n>a.y&&n<a.y+a.height?e.wrapper.setConfigStyle({position:"absolute",x:Math.floor((a.x-i.x)/this.zoom),y:Math.floor((a.y-i.y)/this.zoom)}):e.wrapper.setConfigStyle({position:"absolute",x:Math.floor((t-i.x-a.width/2)/this.zoom),y:Math.floor((n-i.y-a.height/2)/this.zoom)}),this.moveable.updateTarget()}onElementDragStart(e,t){const n=e.getBoundingClientRect(),i=this.viewPortEl.getBoundingClientRect();this.pageManager.detachChildElement(e.elementWrapper),this.viewPortEl.appendChild(e),e.elementWrapper.setConfigStyle({position:"absolute",x:(n.x-i.x)/this.zoom,y:(n.y-i.y)/this.zoom,width:n.width/this.zoom,height:n.height/this.zoom}),this.checkDropTargetStatus({target:e,clientX:t.clientX,clientY:t.clientY})}selectElements(e,t){this.disableClickThrough=!1;const n=e.filter((e=>!e.classList.contains("is-hidden")));1===n.length?(n[0].classList.contains("is-locked")||n[0].classList.contains("is-full")?this.moveable.resizable=!1:this.moveable.resizable=!0,this.disableClickThrough=t,this.selected=n,this.moveable.target=n):(this.moveable.resizable=!0,this.selected=n.filter((e=>!e.classList.contains("is-locked"))),this.moveable.target=n.filter((e=>!e.classList.contains("is-locked")))),this.moveable.updateTarget(),n&&n.length<=1&&nt(Re,{from:"workspace",element:n[0],elements:this.pageManager.getPageElements()}),n&&(window.sl=e.map((e=>e.elementWrapper)))}unSelectElements(e){this.selected=this.selected.filter((t=>-1===e.indexOf(t))),this.moveable.target=this.selected,this.moveable.updateTarget()}onWorkspaceDrop(e){if(!this.enabled)return;e.preventDefault();const t=e.dataTransfer.getData("text/plain"),n=JSON.parse(t),i=document.createElement("div"),a=this.pageManager.createElement(n);a.loadAndMount(i).then((()=>{this.placeElementAt(i,e.pageX,e.pageY),nt(We,{elements:this.pageManager.getPageElements(),element:a})}))}getDroppableTarget(e,t,n){let i=[];for(const e of this.selectorDropableTarget)i=i.concat(Array.from(document.querySelectorAll(e)));const a=Array.from(i).filter((n=>{if(!n.wrapper)return!1;const{x:i,y:a,width:o,height:r}=n.getBoundingClientRect();return!1!==n.invoke("isDroppable",[e])&&(e?!e.contains(n)&&t.x>i&&t.x<i+o&&t.y>a&&t.y<a+r&&n!==e&&n.closest("[ridge-id]")!==e:t.x>i&&t.x<i+o&&t.y>a&&t.y<a+r)}));let o=null;if(1===a.length)o=a[0];else if(a.length>1){const e=a.sort(((e,t)=>e.contains(t)?1:t.contains(e)?-1:e.style.zIndex>t.style.zIndex?1:-1));o=e[0]}if(n){try{o&&o.invoke("onDragOver",e?[e.elementWrapper||{}]:[t])}catch(e){console.error("Container dragOver Error",o)}i.forEach((e=>{e!==o&&e.invoke("onDragOut")}))}return o}initKeyBind(){Ge().bind("del",(()=>{if(this.enabled&&this.selected){for(const e of this.selected)this.pageManager.removeElement(e.elementWrapper.id);this.selectElements([])}})),Ge().bind("right",(()=>{if(this.selected){for(const e of this.selected)e.elementWrapper.setConfigStyle({x:e.elementWrapper.config.style.x+1});this.moveable.updateTarget()}})),Ge().bind("left",(()=>{if(this.selected){for(const e of this.selected)e.elementWrapper.setConfigStyle({x:e.elementWrapper.config.style.x-1});this.moveable.updateTarget()}})),Ge().bind("up",(()=>{if(this.selected){for(const e of this.selected)e.elementWrapper.setConfigStyle({y:e.elementWrapper.config.style.y-1});this.moveable.updateTarget()}})),Ge().bind("down",(()=>{if(this.selected){for(const e of this.selected)e.elementWrapper.setConfigStyle({y:e.elementWrapper.config.style.y+1});this.moveable.updateTarget()}})),Ge().bind("ctrl+c",(()=>{this.selected?(this.copied=this.selected,this.copied.forEach((e=>{e.dataset.copy_x=e.elementWrapper.config.style.x,e.dataset.copy_y=e.elementWrapper.config.style.y}))):this.copied=[]})),Ge().bind("ctrl+v",(()=>{if(this.copied&&this.copied.length)for(const e of this.copied){const t=e.wrapper.clone(this.pageManager),n=document.createElement("div");t.loadAndMount(n).then((()=>{let n=null;this.selected&&1===this.selected.length&&(n=this.selected[0]===e&&this.selected[0].elementWrapper.parentWrapper?this.selected[0].elementWrapper.parentWrapper:this.selected[0].elementWrapper),n?(Ke("复制到父容器内",n),!1===this.pageManager.attachToParent(n,t)&&(t.setConfigStyle({x:t.config.style.x+20,y:t.config.style.y+20}),this.putElementToRoot(t))):(t.setConfigStyle({x:t.config.style.x+20,y:t.config.style.y+20}),this.putElementToRoot(t.el))}))}})),this.workspaceEl.onwheel=e=>{e.preventDefault();let t=this.zoom+.01*(e.deltaY>0?-1:1);t=Math.min(Math.max(.1,t),2),this.zoomBack&&this.zoomBack(t),this.setZoom(t)}}});window.NPM_CDN_URL="";const et=new de({baseUrl:location.host.startsWith("localhost")||location.host.startsWith("127.0.0.1")?"/npm":"https://cdn.jsdelivr.net/npm"});et.configService=He,et.appService=Xe,et.backUpService=_e,et.workspaceControl=Qe,window.Ridge=et;const tt=new A.Z,nt=tt.emit.bind(tt),it=tt.on.bind(tt);et.ee=tt;const at=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]),[r,s]=(0,i.useState)();return a().createElement(p.Popover,{content:()=>a().createElement("div",{style:{width:"320px",padding:"0",height:"360px",overflow:"overlay"}},a().createElement(p.Tree,{style:{height:320},value:e,filterTreeNode:!0,expandAll:!0,treeData:n,onSelect:n=>{e===n&&t(null)},onChange:t}),a().createElement(p.Space,null,a().createElement(p.Button,{theme:"solid",onClick:()=>{s(!1)}},"确定"),a().createElement(p.Button,{theme:"solid",type:"warn",onClick:()=>{t(null),s(!1)}},"取消连接"))),trigger:"click",showArrow:!0,visible:r,onVisibleChange:e=>{s(e),(()=>{const e=[],t=et.pageElementManager.getStoreTrees();Object.keys(t).forEach((n=>{e.push({key:n,label:n,disabled:!0,value:n,children:t[n].states})})),o(e)})()}},a().createElement("div",{style:{height:26,display:"flex",alignItems:"center"}},a().createElement(p.Button,{className:"btn-code",placeholder:"连接数据",type:e?"primary":"tertiary",size:"small",theme:"borderless",onClick:()=>{s(!r)},icon:a().createElement(N.IconChainStroked,{style:{margin:"0 2px",flexShrink:0}})})))})),{Text:ot}=p.Typography,{Option:rt}=p.Select,st=(0,p.withField)((({value:e,options:t,onChange:n})=>{const[o,r]=(0,i.useState)(!1),[s,l]=(0,i.useState)(""),[c,d]=(0,i.useState)([]),m=e||[],h=()=>{const e=[...m,{method:""}];d([...c,e.length-1]),n(e)},g=e=>{d([...c,e])},u=e=>{n(m.filter(((t,n)=>n!==e)))},b=e=>{d(c.filter((t=>t!==e.index))),n(m.map(((t,n)=>n===e.index?{method:e.method,payload:e.payload}:t)))},f=[{label:t.label,key:"action-root",root:!0,disabled:!0,children:[...m.map(((e,t)=>{const n={};return n.key="node-"+t,n.index=t,n.method=e.method,n.payload=e.payload||"",n.label=(e=>{const[t,n]=(e.method||".").split("."),i=et.pageElementManager.getStoreTrees();if(i[t]&&i[t].actions){const e=i[t].actions.filter((e=>e.key===n))[0];return e?e.label:""}return e.method})(e),n}))]}];return a().createElement("div",{className:"event-edit"},a().createElement(p.Tree,{className:"event-tree",expandAll:!0,disabled:!0,renderLabel:(e,t)=>a().createElement("div",{className:"tree-label"},t.root&&a().createElement(a().Fragment,null,a().createElement(ot,{className:"label-content"},e,a().createElement(p.Tag,{color:"green"},"事件 ")),a().createElement(p.Space,{className:"action"},a().createElement(p.Button,{size:"small",theme:"borderless",type:"tertiary",onClick:h,icon:a().createElement(N.IconPlus,null)},"处理动作"))),!t.root&&c.indexOf(t.index)>-1&&(e=>{const t=et.pageElementManager.getStoreTrees();return a().createElement(a().Fragment,null,a().createElement("div",{className:"label-content"},a().createElement(p.Select,{noLabel:!0,defaultValue:e.method,placeholder:"请选择处理动作",size:"small",onChange:t=>{e.method=t}},Object.entries(t).map((([e,t])=>a().createElement(p.Select.OptGroup,{label:e,key:e},t.actions.map((t=>a().createElement(p.Select.Option,{key:t.key,value:e+"."+t.key},t.label))))))),a().createElement(p.Popover,{trigger:"click",content:a().createElement("div",{style:{padding:10}},a().createElement(ot,null,"请输入方法参数"),a().createElement(p.TextArea,{value:s,onChange:e=>{l(e)}}),a().createElement(p.Button,{"aria-label":"确定",onClick:()=>{e.payload=s,b(e)}},"确定"))},a().createElement(p.Button,{theme:"borderless",type:"primary",onClick:()=>{l(e.payload)},size:"small",icon:a().createElement(N.IconBrackets,null)}))),a().createElement(p.Space,{className:"action"},a().createElement(p.Button,{size:"small",onClick:()=>{b(e)},icon:a().createElement(N.IconTick,null)},"确定")))})(t),!t.root&&-1===c.indexOf(t.index)&&(e=>a().createElement(a().Fragment,null,a().createElement(ot,{className:"label-content"},e.label||"未配置动作",e.payload?`(${e.payload})`:""),a().createElement(p.Space,{className:"action"},a().createElement(p.Button,{size:"small",icon:a().createElement(N.IconEdit,null),theme:"borderless",type:"tertiary",onClick:()=>{g(e.index)}}),a().createElement(p.Button,{size:"small",theme:"borderless",type:"tertiary",icon:a().createElement(N.IconDelete,null),onClick:()=>{u(e.index)}}))))(t)),treeData:f}))})),lt=st;n(922);var ct=n(5097),pt=n(9917),dt=n(5506);const mt=(0,p.withField)((({value:e,options:t,onChange:n})=>{const[o,r]=(0,i.useState)(!1),[s,l]=(0,i.useState)(""),c=a().createRef();return a().createElement("div",null,a().createElement(p.Modal,{closeOnEsc:!1,lazyRender:!1,onCancel:()=>{r(!1),l("")},keepDOM:!0,title:"编辑JSON数据",visible:o,onOk:()=>{try{const e=c.current.editorView.state.doc.toString();if(""!==e){const t=JSON.parse(e);n(t)}else n("");r(!1),l("")}catch(e){l(e.message)}}},a().createElement("div",null,"默认值/代码"),a().createElement("div",{style:{border:"1px solid var(--semi-color-border)",overflow:"auto",height:"300px",width:"100%"},className:"code-editor-container",ref:c}),a().createElement("div",{style:{color:"red"}},s)),a().createElement(p.Button,{size:"small",type:"tertiary",onClick:()=>{r(!0),c.current.editorView&&c.current.editorView.destroy(),c.current.editorView=new ct.tk({doc:null!=e?JSON.stringify(e,null,2):"",extensions:[pt.Xy,(0,dt.AV)(),(0,ct.jH)({position:"absolute"})],parent:c.current}),c.current.editorView.jsonParseLinter=dt.ap}},"编辑"))}));var ht=n(9299),gt={};gt.styleTagTransform=x(),gt.setAttributes=y(),gt.insert=b().bind(null,"head"),gt.domAPI=g(),gt.insertStyleElement=w(),m()(ht.Z,gt),ht.Z&&ht.Z.locals&&ht.Z.locals;const ut=({images:e,select:t})=>a().createElement("div",{zIndex:3001,className:"app-image-list"},e.map(((e,n)=>a().createElement("div",{key:n,className:"image-item"},a().createElement("div",{className:"image-wrapper"},a().createElement("img",{onClick:()=>{var n;t((n=e).path,n.src)},src:e.src})))))),bt=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]),r=()=>a().createElement("div",{style:{width:"510px",height:"430px"}},a().createElement(ut,{images:n,select:e=>{t(e)}}));return a().createElement(p.Input,{size:"small",showClear:!0,onClear:()=>t(""),value:e,onChange:e=>t(e),suffix:a().createElement(p.Popover,{onVisibleChange:e=>{if(e){const{appService:e}=et,t=Object.entries(e.dataUrlByPath).map((e=>({path:e[0],src:e[1]})));o(t)}},trigger:"click",showArrow:!0,zIndex:2001,content:a().createElement(r,null)},a().createElement(N.IconFolderOpen,{style:{cursor:"pointer"}}))})})),{Text:ft}=p.Typography,yt=(0,p.withField)((({value:e,onChange:t})=>{const{icons:n}=window.Ridge,i=()=>a().createElement(a().Fragment,null,a().createElement(p.Tabs,{type:"button",size:"small"},Object.values(n).map(((e,n)=>a().createElement(p.TabPane,{key:n,itemKey:n,tab:a().createElement("div",{className:e.options.icon})},a().createElement("div",{className:"icon-list"},e.icons.map((e=>a().createElement("i",{onClick:()=>{t(e)},key:e,className:e})))))))));return a().createElement(p.Input,{size:"small",showClear:!0,onClear:()=>t(""),value:e,onChange:e=>t(e),suffix:a().createElement(p.Popover,{trigger:"click",className:"pop-icon-container",showArrow:!0,zIndex:2001,content:a().createElement(i,null)},a().createElement("span",{className:"picker-button"},a().createElement(N.IconAppCenter,null)))})})),vt=({position:e="border",value:t,onChange:n})=>{const i=(t||"0 0 0 0").split(" ").map((e=>parseInt(e)||0));return a().createElement(a().Fragment,null,a().createElement(p.Input,{size:"small",value:t,onChange:n,suffix:a().createElement(p.Popover,{trigger:"click",stopPropagation:!0,content:a().createElement("div",{className:"input-padding-pop"},a().createElement("div",{className:"input-padding position-"+e},i.map(((e,t)=>a().createElement(p.InputNumber,{className:"input-padding-number order-"+t,key:t,size:"small",value:e,onChange:e=>{i[t]=e,n(i.map((e=>e+"px")).join(" "))}})))))},a().createElement(N.IconMarginStroked,{style:{cursor:"pointer"}}))}))},wt=(0,p.withField)(vt),Et=(0,p.withField)((({value:e,onChange:t})=>{const n="string"!=typeof e?"#fff":e,i=n.match(/[0-9]+deg|\s[^%]+%/g);let o,r,s,l=[];null==i||i.length<3?(o=n,l.push({color:o})):(s=parseInt(i[0])||0,r=i.slice(1),l.push(...r.map((e=>{const t=e.trim().split(/\s+/);return{color:t[0],percent:parseInt(t[1])}}))));const c=e=>{e?l=l.filter(((t,n)=>n!==e)):l.push({color:"#fff",percent:100}),d()},d=()=>{1===l.length?t(l[0].color):t(`linear-gradient(${s||0}deg, ${l.map(((e,t)=>{let n=e.percent;return 0===t&&(n=0),t===l.length-1&&(n=100),e.color+" "+n+"%"})).join(", ")})`)};return a().createElement("div",{className:"background-edit"},a().createElement("div",{className:"color-list"},a().createElement(p.List,{dataSource:l,size:"small",renderItem:(e,t)=>{let n=e.percent||0,i=!1;return 0===t&&(n=0,i=!0),t===l.length-1&&(n=100,i=!0),a().createElement(p.Space,{style:{width:"100%"}},a().createElement(F,{value:e.color,onChange:e=>((e,t)=>{l=l.map(((n,i)=>({color:i===e?t:n.color,percent:n.percent}))),d()})(t,e)}),t>0&&a().createElement("div",{style:{flex:1}},a().createElement(p.Slider,{value:n,disabled:i,onChange:e=>((e,t)=>{l=l.map(((n,i)=>({color:n.color,percent:i===e?t:n.percent}))),d()})(t,e)})),t>0&&a().createElement(p.Button,{icon:a().createElement("i",{class:"bi bi-x-lg"}),size:"small",type:"danger",onClick:()=>c(t),style:{marginRight:4}}))}}),l.length>1&&a().createElement(p.Space,null,a().createElement(p.InputNumber,{insetLabel:"渐变角度",size:"small",value:s,onChange:e=>(e=>{s=e,d()})(e)}))),a().createElement("div",{style:{fontSize:14}},a().createElement(p.Button,{size:"small",theme:"borderless",icon:a().createElement("i",{class:"bi bi-plus-lg"}),onClick:()=>c()})))})),xt=({value:e,options:t,onChange:n})=>a().createElement(p.Popover,{content:a().createElement("div",{className:"preset-color-picker",style:{padding:"10px"}},t&&t.map(((t,i)=>a().createElement("div",{key:i},a().createElement("div",{style:{margin:"5px"}},t.title),a().createElement(D.iY,{colors:t.colors,color:e,onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}})))))},a().createElement(p.Button,{size:"small",style:{backgroundColor:e,height:"22px",width:"22px",padding:0,border:"1px solid #ccc"}})),kt=(0,p.withField)((e=>a().createElement(xt,e))),St=(0,p.withField)((({value:e,options:t,onChange:n})=>a().createElement(p.RadioGroup,{type:"button",buttonSize:"small",value:e,onChange:e=>{n(e.target.value)}},t&&t.map((e=>e.icon?a().createElement(p.Radio,{key:e.value,value:e.value},a().createElement("i",{className:e.icon,style:{fontSize:18}})):e.label?a().createElement(p.Radio,{key:e.value,value:e.value},a().createElement("div",{style:{fontSize:"14px",...e.style}},e.label)):a().createElement(p.Radio,{key:e.value,value:e.value})))))),Ct=St,Pt=(0,p.withField)((({value:e,optionList:t,selectAll:n,onChange:o})=>{const r=e&&t&&e.length>0&&e.length<t.length,[s,l]=(0,i.useState)(!1);return a().createElement(a().Fragment,null,n&&a().createElement("div",{style:{paddingBottom:6,paddingLeft:4,borderBottom:"1px solid var(--semi-color-border)"}},a().createElement(p.Checkbox,{indeterminate:r,onChange:e=>{o(e.target.checked?t&&t.map((e=>e.value)):[]),l(e.target.checked)},checked:s,"aria-label":"Checkbox 示例"},"全选")),a().createElement(p.CheckboxGroup,{direction:"horizontal",type:t&&t[0]&&t[0].icon?"pureCard":"card",buttonSize:"small",value:e,onChange:e=>{o(e)}},t&&t.map((e=>{if(e.icon){const t=N[e.icon];return a().createElement(p.Tooltip,{content:e.label,key:e.value},a().createElement(p.Checkbox,{value:e.value,"aria-label":e.label},a().createElement(t,{rotate:e.rotate||0})))}return e.label?a().createElement(p.Checkbox,{key:e.value,value:e.value},e.label):a().createElement(p.Checkbox,{key:e.value,value:e.value})}))))})),Nt=({value:e,options:t,onChange:n})=>a().createElement(p.Popover,{showArrow:!0,trigger:"click",content:a().createElement(a().Fragment,null,a().createElement(p.Button,{size:"small",onClick:()=>{n(null)}},"清除颜色"),a().createElement(D.xS,{color:e,width:220,style:{boxShadow:"none"},triangle:"hide",onChange:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))},onChangeComplete:e=>{n(e.hex+parseInt(255*e.rgb.a).toString(16))}}))},a().createElement(p.Button,{size:"small",style:{backgroundColor:e,height:"20px",width:"20px",margin:"0 3px",padding:0,border:"1px solid #ccc"}})),It=(0,p.withField)((({value:e,onChange:t})=>{let n=[0,0,5,5,"#ccc"];e&&(n=e.split(" ").map(((e,t)=>t<4?parseInt(e):e)));const i=e=>{t(`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px ${e[4]}`)};return a().createElement(p.Space,{spacing:2,wrap:!0},a().createElement(p.InputNumber,{className:"digit2",size:"small",value:n[0],onChange:e=>{n[0]=e,i(n)}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:n[1],onChange:e=>{n[1]=e,i(n)}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:n[2],onChange:e=>{n[2]=e,i(n)}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:n[3],onChange:e=>{n[3]=e,i(n)}}),a().createElement(Nt,{value:n[4],onChange:e=>{n[4]=e,i(n)}}))})),Lt=(0,p.withField)((({icon:e,value:t,onChange:n})=>a().createElement("div",{style:{height:24,display:"flex",alignItems:"center"}},a().createElement(p.Button,{placeholder:"启用调试模式",type:t?"primary":"tertiary",size:"small",theme:"borderless",onClick:()=>{n(!t)},icon:e})))),{Text:Ot}=p.Typography,zt=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)(!1),r=e||{},s=(r.boxShadow||"0 0 0 0 #fff").split(" ").map(((e,t)=>t<4?parseInt(e):e)),l=()=>{t(Object.assign(r,{boxShadow:`${s[0]}px ${s[1]}px ${s[2]}px ${s[3]}px ${s[4]}`}))};return a().createElement(a().Fragment,null,a().createElement(p.Space,null,a().createElement(Ot,{type:"tertiary"},"边框及背景"),a().createElement(Nt,{value:r.borderColor,onChange:e=>{t(Object.assign(r,{borderColor:e}))}}),a().createElement(Nt,{value:r.backgroundColor,onChange:e=>{t(Object.assign(r,{backgroundColor:e}))}}),a().createElement(p.Select,{value:r.borderStyle,optionList:[{label:"实线",value:"solid"},{label:"点划线",value:"dashed"}],size:"small",onChange:e=>{t(Object.assign(r,{borderStyle:e}))}}),a().createElement(p.Button,{type:n?"primary":"tertiary",theme:"borderless",icon:a().createElement(N.IconConfigStroked,null),onClick:()=>{o(!n)}})),a().createElement(p.Collapsible,{isOpen:n},a().createElement(p.Space,{style:{marginTop:8}},a().createElement(Ot,{type:"tertiary",style:{width:60}},"边框宽度"),a().createElement(vt,{value:r.borderWidth,onChange:e=>{t(Object.assign(r,{borderWidth:e}))}})),a().createElement(p.Space,{style:{marginTop:12}},a().createElement(Ot,{type:"tertiary",style:{width:60}},"内边距"),a().createElement(vt,{value:r.padding,onChange:e=>{t(Object.assign(r,{padding:e}))}})),a().createElement(p.Space,{style:{marginTop:12}},a().createElement(Ot,{type:"tertiary",style:{width:60}},"圆角"),a().createElement(vt,{position:"corner",value:r.borderRadius,onChange:e=>{t(Object.assign(r,{borderRadius:e}))}})),a().createElement(p.Space,{style:{marginTop:12}},a().createElement(Ot,{type:"tertiary"},"阴影"),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:s[0],onChange:e=>{s[0]=e,l()}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:s[1],onChange:e=>{s[1]=e,l()}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:s[2],onChange:e=>{s[2]=e,l()}}),a().createElement(p.InputNumber,{className:"digit2",size:"small",value:s[3],onChange:e=>{s[3]=e,l()}}),a().createElement(Nt,{value:s[4],onChange:e=>{s[4]=e,l()}}))))})),Tt=zt,Dt=[{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"微软雅黑",value:"Microsoft Yahei"},{name:"微软正黑体",value:"Microsoft JhengHei"},{name:"楷体",value:"KaiTi"},{name:"新宋体",value:"NSimSun"},{name:"仿宋",value:"FangSong"},{name:"幼圆",value:"YouYuan"},{name:"隶书",value:"LiSu"},{name:"苹方",value:"PingFang SC"}],Ft=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)(!1),r=e||{},s=parseInt(r.fontSize||"20");return a().createElement(a().Fragment,null,a().createElement(p.Space,null,a().createElement(p.InputNumber,{size:"small",style:{width:"46px"},value:s,onChange:e=>{t(Object.assign(r,{fontSize:e+"px"}))}}),a().createElement(Nt,{value:r.color,onChange:e=>{t(Object.assign(r,{color:e}))}}),a().createElement(p.Button,{icon:a().createElement(N.IconBold,null),size:"small",type:"bold"===r.fontWeight?"primary":"tertiary",theme:"bold"===r.fontWeight?"solid":"borderless",onClick:()=>{t(Object.assign(r,{fontWeight:"bold"===r.fontWeight?"normal":"bold"}))}}),a().createElement(p.Button,{type:"tertiary",theme:"borderless",icon:a().createElement(N.IconChevronDown,{rotate:n?180:0}),onClick:()=>{o(!n)}})),a().createElement(p.Collapsible,{isOpen:n},a().createElement(p.Space,null,a().createElement(p.Select,{size:"small",defaultValue:r.fontFamily,style:{width:120},onChange:e=>{t(Object.assign(r,{fontFamily:e}))}},Dt.map((e=>a().createElement(p.Select.Option,{key:e.name,value:e.value},e.name)))))))})),Mt=Ft,jt=(0,p.withField)((({value:e,onChange:t,options:n})=>{const o=e||[],[r,s]=(0,i.useState)(1),l=(e,n,i)=>{t(o.map(((t,a)=>a===6*(r-1)+i?e?Object.assign(t,{[e]:n}):n:t)))};return a().createElement(a().Fragment,null,a().createElement(p.List,{dataSource:(e=>{const t=6*(e-1),n=6*e;return o.slice(t,n)})(r),split:!1,size:"small",className:"component-list-demo-booklist",style:{border:"1px solid var(--semi-color-border)",flexBasis:"100%",flexShrink:0},renderItem:(e,n)=>{let i=null;if("string"==typeof e)i=a().createElement(p.Input,{onChange:e=>{l("",e,n)},value:e,size:"small"});else{const t=Object.keys(e);i=a().createElement(a().Fragment,null,t.map((t=>a().createElement(p.Input,{key:t,onChange:e=>{l(t,e,n)},value:e[t],size:"small"}))))}return a().createElement("div",{style:{margin:4,gap:4,display:"flex"},className:"list-item"},i,a().createElement(p.Button,{size:"small",type:"danger",theme:"borderless",icon:a().createElement(N.IconMinusCircle,null),onClick:()=>(e=>{t(o.filter(((t,n)=>n!==6*(r-1)+e)))})(n),style:{marginRight:4}}))}}),a().createElement("div",{style:{margin:4,fontSize:14,display:"flex",justifyContent:"space-between"}},a().createElement(p.Button,{size:"small",theme:"borderless",icon:a().createElement(N.IconPlusCircle,null),onClick:()=>{t([...o,JSON.parse(JSON.stringify(n.item))])},style:{marginRight:4,color:"var(--semi-color-info)"}},"新增项"),a().createElement("div",null,o.length>6&&a().createElement(p.Pagination,{size:"small",style:{height:24,width:"100%",flexBasis:"100%",justifyContent:"center"},pageSize:6,total:o.length,currentPage:r,onChange:e=>s(e)}))))})),At=jt,Rt=(0,p.withField)((({value:e,onChange:t})=>{const n=e||{},i=n.categories||["分类1"],a=n.series||[{name:"系列1",data:[10]}];return React.createElement(React.Fragment,null,React.createElement(p.Popover,{trigger:"click",content:React.createElement("table",{className:"series-table-edit"},React.createElement("tr",null,React.createElement("th",null),React.createElement("th",null,"分类"),a.map(((e,n)=>React.createElement("th",{key:n,onBlur:e=>((e,n)=>{t({categories:i,series:a.map(((t,i)=>i===e?{name:n.target.textContent,data:t.data}:t))})})(n,e),contentEditable:!0},e.name))),React.createElement("th",{className:"column-plus",placeholder:"增加一个数据系列",onClick:()=>{t({categories:i,series:[...a,{name:"系列",data:[]}]})}},"+")),i.map(((e,n)=>React.createElement("tr",{key:n},React.createElement("td",null,n),React.createElement("td",{contentEditable:!0,onBlur:e=>((e,n)=>{t({categories:i.map(((t,i)=>i===e?n.target.textContent:t)),series:a})})(n,e),onPaste:e=>((e,n)=>{e.stopPropagation(),e.preventDefault();const o=(e.clipboardData||window.clipboardData).getData("text/plain").split("\r\n");for(let e=0;e<o.length;e++){const t=o[e].split(/ +|\t|,/).filter((e=>e));i[n+e]=t[0];for(let i=1;i<t.length;i++)a[i-1]&&(a[i-1].data[n+e]=parseFloat(t[i])||0)}t({categories:i,series:a})})(e,n)},e),a.map(((e,o)=>React.createElement("td",{key:o,contentEditable:!0,onBlur:e=>((e,n,o)=>{t({categories:i,series:a.map(((t,i)=>i===n?(t.data[e]=parseFloat(o.target.textContent)||0,t):t))})})(n,o,e),onPaste:e=>((e,n,o)=>{e.stopPropagation(),e.preventDefault();const r=(e.clipboardData||window.clipboardData).getData("text/plain").split("\r\n");for(let e=0;e<r.length;e++){const t=r[e].split(/ +|\t|,/).filter((e=>e));for(let i=0;i<t.length;i++)a[o+i]&&(a[o+i].data[n+e]=parseFloat(t[i])||0)}t({categories:i,series:a})})(e,n,o)},e.data[n]))),React.createElement("td",{className:"row-delete",onClick:()=>{return e=n,i.splice(e,1),void t({categories:i,series:a.map((t=>(t.data.splice(e,1),{name:t.name,data:t.data})))});var e}},React.createElement(N.IconMinusCircleStroked,null))))),React.createElement("tr",null,React.createElement("td",{className:"row-plus",placeholder:"增加一个",onClick:()=>{t({categories:[...i,"分类"],series:a.map((e=>({name:e.name,data:[...e.data,0]})))})}},"+"),React.createElement("td",null),a.map(((e,n)=>React.createElement("td",{key:n,className:"column-delete",onClick:()=>{return e=n,void t({categories:i,series:a.filter(((t,n)=>n!==e))});var e}},React.createElement(N.IconMinusCircleStroked,null))))))},React.createElement(p.Button,{size:"small",type:"primary"},"编辑")))})),Bt=(0,p.withField)((({value:e,onChange:t})=>{const n=e||{current:"",list:[]},{current:o,list:r}=n,[s,l]=(0,i.useState)(-1),[c,d]=(0,i.useState)(""),[m,h]=(0,i.useState)(!0);return a().createElement("div",{className:"state-list-edit"},a().createElement(p.List,{className:"state-list",dataSource:r,split:!0,size:"small",renderItem:(e,n)=>n===s?a().createElement("div",{style:{display:"flex",height:"32px",alignItems:"center"},className:"list-item"},a().createElement("div",{style:{flex:1}},a().createElement(p.Input,{validateStatus:m?"":"error",value:c,size:"small",onChange:e=>{var t;d(e),""===(t=e).trim()?h(!1):-1===r.filter(((e,t)=>t!==s)).indexOf(t)?h(!0):h(!1)}})),a().createElement(p.Button,{disabled:!m,type:"danger",size:"small",theme:"borderless",icon:a().createElement("i",{class:"bi bi-check-lg"}),onClick:()=>{-1===r.filter(((e,t)=>t!==s)).indexOf(c)&&(r[s]=c,l(-1),d(""),t({current:o,list:r}))},style:{marginRight:4}})):a().createElement("div",{className:"list-item"+(o===e?" is-current":""),onClick:()=>{(e=>{t({current:r[e],list:r})})(n)}},a().createElement("div",{className:"state-name",style:{flex:1}},e),a().createElement(p.Button,{type:"danger",theme:"borderless",icon:a().createElement("i",{class:"bi bi-pencil"}),onClick:()=>(e=>{l(e),d(r[e])})(n),style:{marginRight:4}}),a().createElement(p.Button,{theme:"borderless",icon:a().createElement("i",{class:"bi bi-trash"}),onClick:()=>(e=>{r.splice(e,1),t({current:o,list:r}),l(-1)})(n),style:{marginRight:4}}))}),a().createElement("div",{style:{margin:4,fontSize:14},onClick:()=>(()=>{let e="State",n=1;for(;r.indexOf(e)>-1;)e="State"+n,n++;t({current:o,list:[...r,e]}),d(e),l(r.length)})()},a().createElement(p.Button,{size:"small",theme:"borderless",icon:a().createElement("i",{class:"bi bi-plus-lg"}),style:{marginRight:4,color:"var(--semi-color-info)"}})))}));var Ut=n(8042),Vt={};Vt.styleTagTransform=x(),Vt.setAttributes=y(),Vt.insert=b().bind(null,"head"),Vt.domAPI=g(),Vt.insertStyleElement=w(),m()(Ut.Z,Vt),Ut.Z&&Ut.Z.locals&&Ut.Z.locals;const Wt=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{o(et.pageElementManager.classNames.map((e=>({label:e.label,value:e.className}))))})),a().createElement(p.Select,{size:"small",multiple:!0,value:e,onChange:t},n.map((e=>a().createElement(p.Select.Option,{value:e.value,key:e.value},e.label))))})),Zt=(0,p.withField)((({value:e,onChange:t})=>{const[n,o]=(0,i.useState)([]);return(0,i.useEffect)((()=>{o(et.appService.filterFiles((e=>e.mimeType&&e.mimeType.indexOf("audio")>-1)).map((e=>(console.log("audio file=>",e),{value:e.path,label:e.label}))))}),[e]),a().createElement(p.Select,{size:"small",value:e,showClear:!0,onChange:t},n&&n.map((e=>a().createElement(p.Select.Option,{value:e.value,key:e.value},e.label))))})),qt=[{name:"默认",value:"default"},{name:"宋体",value:"SimSun"},{name:"黑体",value:"SimHei"},{name:"微软雅黑",value:"Microsoft Yahei"},{name:"微软正黑体",value:"Microsoft JhengHei"},{name:"楷体",value:"KaiTi"},{name:"新宋体",value:"NSimSun"},{name:"仿宋",value:"FangSong"},{name:"幼圆",value:"YouYuan"},{name:"隶书",value:"LiSu"},{name:"苹方",value:"PingFang SC"}],Jt=(0,p.withField)((({value:e,onChange:t})=>a().createElement(p.Select,{size:"small",value:e,onChange:t,showClear:!0},qt.map((e=>a().createElement(p.Select.Option,{key:e.name,value:e.value},e.name)))))),$t=(0,p.withField)((({value:e,onChange:t,...n})=>n.icon?a().createElement(p.Button,{icon:a().createElement("i",{style:{fontSize:20},className:n.icon}),size:"small",type:e?"primary":"tertiary",theme:e?"solid":"borderless",onClick:()=>{t(!e)}}):n.toggle?a().createElement(a().Fragment,null):a().createElement(p.Checkbox,{size:"small",checked:e,onChange:()=>t(!e)})));function Yt(){return Yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yt.apply(this,arguments)}class Gt extends a().Component{constructor(e){super(e),this.ref=a().createRef();const{InputNumber:t,Select:n,Checkbox:i,Input:o}=p.Form;this.controlGeneratorMap={divider:e=>a().createElement(p.Divider,{margin:"0",align:"center"},e.label),number:(e,n)=>a().createElement(t,{size:"small",label:e.label,disabled:n,field:e.field}),length:(e,n)=>a().createElement(t,{size:"small",label:e.label,disabled:n,field:e.field}),string:(e,t)=>a().createElement(o,{size:"small",label:e.label,field:e.field,disabled:t}),text:(e,t)=>a().createElement(o,{size:"small",label:e.label,field:e.field,disabled:t}),checkbox:(e,t)=>a().createElement(i,{size:"small",label:e.label,field:e.field,disabled:t}),boolean:(e,t)=>a().createElement($t,e),select:(e,t)=>a().createElement(n,{size:"small",label:e.label,showClear:!1===e.required,field:e.field,placeholder:e.placeholder,multiple:e.multiple,optionList:e.options||e.optionList,disabled:t}),radiogroup:(e,t)=>a().createElement(Ct,{label:e.label,field:e.field,options:e.optionList,disabled:t}),checkboxgroup:(e,t)=>a().createElement(Pt,{label:e.label,field:e.field,optionList:e.optionList,selectAll:e.selectAll,disabled:t}),states:(e,t)=>a().createElement(Bt,Yt({label:e.label,field:e.field},e)),fontFamily:(e,t)=>a().createElement(Jt,{label:e.label,field:e.field,disabled:t}),border:(e,t)=>a().createElement(j,{label:e.label,field:e.field,disabled:t}),padding:(e,t)=>a().createElement(wt,Yt({disabled:t},e)),boxshadow:(e,t)=>a().createElement(It,{label:e.label,field:e.field,disabled:t}),event:(e,t,n)=>a().createElement(lt,{className:"event-field",noLabel:!0,field:e.field,options:{label:e.label,...n}}),image:(e,t)=>a().createElement(bt,{label:e.label,field:e.field,disabled:t}),icon:(e,t)=>a().createElement(yt,{label:e.label,field:e.field,disabled:t}),audio:(e,t)=>a().createElement(Zt,{label:e.label,field:e.field,disabled:t}),rect:(e,t)=>a().createElement(Tt,{label:e.label,field:e.field,noLabel:!0,disabled:t}),font:(e,t)=>a().createElement(Mt,{label:e.label,field:e.field,disabled:t}),background:(e,t)=>a().createElement(Et,{label:e.label,field:e.field,disabled:t}),colorpicker:(e,t)=>a().createElement(M,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),color:(e,t)=>a().createElement(M,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),presetcolorpicker:(e,t)=>a().createElement(kt,{label:e.label,field:e.field,options:e.presetColors,disabled:t}),json:(e,t)=>a().createElement(mt,{label:e.label,field:e.field,disabled:t}),array:e=>a().createElement(At,{label:e.label,field:e.field,options:e}),class:e=>a().createElement(Wt,{label:e.label,field:e.field,options:e}),SeriesData:e=>a().createElement(Rt,e)}}getRenderField(e,t,n){return this.controlGeneratorMap[e.control]?this.controlGeneratorMap[e.control](e,t,n):a().createElement("div",null,e.label,"类型不支持",e.control)}renderField(e,t,n,i){if("slot"===e.type||"children"===e.type)return;if("function"==typeof e.hidden?e.hidden(n.values):e.hidden)return;const o="function"==typeof e.readonly?e.readonly(n.values):e.readonly;null==e.control&&(e.control=e.type);const r=this.getRenderField(e,o,i);return e.label?r.props.label=e.label:r.props.noLabel=!0,"divider"===e.type?a().createElement(p.Divider,{margin:"0",align:"left"},e.label||""):e.fieldEx?a().createElement("div",{className:"field-block with-code-expr "+(e.width?"":"full-width"),style:{width:e.width||"100%"}},a().createElement("div",{style:{flex:1}},r),a().createElement(at,{className:"field-code-expr",noLabel:!0,field:e.fieldEx,options:i})):a().createElement("div",{className:"field-block",style:{width:e.width||"100%"}},r)}render(){const e=this.renderField.bind(this),{fields:t,tableStyle:n,getFormApi:i,onValueChange:o,style:r,initValues:s,options:l,labelPosition:c="left"}=this.props,d=e=>{const n=[{dataIndex:"label",width:68},{dataIndex:"bind",render:(t,n,i)=>{const a="function"==typeof n.readonly?n.readonly(e.values):n.readonly,o=this.getRenderField(n,a,l);return o.props.noLabel=!0,o}},{dataIndex:"bind",width:32,render:(e,t,n)=>"debug"===t.extra?a().createElement(Lt,{noLabel:!0,field:"debug",icon:a().createElement(N.IconStopwatchStroked,null)}):!1===t.bindable?null:a().createElement(at,{noLabel:!0,field:t.fieldEx,options:l})}];return a().createElement(p.Table,{columns:n,dataSource:t,pagination:!1})},m=e=>{this.api=e,i&&i(e)};return a().createElement("div",{className:"object-form",style:r},!n&&a().createElement(p.Form,{size:"small",labelAlign:"left",labelPosition:c,layout:"horizontal",getFormApi:m,initValues:s,onValueChange:o,render:({formState:n,formApi:i,values:o})=>a().createElement(a().Fragment,null,t&&t.map(((t,i)=>e(t,i,n,l))))}),n&&a().createElement(p.Form,{noLabel:!0,labelPosition:c,getFormApi:m,initValues:s,onValueChange:o,render:({formState:e,formApi:n,values:i})=>a().createElement(a().Fragment,null,t&&d(e))}))}}const Kt=s()("editor:config-panel"),Ht=[{label:"名称",control:"text",bindable:!1,field:"title"}],Xt=[{label:"X",control:"number",width:"50%",readonly:e=>!(e&&e.style&&"absolute"===e.style.position),field:"style.x",fieldEx:"styleEx.x"},{label:"Y",width:"50%",control:"number",readonly:e=>!(e&&e.style&&"absolute"===e.style.position),field:"style.y",fieldEx:"styleEx.Y"},{label:"W",width:"50%",control:"number",field:"style.width",fieldEx:"styleEx.width"},{label:"H",width:"50%",control:"number",field:"style.height",fieldEx:"styleEx.height"}],_t=[{label:"填满页面",width:"50%",type:"boolean",field:"style.full"},{label:"显示",type:"boolean",control:"checkbox",width:"50%",field:"style.visible",fieldEx:"styleEx.visible"},{label:"透明度",type:"number",width:"50%",field:"style.opacity",fieldEx:"styleEx.opacity"},{label:"层高",type:"number",width:"50%",field:"style.zIndex"}],Qt=[{label:"页面名称",control:"text",readonly:!0,bindable:!1,field:"name"},{label:"运行区域",bindable:!1,control:"select",field:"type",optionList:[{label:"固定宽高",value:"static"},{label:"宽度自适应",value:"responsive"},{label:"宽高自适应",value:"full-responsive"}]},{label:"宽度",bindable:!1,control:"number",width:"50%",field:"width"},{label:"高度",bindable:!1,width:"50%",control:"number",field:"height"},{label:"背景",control:"background",field:"background"}];class en extends a().Component{constructor(e){super(e),this.ref=a().createRef(),this.componentPropFormApi=null,this.componentEventFormApi=null,this.pagePropFormApi=null,this.state={pageFields:Qt,nodePropFields:[],nodeEventFields:[],nodePropsValues:{},nodeEventsValues:{}}}static contextType=z;componentDidMount(){this.initEvents()}initEvents(){it(De,(({name:e,properties:t,states:n,reducers:i})=>{for(const e of Object.keys(t))this.pagePropFormApi.setValue(e,t[e],{notNotify:!0});this.pagePropFormApi.setValue("name",e,{notNotify:!0}),this.updatePageConfigFields()})),it(Fe,(e=>{this.pagePropFormApi.setValue("name",e,{notNotify:!0})})),it(je,(({from:e,properties:t})=>{if("workspace"===e)for(const e of Object.keys(t))this.pagePropFormApi.setValue(e,t[e],{notNotify:!0})})),it(Te,(e=>{this.updatePageConfigFields()})),it(Re,(e=>{this.elementSelected(e.element)})),it(Be,(e=>{this.elementSelected(e.sourceElement)}))}updatePanelConfig(){const e=this.currentElement.elementWrapper;Kt("updatePanelConfig",e);const t=[];t.push(...Ht),e.parentWrapper?t.push(...e.parentWrapper?.componentDefinition?.childStyle||[]):t.push(...Xt);const n=[];if(e.componentDefinition){t.push({type:"divider"});for(const n of e.componentDefinition.props){const e={};n.connect?Object.assign(e,n,{field:"props."+n.name,fieldEx:"propsEx."+n.name}):Object.assign(e,n,{field:"props."+n.name}),t.push(e)}for(const t of e.componentDefinition.events||[]){const e={label:t.label,type:"function",control:"event",field:"event."+t.name};n.push(e)}}this.setState({nodePropFields:t,nodeEventFields:n,nodePropsValues:{title:e.config.title,props:e.config.props,propsEx:e.config.propEx,styleEx:e.config.styleEx},nodeEventsValues:{event:e.config.events}},(()=>{this.componentPropFormApi.reset(),this.componentEventFormApi.reset(),this.componentStyleFormApi.reset(),this.componentPropFormApi.setValue("style",e.config.style,{notNotify:!0}),this.componentPropFormApi.setValue("title",e.config.title,{notNotify:!0}),this.componentPropFormApi.setValue("props",e.config.props,{notNotify:!0}),this.componentPropFormApi.setValue("propsEx",e.config.propEx,{notNotify:!0}),this.componentPropFormApi.setValue("styleEx",e.config.styleEx,{notNotify:!0}),this.componentStyleFormApi.setValue("style",e.config.style,{notNotify:!0}),this.componentStyleFormApi.setValue("styleEx",e.config.styleEx,{notNotify:!0}),this.componentEventFormApi.setValue("event",e.config.events,{notNotify:!0})}))}updatePageConfigFields(){if(et.pageElementManager){this.setState({pageFields:[...Qt,{field:"cssFiles",label:"样式表",control:"select",placeholder:"请选择样式表",optionList:Xe.filterFiles((e=>"text/css"===e.mimeType)).map((e=>({value:e.path,label:e.label}))),required:!1,multiple:!0},{field:"jsFiles",label:"脚本库",control:"select",placeholder:"请选择脚本",optionList:Xe.filterFiles((e=>"text/javascript"===e.mimeType)).map((e=>({value:e.path,label:e.label}))),required:!1,multiple:!0},{field:"classNames",label:"样式",control:"select",placeholder:"请选择背景样式",optionList:et.pageElementManager.classNames.map((e=>({label:e.label,value:e.className}))),required:!1,multiple:!0}]});const e=et.pageElementManager.pageConfig.properties;for(const t in e)this.pagePropFormApi.setValue(t,e[t],{notNotify:!0})}}elementSelected(e){if(this.currentElement=e,this.interval&&(window.clearInterval(this.interval),this.interval=null),e){const e=this.currentElement.elementWrapper;e&&e.componentDefinition?this.updatePanelConfig():this.interval=setInterval((()=>{e&&e.componentDefinition&&(this.updatePanelConfig(),window.clearInterval(this.interval),this.interval=null)}),200)}else this.updatePageConfigFields(),this.currentElement=null,this.setState({nodePropFields:[],nodeEventFields:[]})}nodeRectChange(e){this.styleChange(e)}render(){const{nodePropFields:e,nodeEventFields:t,nodeEventsValues:n,pageFields:i}=this.state,o=(e,t)=>{nt(Ve,{el:this.currentElement,values:e,field:t})};return a().createElement(a().Fragment,null,a().createElement(p.Tabs,{type:"card",className:"on-title",style:{display:0===e.length?"none":"block"}},a().createElement(p.TabPane,{tab:"属性",itemKey:"props"},a().createElement(Gt,{fields:e,getFormApi:e=>{window.componentPropFormApi=this.componentEventFormApi,this.componentPropFormApi=e},onValueChange:(e,t)=>{nt(Ue,{el:this.currentElement,values:e,field:t})}})),a().createElement(p.TabPane,{tab:"交互",itemKey:"interact"},a().createElement(Gt,{initValues:n,fields:t,getFormApi:e=>{this.componentEventFormApi=e},onValueChange:o})),a().createElement(p.TabPane,{tab:"样式",itemKey:"style"},a().createElement(Gt,{fields:_t,getFormApi:e=>{this.componentStyleFormApi=e},onValueChange:(e,t)=>{nt(Ue,{el:this.currentElement,values:e,field:t})}}))),a().createElement(p.Tabs,{type:"card",className:"on-title",style:{display:0===e.length?"block":"none"}},a().createElement(p.TabPane,{tab:"基础",itemKey:"style"},a().createElement(Gt,{fields:i,getFormApi:e=>{this.pagePropFormApi=e},onValueChange:(e,t)=>{nt(je,{from:"panel",properties:e})}})),a().createElement(p.TabPane,{tab:"交互",itemKey:"interact"},a().createElement(Gt,{getFormApi:e=>{},onValueChange:o}))))}}function tn(){return tn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},tn.apply(this,arguments)}class nn extends a().Component{constructor(){super(),this.state={show:!0}}render(){return a().createElement(T,tn({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),a().createElement(en,null))}}const{IconUnlock:an,IconLock:on,IconEyeOpened:rn,IconEyeClosedSolid:sn}=N,{Text:ln}=p.Typography;class cn extends a().Component{constructor(){super(),this.state={elements:[],selected:null}}static contextType=z;componentDidMount(){it(De,(({elements:e})=>{this.setState({elements:e})})),it(We,(({element:e,elements:t})=>{this.setState({elements:t})})),it(Ae,(({elements:e})=>{this.setState({elements:e})})),it(Re,(e=>{"workspace"===e.from&&(this.setState({selected:e.element?e.element.elementWrapper.id:null}),e.elements&&this.setState({elements:e.elements}))})),it(Be,(e=>{this.setState({elements:e.elements})}))}onNodeSelected(e){this.setState({selected:e});const t=this.state.elements[e];if(t.parentWrapper&&t.parentWrapper.componentDefinition&&"switch-container"===t.parentWrapper.componentDefinition.name){const n=t.parentWrapper.config.props.children.indexOf(e);t.parentWrapper.setPropsConfig(null,{"props.states":{current:t.parentWrapper.config.props.states.list[n],list:t.parentWrapper.config.props.states.list}})}Qe.selectElements([this.state.elements[e].el],!0)}buildElementTree(e){const t=[],n=Object.values(e).filter((e=>e.isRoot()));for(const i of n)t.push(this.getElementTree(i,e));return t}getElementTree(e,t,n){const i={key:e.id,label:e.config.props.text||e.config.title,value:e.id,tags:n,element:e,children:[]};if(e.componentDefinition){if(e.componentDefinition.icon)if(N[e.componentDefinition.icon]){const t=N[e.componentDefinition.icon];i.icon=a().createElement(t,null)}else e.componentDefinition.icon.startsWith("")&&(i.icon=a().createElement("i",{style:{fontSize:"16px",marginRight:"5px"},className:e.componentDefinition.icon}));const n=e.componentDefinition.props.filter((e=>"children"===e.type));if(n.length)for(const a of n)if(e.config.props[a.name]&&e.config.props[a.name].length)for(let o=0;o<e.config.props[a.name].length;o++){const r=e.config.props[a.name][o];if(r&&t[r])if("switch-container"===e.componentDefinition.name){t[r].parent=e;const n=e.config.props.states.list[o];i.children.push(this.getElementTree(t[r],t,[n]))}else i.children.push(this.getElementTree(t[r],t,[n.label]))}const o=e.componentDefinition.props.filter((e=>"slot"===e.type));if(o.length)for(const a of o)e.config.props[a.name]&&t[e.config.props[a.name]]&&i.children.push(this.getElementTree(t[e.config.props[a.name]],t,n.label))}return i}toggleLock=e=>{const t=!e.element.config.style.locked;e.element.setPropsConfig({},{"style.locked":t}),this.setState({elements:{...this.state.elements}}),Qe.selectElements([e.element.el])};toggleVisible=e=>{const t=!e.element.config.style.visible;t||Qe.selectElements([]),e.element.setPropsConfig({},{"style.visible":t}),t&&Qe.selectElements([e.element.el]),this.setState({elements:{...this.state.elements}})};renderFullLabel=(e,t)=>{const{toggleLock:n,toggleVisible:i}=this;return a().createElement("div",{className:"tree-label"},a().createElement(p.Space,{className:"label-content"},a().createElement(ln,{className:"label-text"},e||t.key),t.tags&&t.tags.map((e=>a().createElement(p.Tag,{size:"small",color:"amber",key:e}," ",e," ")))),a().createElement(p.Space,{spacing:0},a().createElement(p.Button,{className:t.element.config.style.locked?"":"hover-show",size:"small",theme:"borderless",type:"tertiary",onClick:()=>{n(t)},icon:t.element.config.style.locked?a().createElement(on,null):a().createElement(an,null)}),a().createElement(p.Button,{className:t.element.config.style.visible?"hover-show":"",size:"small",theme:"borderless",type:"tertiary",onClick:()=>{i(t)},icon:t.element.config.style.visible?a().createElement(rn,null):a().createElement(sn,null)})))};render(){const{selected:e,elements:t}=this.state,{renderFullLabel:n}=this,i=this.buildElementTree(t);return a().createElement(p.Tree,{style:{height:"100%",overflow:"auto"},value:e,renderLabel:n,onChange:e=>{this.onNodeSelected(e)},treeData:i})}}const pn=cn;function dn(){return dn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},dn.apply(this,arguments)}class mn extends a().Component{constructor(){super(),this.state={show:!0}}render(){return a().createElement(T,dn({right:"10px",bottom:"10px",width:"300px",height:"240px"},this.props),a().createElement(pn,null))}}class hn{constructor(){this.packageNames=["ridge-basic","ridge-container","ridge-bootstrap","ridge-bulma","ridge-echarts"],this.packagesDetails=[]}async getBuildInPackages(){return this.packagesDetails.length||await this.loadPackages(),this.packagesDetails}async loadPackages(){const e=[];for(const t of this.packageNames)e.push(await et.loader.getPackageJSON(t));return await Promise.allSettled(e),this.packagesDetails=e.filter((e=>null!=e)),this.packagesDetails}}const gn=n(6292)("ridge:component-panel"),{Text:un}=p.Typography;class bn extends a().Component{constructor(){super(),this.el=document.createElement("div"),this.ref=a().createRef(),this.packageManager=new hn,this.state={packages:[],currentPackage:"ridge-basic",packageListingLoaded:!1}}static contextType=z;renderPackageComponents(){et.loader.loadPackageAndComponents(this.state.currentPackage).then((e=>{this.setState({packages:this.state.packages.map((t=>t.name===this.state.currentPackage?e:t))})}))}tabChange(e){this.setState({currentPackage:e},(()=>{this.renderPackageComponents()}))}componentDidMount(){this.state.packageListingLoaded||(gn("Request package listing"),this.packageManager.getBuildInPackages().then((e=>{gn("App Package Loaded"),this.setState({currentPackage:this.packageManager.packageNames[0],packages:e,packageListingLoaded:!0},(()=>{this.renderPackageComponents()}))})))}dragStart(e,t){window.dragComponent=t,e.dataTransfer.setData("text/plain",JSON.stringify(t));const n=new window.Image;n.src=t.icon,e.dataTransfer.setDragImage(n,60,60)}getFilteredComponents(e){return e?this.context?e.filter((e=>(e.title||e.label).indexOf(this.context)>-1)):e.filter((e=>null!=e)):[]}renderComponentIcon(e){if(!e)return null;if(e.startsWith("data:image"))return a().createElement("div",{className:"component-icon",style:{"-webkit-mask-image":`url("${decodeURI(e)}")`,"mask-image":`url("${decodeURI(e)}")`}});if(e.indexOf(" ")>-1)return a().createElement("div",{className:e+" font-icon"});if(N[e]){const t=N[e];return a().createElement(t,{style:{color:"var( --semi-color-secondary)"}})}}render(){const{packageListingLoaded:e,packages:t,currentPackage:n}=this.state,{dragStart:i,renderComponentIcon:o}=this,r=this.tabChange.bind(this);return a().createElement(a().Fragment,null,!e&&a().createElement(p.Spin,{size:"large"}),a().createElement(p.Tabs,{type:"button",size:"small",tabPosition:"left",activeKey:n,onChange:e=>r(e)},t&&t.map((e=>{const t=this.getFilteredComponents(e.componentLoaded).sort(((e,t)=>(e.order||10)-(t.order||10)));let n=a().createElement("div",{className:"package-icon "+e.icon});return e.icon&&e.icon.startsWith("data:image")&&(n=a().createElement("div",{className:"package-icon"},a().createElement("img",{src:e.icon}))),a().createElement(p.TabPane,{style:{padding:"4px"},className:"tab-title",collapsible:!0,tab:n,key:e.name,itemKey:e.name},t&&a().createElement(p.List,{grid:{gutter:6,span:8},dataSource:t,renderItem:t=>a().createElement(p.List.Item,null,a().createElement("div",{draggable:!0,onDragStart:n=>i(n,Object.assign(t,{componentPath:e.name+"/"+t.path})),className:"component-container"},o(t.icon),a().createElement(un,null,t.title||t.label," ")))}),!t&&a().createElement(p.Spin,{size:"large"}))}))))}}const fn=bn;var yn=n(5900),vn={};function wn(){return wn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wn.apply(this,arguments)}vn.styleTagTransform=x(),vn.setAttributes=y(),vn.insert=b().bind(null,"head"),vn.domAPI=g(),vn.insertStyleElement=w(),m()(yn.Z,vn),yn.Z&&yn.Z.locals&&yn.Z.locals;class En extends a().Component{render(){return a().createElement(T,wn({},this.props,{className:"component-panel"}),a().createElement(fn,null))}}const xn=En;var kn=n(49),Sn={};Sn.styleTagTransform=x(),Sn.setAttributes=y(),Sn.insert=b().bind(null,"head"),Sn.domAPI=g(),Sn.insertStyleElement=w(),m()(kn.Z,Sn),kn.Z&&kn.Z.locals&&kn.Z.locals;var Cn=n(7117),Pn=n(5174);const Nn=({value:e,type:t,visible:n,onChange:o,onClose:r})=>{const s=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(n){let n=null;"text/css"===t&&(n=(0,Pn.iv)()),"text/javascript"===t&&(n=(0,Cn.eJ)()),s.current.editorView=new ct.tk({doc:e,extensions:[pt.Xy,n,(0,ct.jH)({position:"absolute"})],parent:s.current})}return()=>{s.current.editorView&&s.current.editorView.destroy()}}),[n]),a().createElement(p.Modal,{closeOnEsc:!1,maskClosable:!1,title:"代码编辑",width:"80%",height:"80%",bodyStyle:{height:"calc(100% - 150px)"},visible:n,onOk:()=>{const e=s.current.editorView.state.doc.toString();o(e)},onCancel:r},a().createElement("div",{style:{border:"1px solid var(--semi-color-border)",overflow:"auto",height:"100%",width:"100%"},className:"code-editor-container",ref:s}))},In=s()("ridge:file"),{Text:Ln}=p.Typography,On="image/*,video/*,audio/*,.woff,.json,.css,.js";class zn extends a().Component{constructor(){super(),this.ref=a().createRef(),this.state={currentOpenId:null,imagePreviewVisible:!1,imagePreviewSrc:null,treeData:null,expandedKeys:[],selected:null,currentParent:-1,currentSelectedNode:null,createDialogShow:!1,isCreateFile:!1,currentEditKey:null,currentEditFileName:"",currentEditValid:!0,codeEditNodeId:null,codeEditType:"",codeEditText:"",codeEditVisible:!1,exportToastId:null}}static contextType=z;componentDidMount(){it(Te,(e=>{Ce(e,(e=>{e.mimeType&&("application/font-woff"===e.mimeType?e.icon=a().createElement(N.IconFont,{style:{color:"var(--semi-color-text-2)"}}):e.mimeType.indexOf("audio")>-1?e.icon=a().createElement(N.IconMusic,{style:{color:"var(--semi-color-text-2)"}}):e.dataUrl?e.icon=a().createElement(p.Popover,{showArrow:!0,content:a().createElement("img",{className:"image-full",src:e.dataUrl})},a().createElement("img",{className:"icon-image",src:e.dataUrl})):e.icon=a().createElement(N.IconBriefStroked,{style:{color:"var(--semi-color-text-2)"}})),"directory"===e.type&&(e.icon=a().createElement(N.IconFolder,{style:{color:"var(--semi-color-text-2)"}}))})),this.setState({treeData:e})})),it(ze,(()=>{this.setState({currentOpenId:null})}))}selectNode(e){this.setState({currentSelectedNode:e,selected:e.key})}getCurrentDir(){return this.state.currentSelectedNode?"directory"===this.state.currentSelectedNode.type?this.state.currentSelectedNode.key:this.state.currentSelectedNode.parent:-1}getCurrentSiblings(){const{currentEditKey:e}=this.state;return e?this.state.currentSelectedNode&&this.state.currentSelectedNode.parentNode?this.state.currentSelectedNode.parentNode.children:this.state.treeData:this.state.currentSelectedNode&&this.state.currentSelectedNode.children?this.state.currentSelectedNode.children:this.state.treeData}editLabelCheck=(e,t)=>{const n=K()(e);this.setState({currentEditFileName:n}),""===n?this.setState({currentEditValid:!1}):0===this.getCurrentSiblings().filter((e=>e.label===n&&e.key!==t)).length?this.setState({currentEditValid:!0}):this.setState({currentEditValid:!1})};exportPage=e=>{In("导出页面",e),et.backUpService.exportFileArchive(e.key)};confirmRename=async()=>{if(this.state.currentEditValid){const{appService:e}=et;await e.rename(this.state.currentEditKey,this.state.currentEditFileName),this.state.currentOpenId===this.state.currentEditKey&&nt(Fe,this.state.currentEditFileName),this.setState({createDialogShow:!1,currentEditFileName:"",currentEditValid:!0,currentEditKey:null}),p.Toast.success("文件已经重新命名为："+this.state.currentEditFileName)}};createDirectory=async e=>{const{appService:t}=et;await t.createDirectory(e||this.getCurrentDir())};remove=async e=>{const{appService:t}=et;this.state.currentOpenId&&(e.key===this.state.currentOpenId||"directory"===e.type&&await t.isParent(e.key,this.state.currentOpenId))&&nt(ze),this.state.currentSelectedNode&&this.state.currentSelectedNode.id===e.key&&this.setState({currentSelectedNode:null}),await t.trash(e.key),this.setState({currentParent:-1}),p.Toast.success("文件已经删除")};showCreateDialog=(e,t)=>{this.setState({currentEditKey:null,currentEditFileName:"",createDialogShow:!0,createFileType:t,isCreateFile:e})};confirmCreateFile=async()=>{const{appService:e}=et,{isCreateFile:t,createFileType:n}=this.state;t?"js"===n?await e.createFile(this.state.currentParent,this.state.currentEditFileName,ve("\nexport default {\n  state: () => {\n    return {\n      name: ''\n    }\n  },\n  getters: {\n    hello: (state) => {\n      return 'Hello ' + state.name\n    }\n  },\n  actions: {\n  }\n}","text/javascript")):"css"===n?await e.createFile(this.state.currentParent,this.state.currentEditFileName,ve("","text/css")):await e.createPage(this.state.currentParent,this.state.currentEditFileName):await e.createDirectory(this.state.currentParent,this.state.currentEditFileName),this.setState({createDialogShow:!1})};createPage=async e=>{const{appService:t}=et,n=await t.createPage(e||this.getCurrentDir());this.setState({currentEditKey:n.id,currentEditValue:n.name,currentEditValid:!0}),p.Toast.success("文件创建完成")};rename=async e=>{this.setState({createDialogShow:!0,currentParent:e.parent,currentEditKey:e.key,currentEditFileName:e.label,currentEditValid:!0})};copy=async e=>{const{appService:t}=et;await t.copy(e.key),p.Toast.success("文件复制完成")};open=async e=>{if("page"===e.type){if(this.state.currentOpenId===e.key)return;nt(Me,e.key),this.setState({currentOpenId:e.key})}else e.mimeType&&e.mimeType.indexOf("image/")>-1?this.setState({imagePreviewSrc:e.dataUrl,imagePreviewVisible:!0}):!e.mimeType||"text/css"!==e.mimeType&&"text/javascript"!==e.mimeType||this.setState({codeEditType:e.mimeType,codeEditNodeId:e.key,codeEditText:e.textContent,codeEditVisible:!0})};async completeCodeEdit(e){const{codeEditNodeId:t,codeEditType:n}=this.state;await Xe.updateFileContent(t,e,n),et.pageElementManager&&(et.pageElementManager.updateImportedStyle(),et.pageElementManager.updateImportedJS()),this.setState({codeEditVisible:!1})}move=async(e,t,n)=>{let i=-1;i=!1===n&&"directory"===e.type?e.key:e.parent;const{appService:a}=et;await a.move(t.key,i)||p.Toast.warning({content:"目录移动错误：存在同名的文件",duration:3})};fileUpload=async(e,t)=>{const{appService:n}=window.Ridge,i=[];for(const a of e)await n.createFile(t||this.getCurrentDir(),a.name,a)||i.push(a);p.Toast.success("文件上传完成"),i.length&&p.Toast.warning({content:"文件添加错误：存在相同名称文件",duration:3})};renderFullLabel=(e,t)=>{const{currentEditKey:n,currentEditValid:i,currentOpenId:o}=this.state,r=[];return"directory"===t.type?(r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconBriefStroked,null),onClick:()=>{this.setState({expandedKeys:[t.key,...this.state.expandedKeys],currentParent:t.key}),this.showCreateDialog(!0)}},"创建空页面")),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconFolderStroked,null),onClick:()=>{this.setState({expandedKeys:[t.key,...this.state.expandedKeys],currentParent:t.key}),this.showCreateDialog(!1)}},"创建子目录")),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconCloudUploadStroked,null)},a().createElement(p.Upload,{multiple:!0,showUploadList:!1,uploadTrigger:"custom",onFileChange:e=>{this.fileUpload(e,t.key)},accept:On},"上传文件"))),r.push(a().createElement(p.Dropdown.Divider,null)),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement("i",{class:"bi bi-filetype-js"}),onClick:()=>{this.setState({expandedKeys:[t.key,...this.state.expandedKeys],currentParent:t.key}),this.showCreateDialog(!0,"js")}},"创建程序文件")),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement("i",{class:"bi bi-filetype-css"}),onClick:()=>{this.setState({expandedKeys:[t.key,...this.state.expandedKeys],currentParent:t.key}),this.showCreateDialog(!0,"css")}},"创建样式文件"))):(r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconFolderOpen,null),onClick:()=>{this.open(t)}},"打开")),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconCopy,null),onClick:()=>{this.copy(t)}},"复制页面")),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconExport,null),onClick:()=>{this.exportPage(t)}},"导出"))),r.push(a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconEdit,null),onClick:()=>{this.rename(t)}},"重命名")),r.push(a().createElement(p.Dropdown.Divider,null)),r.push(a().createElement(p.Dropdown.Item,{type:"danger",icon:a().createElement(N.IconDeleteStroked,null),onClick:()=>{this.remove(t)}},"删除")),a().createElement("div",{className:"tree-label"+(o===t.key?" opened":"")},a().createElement(Ln,{ellipsis:{showTooltip:!0},style:{width:"calc(100% - 48px)"},className:"label-content"},e),a().createElement(p.Dropdown,{trigger:"click",showTick:!0,render:a().createElement(p.Dropdown.Menu,null,r)},a().createElement(p.Button,{className:"more-button",size:"small",theme:"borderless",type:"tertiary",icon:a().createElement(N.IconMoreStroked,{rotate:90})})))};renderCreateModal=()=>{const{state:e,confirmCreateFile:t,confirmRename:n}=this,{createDialogShow:i,isCreateFile:o,currentEditKey:r,currentEditValid:s,currentParent:l,currentSelectedNode:c,currentEditFileName:d}=e;let m="/";return r?c.parentNode&&(m=c.parentNode.path):c&&("directory"===c.type?m=c.path:c.parentNode&&(m=c.parentNode.path)),a().createElement(p.Modal,{title:r?"重命名":o?"创建新的页面":"新增目录",visible:i,onOk:()=>{this.state.currentEditValid&&(r?n():t())},onCancel:()=>{this.setState({createDialogShow:!1})}},a().createElement(p.Form,{labelPosition:"left",labelAlign:"right",labelWidth:80},a().createElement(p.Form.Input,{disabled:!0,label:"所在目录",initValue:m}),a().createElement(p.Form.Input,{initValue:d,validateStatus:s?"":"error",label:"名称",onChange:e=>{this.editLabelCheck(e,r)}})))};async exportApp(){if(this.state.exportToastId)return;const e=p.Toast.info({content:"正在导出应用，请稍侯...",duration:0,onClose:()=>{this.setState({exportToastId:null})}});this.setState({exportToastId:e}),await et.appService.exportAppArchive(),p.Toast.close(e),this.setState({exportToastId:null})}renderAppDropDown(){return a().createElement(p.Dropdown,{trigger:"click",render:a().createElement(p.Dropdown.Menu,null,a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconExport,null),onClick:()=>{this.exportApp()}},"导出应用"),a().createElement(p.Dropdown.Item,{icon:a().createElement(N.IconImport,null)},a().createElement(p.Upload,{showUploadList:!1,uploadTrigger:"custom",onFileChange:e=>{p.Modal.confirm({zIndex:10001,title:"确认导入应用",content:"导入应用会首先覆盖现有应用，如果有需要的工作，建议您首先导出备份。 是否继续?",onOk:()=>{et.backUpService.importAppArchive(e[0]).then((e=>{p.Toast.info("成功导入应用，共"+e.length+"个文件"),nt(ze)}))}})},accept:".zip"},"导入应用")),a().createElement(p.Dropdown.Item,{disabled:!0},"Menu Item 3"))},a().createElement(p.Button,{size:"samll",theme:"borderless",type:"tertiary",icon:a().createElement(N.IconSetting,null)}))}render(){const{renderFullLabel:e,showCreateDialog:t,renderCreateModal:n,state:i,context:o}=this,{treeData:r,currentSelectedNode:s,expandedKeys:l,imagePreviewSrc:c,imagePreviewVisible:d,codeEditText:m,codeEditVisible:h,codeEditType:g}=i;return a().createElement(a().Fragment,null,a().createElement("div",{className:"file-actions",style:{display:null==o?"":"none"}},a().createElement("div",{className:"align-right"},a().createElement(p.Button,{icon:a().createElement(N.IconBriefStroked,null),size:"small",theme:"borderless",type:"tertiary",onClick:()=>t(!0)}),a().createElement(p.Upload,{multiple:!0,showUploadList:!1,uploadTrigger:"custom",onFileChange:e=>{this.fileUpload(e)},accept:On},a().createElement(p.Button,{icon:a().createElement(N.IconCloudUploadStroked,null),size:"small",theme:"borderless",type:"tertiary"})),a().createElement(p.Button,{icon:a().createElement(N.IconFolderStroked,null),size:"small",theme:"borderless",type:"tertiary",onClick:()=>t(!1)}))),a().createElement(p.ImagePreview,{src:c,visible:d,onVisibleChange:()=>{this.setState({imagePreviewVisible:!1})}}),a().createElement(Nn,{value:m,visible:h,lang:"css",onChange:e=>{this.completeCodeEdit(e)},type:g,onClose:()=>{this.setState({codeEditVisible:!1})}}),n(),r&&a().createElement(p.Tree,{className:"file-tree",style:{display:null==o?"":"none"},directory:!0,draggable:!0,expandedKeys:l,renderLabel:e,value:s,treeData:r,onDrop:({node:e,dragNode:t,dropPosition:n,dropToGap:i})=>{this.move(e,t,i)},onExpand:e=>{this.setState({expandedKeys:e})},onDoubleClick:(e,t)=>{this.open(t)},onChangeWithObject:!0,onChange:e=>{this.selectNode(e)}}),!r&&a().createElement("div",{className:"tree-loading"},a().createElement(p.Spin,{size:"middle"})),null!=o&&a().createElement("div",null,"搜索功能暂时未提供"),this.renderAppDropDown())}}const Tn=zn;class Dn extends a().Component{render(){return a().createElement(T,this.props,a().createElement(Tn,null))}}const Fn=Dn;var Mn=n(9058),jn={};jn.styleTagTransform=x(),jn.setAttributes=y(),jn.insert=b().bind(null,"head"),jn.domAPI=g(),jn.insertStyleElement=w(),m()(Mn.Z,jn),Mn.Z&&Mn.Z.locals&&Mn.Z.locals;const{Column:An}=p.Table;var Rn=n(1959),Bn={};Bn.styleTagTransform=x(),Bn.setAttributes=y(),Bn.insert=b().bind(null,"head"),Bn.domAPI=g(),Bn.insertStyleElement=w(),m()(Rn.Z,Bn),Rn.Z&&Rn.Z.locals&&Rn.Z.locals;const Un=e=>{const{modeRun:t,currentPageId:n,visible:i,toggleContainerMask:o,zoom:r,zoomChange:s,toggoleRunMode:l,closeCurrentPage:c,containerMask:d}=e;return a().createElement("div",{className:"menu-bar",style:{display:i?"":"none"}},a().createElement(p.Space,{className:"bar-content"},a().createElement(p.Dropdown,{trigger:"click",position:"top",render:a().createElement(p.Dropdown.Menu,null,a().createElement(p.Dropdown.Item,{onClick:()=>s(.3)},"30%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(.5)},"50%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(.6)},"60%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(.7)},"70%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(.8)},"80%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(.9)},"90%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(1)},"100%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(1.2)},"120%"),a().createElement(p.Dropdown.Item,{onClick:()=>s(1.5)},"150%"))},a().createElement(p.Button,{style:{width:48},theme:"borderless",type:"tertiary"},Math.floor(100*r),"%")),a().createElement("div",{style:{width:"120px"}},a().createElement(p.Slider,{min:10,max:200,value:100*r,onChange:e=>s(e/100),showBoundary:!1,size:"small"})),a().createElement(p.Divider,{layout:"vertical"}),a().createElement(p.Button,{icon:a().createElement(N.IconGridView1,null),size:"small",type:d?"primary":"tertiary",theme:d?"solid":"borderless",onClick:o}),a().createElement(p.Button,{type:"tertiary",theme:"borderless",icon:a().createElement("i",{class:"bi bi-x-lg"}),onClick:c},"关闭"),a().createElement(p.Button,{disabled:!n,type:t?"primary":"tertiary",theme:t?"solid":"borderless",icon:t?a().createElement(N.IconPause,null):a().createElement(N.IconPlay,null),onClick:l},"预览")))};var Vn=n(6726),Wn=n.n(Vn);class Zn{async setPropsConfig(e){const{appService:t}=window.Ridge;if(e.componentDefinition&&e.componentDefinition.props){const n=e.componentDefinition.props.filter((e=>"image"===e.type));for(const i of n)e.config.props[i.name]?e.properties[i.name]=await t.getDataUrl(e.config.props[i.name]):e.properties[i.name]="",console.log("update by",e.config.props[i.name],e.properties[i.name])}}unmount(e){}}var qn=n(1670),Jn={};Jn.styleTagTransform=x(),Jn.setAttributes=y(),Jn.insert=b().bind(null,"head"),Jn.domAPI=g(),Jn.insertStyleElement=w(),m()(qn.Z,Jn),qn.Z&&qn.Z.locals&&qn.Z.locals;const $n=s()("ridge:editor");class Yn extends a().Component{constructor(e){super(e),this.state={componentPanelVisible:!0,propPanelVisible:!1,outlinePanelVisible:!1,appFilePanelVisible:!0,menuBarVisible:!1,modeRun:!1,zoom:1,containerMask:!0,currentPageId:null,panelPosition:Ze},window.screen.width<=1366&&(this.state.panelPosition=qe),this.debouncedSaveUpdatePage=Wn()(this.saveCurrentPage,50),this.initialize()}initialize(){$n("editor initialize"),this.ridge=et,it("pageConfigChange",(e=>{this.pageElementManager.updatePageConfig(e),this.debouncedSaveUpdatePage()})),it(je,(({from:e,properties:t})=>{this.pageElementManager.updatePageConfig({properties:t}),this.debouncedSaveUpdatePage()})),it(Ue,(({el:e,values:t,field:n})=>{e.elementWrapper.setPropsConfig(t,n),n.title&&nt(Ae,{elements:this.pageElementManager.getPageElements()}),Qe.updateMovable(),this.debouncedSaveUpdatePage()})),it(Ve,(({el:e,values:t})=>{e.elementWrapper.setEventsConfig(t),this.debouncedSaveUpdatePage()})),it(We,(()=>{this.saveCurrentPage()})),it(Me,(async e=>{const t=await this.ridge.appService.getFile(e);"page"===t.type&&(this.pageElementManager&&(await this.saveCurrentPage(),this.pageElementManager.unmount()),Qe.enabled||Qe.enable(),this.loadPage(t),Qe.selectElements([]))})),it(ze,(()=>{this.saveCloseCurrentPage()})),this.saveTaskInterval=setInterval((()=>{this.saveCurrentPage()}),3e3)}async saveCurrentPage(){if(this.pageElementManager&&!this.state.modeRun){const e=this.pageElementManager.getPageJSON();this.pageConfig.content=e,$n("Save Page",this.pageConfig.id,e);try{await this.ridge.appService.savePageContent(this.pageConfig.id,e)}catch(e){console.error("save page error",e)}}}async saveCloseCurrentPage(){this.pageElementManager&&(this.saveCurrentPage(),Qe.disable(),this.pageElementManager.unmount(),this.pageElementManager=null,this.setState({currentPageId:null,outlinePanelVisible:!1,menuBarVisible:!1,propPanelVisible:!1}))}loadPage(e){$n("loadPage",e),this.setState({currentPageId:e.id,propPanelVisible:!0,menuBarVisible:!0,outlinePanelVisible:!0}),this.pageConfig=e,window.page=e;const{content:t}=this.pageConfig,n=Qe.fitToCenter(t.properties.width,t.properties.height,this.state.zoom);Qe.zoomBack=e=>{this.setState({zoom:e})},this.setState({zoom:n}),this.pageElementManager=this.ridge.createPageManager({id:e.id,...t},"edit"),this.pageElementManager.addDecorators("element",new Zn),this.pageElementManager.mount(document.querySelector(".viewport-container")),this.pageElementManager.onPageLoaded=()=>{nt(De,Object.assign(this.pageElementManager.pageConfig,{name:e.name,elements:this.pageElementManager.getPageElements()}))},Qe.setPageManager(this.pageElementManager),et.pageElementManager=this.pageElementManager}togglePanel(e){this.setState({[e]:!this.state[e]})}toggoleRunMode(){this.setState({modeRun:!this.state.modeRun},(async()=>{this.state.modeRun?(await this.saveCloseCurrentPage(),document.querySelector(".ridge-runtime").style.display="init",this.pageElementManager=this.ridge.loadPage(document.querySelector(".ridge-runtime"),this.pageConfig.content,"preview"),this.pageElementManager.addDecorators("element",new Zn)):(this.pageElementManager.unmount(),this.loadPage(this.pageConfig),document.querySelector(".ridge-runtime").style.display="none",Qe.enable())}))}componentDidMount(){Qe.init({workspaceEl:document.querySelector(".workspace"),viewPortEl:document.querySelector(".viewport-container")})}render(){const{state:e}=this,{componentPanelVisible:t,appFilePanelVisible:n,propPanelVisible:i,outlinePanelVisible:o,modeRun:r,zoom:s,panelPosition:l,containerMask:c,menuBarVisible:d,currentPageId:m}=e;return a().createElement(a().Fragment,null,a().createElement("div",{className:"workspace "+(c?"show-container":""),style:{display:r?"none":""}},a().createElement("div",{className:"viewport-container"}),a().createElement(Un,{containerMask:c,zoom:s,currentPageId:m,visible:d,toggleVisible:e=>{this.setState({[e]:!this.state[e]})},toggleContainerMask:()=>{this.setState({containerMask:!c})},closeCurrentPage:()=>{nt(ze)},toggoleRunMode:this.toggoleRunMode.bind(this),zoomChange:e=>{this.setState({zoom:e}),Qe.setZoom(e)}}),a().createElement(xn,{title:"组件",position:l.ADD,visible:!r&&t}),a().createElement(Fn,{title:"应用资源",position:l.LEFT_BOTTOM,visible:!r&&n}),a().createElement(mn,{title:"布局导航",position:l.DATA,visible:!r&&o}),a().createElement(nn,{position:l.PROP,visible:!r&&i})),a().createElement("div",{className:"ridge-runtime",style:{display:r?"":"none"}}),a().createElement("div",{style:{display:r?"":"none",position:"absolute",right:"10px",bottom:"10px",zIndex:10}},a().createElement(p.Button,{icon:a().createElement(N.IconExit,null),onClick:()=>{this.toggoleRunMode()}},"退出运行")))}}var Gn=n(2801),Kn={};Kn.styleTagTransform=x(),Kn.setAttributes=y(),Kn.insert=b().bind(null,"head"),Kn.domAPI=g(),Kn.insertStyleElement=w(),m()(Gn.Z,Kn),Gn.Z&&Gn.Z.locals&&Gn.Z.locals;const Hn=document.getElementById("root");Hn&&(0,o.s)(Hn).render(a().createElement(Yn,null))},4551:(e,t,n)=>{const i=n(4151),a=n(6292)("db:nedb");e.exports=class{constructor(e){this.filename=e,this.store=new i({filename:e,timestampData:!0,autoload:!0}),this.store.persistence.setAutocompactionInterval(144e5)}async compactDatafile(){await this.store.persistence.compactDatafile()}async insert(e){return a("insert",e),new Promise(((t,n)=>{this.store.insert(e,(function(e,i){e?n(e):t(i)}))}))}async update(e,t,n){return a("update",e,t),new Promise(((i,a)=>{let o=e;"string"==typeof e&&(o={_id:e}),this.store.update(o,t,n||{},(function(e,t){e?a(e):i(t)}))}))}async patch(e,t){return a("patch",e,t),"string"==typeof e?this.update({_id:e},{$set:t}):this.update(e,{$set:t})}async clean(){return a("clean"),this.filename,new Promise(((e,t)=>{this.store.remove({},{multi:!0},(function(n,i){n?t(n):e(i)}))}))}async remove(e){if(a("remove",e),"object"==typeof e){if(!Array.isArray(e))return this.doRemove(e);for(const t of e)await this.remove(t)}else if("string"==typeof e)return this.doRemove({_id:e})}async doRemove(e,t){return new Promise(((n,i)=>{this.store.remove(e,t||{multi:!0},(function(e,t){e?i(e):n(t)}))}))}async findOne(e){if("string"==typeof e)return new Promise(((t,n)=>{this.store.findOne({_id:e},(function(e,i){e?n(e):t(i)}))}));{const t=await this.find(e);return t.length>0?t[0]:null}}async find(e,{sort:t,projection:n,skip:i=0,limit:o=-1}={}){return a("db find",e,n),new Promise(((r,s)=>{let l=this.store.find(e);n&&(l=l.projection(n)),t&&(l=l.sort(t)),i&&(l=l.skip(i)),o>0&&(l=l.limit(o)),l.exec((function(e,t){e?s(e):(a("found",t),r(t))}))}))}async count(e){return a("count",e),new Promise(((t,n)=>{this.store.count(e,(function(e,i){e?n(e):t(i)}))}))}async exist(e){return a("exist",e),(await this.find(e,{limit:1})).length>0}async distinct(e,t){a("distinct",e,t);const n=await this.find(t);return Array.from(new Set(n.filter((t=>t[e])).map((t=>t[e]))))}}},7053:(e,t,n)=>{"use strict";n.r(t),n.d(t,{basename:()=>h,camelCase:()=>o.a,dirname:()=>m,extname:()=>g,formateDate:()=>d,nanoid:()=>p,trim:()=>s.a});var i=n(2155),a=n(7429),o=n.n(a),r=n(5663),s=n.n(r),l=n(7693),c=n.n(l);const p=(0,i.kP)("1234567890abcdefghijklmnopqrstuvwxyz",10),d=(e,t)=>{const n=e||(new Date).getTime();return c()(n).format(t||"YYYY-MM-DD HH:mm:ss")},m=e=>e.substring(0,e.lastIndexOf("/")),h=(e,t)=>{const n=e.substring(e.lastIndexOf("/")+1);return t?n.substring(0,n.lastIndexOf(t)):n},g=e=>e.substring(e.lastIndexOf("."))},8731:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,'.moveable-control {\n  width: 8px!important;\n  height: 8px!important;\n  border: 1px solid var(--semi-color-primary)!important;\n  box-sizing: border-box;\n  border-radius: 0!important;\n  background: #fff!important;\n  margin-top: -4px!important;\n  margin-left: -4px!important;\n  z-index: 10;\n}\n.moveable-control-box {\n  z-index: 100!important;\n}\n\n.moveable-line {\n  background: var(--semi-color-primary)!important;\n}\n\n.workspace-movable .moveable-control {\n  width: 18px!important;\n  height: 18px!important;\n  opacity: 0;\n}\n\n.workspace-movable .moveable-line {\n  opacity: 0;\n}\n\n.rCSwd26qe .moveable-line.moveable-vertical.moveable-bold {\n  width: 0.5px!important;\n  background-color: var(--semi-color-warning)!important;\n}\n.rCSwd26qe .moveable-line.moveable-horizontal.moveable-bold {\n  height: 1px!important;\n  background-color: var(--semi-color-warning)!important;\n}\n\n/*\n.rCSwd26qe {\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.rCSwd26qe .moveable-control-box {\n    z-index: 0;\n}\n.rCSwd26qe .moveable-line, .rCSwd26qe .moveable-control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.rCSwd26qe .moveable-control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.rCSwd26qe .moveable-padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.rCSwd26qe .moveable-line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.rCSwd26qe .moveable-line.moveable-edge {\n    z-index: 1;\n    background: transparent;\n}\n.rCSwd26qe .moveable-line.moveable-dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.rCSwd26qe .moveable-line.moveable-dashed.moveable-horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.rCSwd26qe .moveable-line.moveable-dashed.moveable-vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.rCSwd26qe .moveable-line.moveable-vertical {\n    transform: translateX(-50%);\n}\n.rCSwd26qe .moveable-line.moveable-horizontal {\n    transform: translateY(-50%);\n}\n.rCSwd26qe .moveable-line.moveable-vertical.moveable-bold {\n    width: 2px;\n}\n.rCSwd26qe .moveable-line.moveable-horizontal.moveable-bold {\n    height: 2px;\n}\n\n.rCSwd26qe .moveable-control.moveable-origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n\n.rCSwd26qe .moveable-direction[data-rotation="0"],  .moveable-view-control-rotation0 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(0deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="15"],  .moveable-view-control-rotation15 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(15deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="30"],  .moveable-view-control-rotation30 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(30deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="45"],  .moveable-view-control-rotation45 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(45deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="60"],  .moveable-view-control-rotation60 {\n\tcursor:nesw-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(60deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nesw-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="75"],  .moveable-view-control-rotation75 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(75deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="90"],  .moveable-view-control-rotation90 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(90deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="105"],  .moveable-view-control-rotation105 {\n\tcursor:ew-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(105deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ew-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="120"],  .moveable-view-control-rotation120 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(120deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="135"],  .moveable-view-control-rotation135 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(135deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="150"],  .moveable-view-control-rotation150 {\n\tcursor:nwse-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(150deg);transform-origin: 16px 16px"></path></svg>\') 16 16, nwse-resize;\n}\n\n\n.rCSwd26qe .moveable-direction[data-rotation="165"],  .moveable-view-control-rotation165 {\n\tcursor:ns-resize;cursor: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32px" height="32px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(165deg);transform-origin: 16px 16px"></path></svg>\') 16 16, ns-resize;\n}\n\n.rCSwd26qe .moveable-group {\n    z-index: -1;\n}\n.rCSwd26qe .moveable-area {\n    position: absolute;\n}\n.rCSwd26qe .moveable-area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.rCSwd26qe .moveable-area.moveable-avoid, .rCSwd26qe .moveable-area.moveable-pass {\n    pointer-events: none;\n}\n.rCSwd26qe .moveable-area.moveable-avoid+.moveable-area-pieces {\n    display: block;\n}\n.rCSwd26qe .moveable-area-piece {\n    position: absolute;\n}\n\n\n.rCSwd26qe {\n    --bounds-color: #d66;\n}\n.rCSwd26qe .moveable-guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.rCSwd26qe .moveable-guideline.moveable-bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.rCSwd26qe .moveable-guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.rCSwd26qe .moveable-guideline-group .moveable-size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.rCSwd26qe .moveable-guideline-group.moveable-horizontal .moveable-size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.rCSwd26qe .moveable-guideline-group.moveable-vertical .moveable-size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.rCSwd26qe .moveable-guideline.moveable-gap {\n    background: #f55;\n}\n.rCSwd26qe .moveable-size-value.moveable-gap {\n    color: #f55;\n}\n\n.rCSwd26qe .moveable-edge.moveable-edgeDraggable.moveable-line {\n    cursor: move;\n}\n.rCSwd26qe .moveable-rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n\n*/',""]);const s=r},1670:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,"html,\nbody {\n  overflow: hidden;\n  overflow-y: hidden!important;\n  user-select: none;\n  background-color: var(--semi-color-bg-0) !important;\n  width: 100%;\n  height: 100%;\n}\n#root {\n  height: 100%;\n  width: 100%;\n}\n:focus-visible {\n  outline: none;\n}\n::-webkit-scrollbar,\n::-webkit-scrollbar-thumb {\n  width: 12px;\n  height: 12px;\n  border-radius: 20px;\n  background-clip: padding-box;\n  border: 2px solid transparent;\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb:hover {\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb:active {\n  color: var(--semi-color-fill-2);\n}\n::-webkit-scrollbar-thumb {\n  box-shadow: inset 0 0 0 10px;\n}\n::-webkit-scrollbar-corner {\n  display: none;\n}\n.workspace {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: var(--semi-color-fill-1);\n}\n.workspace .viewport-container {\n  background-color: var(--semi-color-bg-0);\n}\n.workspace.show-container .ridge-container {\n  background-color: #97d5ff30;\n}\n.workspace.show-container .ridge-droppable {\n  background-color: #97d5ff30;\n}\n.status-drag-over {\n  z-index: 0;\n  background-color: var(--semi-color-primary-light-default);\n  border: 2px dashed var(--semi-color-primary);\n}\nslot {\n  position: relative;\n}\n.pop-code-editor-container {\n  width: 420px;\n  margin: 5px 0;\n  height: 240px;\n  overflow: auto;\n  position: relative;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n}\n.tree-label {\n  display: flex;\n}\n.tree-label .label-content {\n  flex: 1;\n  height: 24px;\n}\n.tree-label .label-action {\n  display: none;\n}\n.tree-label:hover .label-action {\n  display: initial;\n}\n.tree-label:hover .hover-show {\n  visibility: initial;\n}\n.tree-label .hover-show {\n  visibility: hidden;\n}\n",""]);const s=r},8042:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,"/**sketch拾取*/\n.sketch-picker {\n  border-radius: 5px;\n  box-shadow: none!important;\n  padding: 0!important;\n}\n/*输入边距Pop*/\n.input-padding-pop {\n  background-color: var(--semi-color-bg-0);\n  height: 100px;\n  width: 280px;\n}\n/*输入边距*/\n.input-padding {\n  position: relative;\n  top: 30px;\n  left: 10px;\n  margin: 0 40px 15px 25px;\n  border: 1px solid #ece;\n  height: 40px;\n  width: 200px;\n}\n.input-padding.position-border .order-0 {\n  left: 50%;\n  margin-left: -35px;\n  top: -12px;\n}\n.input-padding.position-border .order-1 {\n  left: 100%;\n  margin-left: -25px;\n  top: 5px;\n}\n.input-padding.position-border .order-2 {\n  left: 50%;\n  margin-left: -35px;\n  top: 28px;\n}\n.input-padding.position-border .order-3 {\n  left: 0;\n  margin-left: -25px;\n  top: 5px;\n}\n.input-padding.position-corner .order-0 {\n  left: 0;\n  margin-left: -25px;\n  top: -15px;\n}\n.input-padding.position-corner .order-1 {\n  left: 100%;\n  margin-left: -25px;\n  top: -15px;\n}\n.input-padding.position-corner .order-2 {\n  left: 100%;\n  margin-left: -25px;\n  top: 28px;\n}\n.input-padding.position-corner .order-3 {\n  left: 0;\n  margin-left: -25px;\n  top: 28px;\n}\n.input-padding .input-padding-number {\n  position: absolute;\n  background-color: var(--semi-color-bg-0);\n  width: 60px;\n}\n.event-edit {\n  width: 100%;\n  border-radius: 10px;\n  border: 1px solid var(--semi-color-border);\n}\n.object-form {\n  padding: 0 3px;\n  height: 100%;\n  overflow-y: overlay;\n}\n.object-form .semi-form-horizontal .semi-form-field:last-child {\n  margin-right: 2px;\n}\n.object-form .semi-form-horizontal .semi-form-field {\n  padding-right: 2px;\n}\n.object-form .semi-table-wrapper table thead {\n  display: none;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row .btn-code {\n  visibility: hidden;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row .btn-code.semi-button-primary {\n  visibility: visible;\n}\n.object-form .semi-table-wrapper table .semi-table-tbody > .semi-table-row:hover .btn-code {\n  visibility: visible;\n}\n.object-form .semi-table-wrapper table td.semi-table-row-cell {\n  padding: 4px 2px;\n}\n.object-form .semi-table-wrapper table td.semi-table-row-cell .semi-form-field {\n  padding: 0;\n}\n.object-form .semi-form .semi-form-field-label {\n  margin-bottom: 0;\n  margin-right: 0;\n  padding-top: 0px;\n  line-height: 26px;\n  padding-bottom: 0px;\n  font-weight: normal;\n  color: var(--semi-color-text-2);\n}\n.object-form .semi-form .field-block {\n  padding: 4px 0;\n}\n.object-form .semi-form .with-code-expr {\n  display: flex;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.btn-code {\n  visibility: hidden;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.btn-code.semi-button-primary {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr .semi-button-tertiary.is-open {\n  visibility: initial;\n}\n.object-form .semi-form .with-code-expr:hover .semi-button-tertiary.btn-code {\n  visibility: initial;\n}\n.object-form .semi-form .semi-form-field-main > .semi-checkbox {\n  padding: 2px;\n}\n.object-form .semi-form .semi-divider_inner-text {\n  font-size: 14px;\n  font-weight: normal;\n  color: var(--semi-color-text-1);\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType {\n  padding-top: 0;\n  padding-bottom: 0;\n  gap: 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType .semi-checkbox {\n  padding: 2px 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-cardType .semi-checkbox .semi-checkbox-addon {\n  font-weight: normal;\n}\n.object-form .semi-form .semi-form-field .semi-radio-addon-buttonRadio-small {\n  padding: 2px 4px;\n}\n.object-form .semi-form .semi-form-field .semi-checkboxGroup-horizontal-pureCardType .semi-checkbox {\n  column-gap: 0;\n  align-items: center;\n  padding: 2px 5px;\n}\n.object-form .state-list-edit {\n  display: flex;\n}\n.object-form .state-list-edit .state-list {\n  flex: 1;\n}\n.object-form .state-list-edit .state-list .list-item {\n  display: flex;\n  align-items: center;\n  box-sizing: border-box;\n}\n.object-form .state-list-edit .state-list .list-item:hover {\n  background-color: var(--semi-color-fill-1);\n}\n.object-form .state-list-edit .state-list .list-item.is-current {\n  border: 1px solid var(--semi-color-info-light-active);\n  background-color: var(--semi-color-info-light-default);\n}\n.object-form .state-list-edit .state-list .list-item .state-name {\n  padding: 0 5px;\n}\n.object-form .background-edit {\n  display: flex;\n}\n.object-form .background-edit .color-list {\n  flex: 1;\n}\n.object-form .semi-input-number.digit2 {\n  width: 46px;\n}\n.object-form .semi-input-wrapper .semi-input {\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.object-form .semi-input-wrapper .semi-input-append {\n  padding: 0 5px;\n}\n.object-form .semi-input-textarea-wrapper .semi-input-textarea {\n  padding: 0;\n  padding-left: 6px;\n  padding-right: 6px;\n}\n.object-form .semi-input-number-suffix-btns {\n  margin-left: 1px;\n}\n.object-form .picker-button {\n  font-size: 20px;\n  width: 21px;\n  cursor: pointer;\n}\n.pop-icon-container .icon-list {\n  width: 420px;\n  height: 330px;\n  overflow: auto;\n  display: flex;\n  flex-wrap: wrap;\n  gap: 5px;\n}\n.pop-icon-container .icon-list i {\n  cursor: pointer;\n  color: var(--semi-color-tertiary-hover);\n  padding: 5px;\n  width: 40px;\n  height: 40px;\n  font-size: 24px;\n}\n.pop-icon-container .icon-list i:hover {\n  color: var(--semi-color-primary-hover);\n}\n.series-table-edit {\n  border: 1px solid var(--semi-color-border);\n  border-collapse: collapse;\n  font-size: 14px;\n  border-right: none;\n  border-bottom: none;\n}\n.series-table-edit th {\n  background-color: var(--semi-color-fill-1);\n}\n.series-table-edit th:nth-child(1),\n.series-table-edit td:nth-child(1),\n.series-table-edit th.column-plus {\n  background-color: var(--semi-color-fill-1);\n  width: 28px;\n  min-width: 28px;\n}\n.series-table-edit td.row-delete {\n  padding: 0 5px;\n  width: 28px;\n  min-width: 28px;\n  line-height: 14px;\n  color: var(--semi-color-danger);\n  border: none;\n  display: none;\n}\n.series-table-edit td.column-delete {\n  line-height: 14px;\n  cursor: pointer;\n  color: var(--semi-color-danger);\n}\n.series-table-edit tr:hover td.row-delete {\n  width: 28px;\n  border: none;\n  min-width: 28px;\n  cursor: pointer;\n  display: table-cell;\n}\n.series-table-edit td,\n.series-table-edit th {\n  border: 1px solid var(--semi-color-border);\n  padding: 0.1rem 0.5rem;\n  vertical-align: middle;\n  min-width: 60px;\n}\n.series-table-edit th.column-plus,\n.series-table-edit td.row-plus {\n  cursor: pointer;\n}\n.series-table-edit th.column-plus:hover,\n.series-table-edit td.row-plus:hover {\n  background-color: var(--semi-color-fill-0);\n}\n",""]);const s=r},9058:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,".setting-content {\n  width: 720px;\n  height: 540px;\n}\n.app-backup .button-bar {\n  display: flex;\n  gap: 10px;\n}\n.app-backup .button-bar .create {\n  display: flex;\n  width: 360px;\n}\n.app-backup .backup-history {\n  margin-top: 10px;\n  height: 580px;\n  overflow: auto;\n}\n",""]);const s=r},1959:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,".menu-bar {\n  position: absolute;\n  left: 5px;\n  right: 5px;\n  bottom: 5px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.menu-bar .bar-content {\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 8px;\n  border-radius: 8px;\n  z-index: 101;\n}\n.menu-bar .semi-slider-handle {\n  width: 16px;\n  height: 16px;\n  margin-top: 8px;\n}\n",""]);const s=r},5900:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,".component-panel .package-icon {\n  width: 22px;\n  height: 22px;\n  font-size: 18px;\n  text-align: center;\n}\n.component-panel .package-icon img {\n  object-fit: contain;\n  width: 22px;\n  height: 22px;\n}\n.component-panel .semi-tabs-bar-left .semi-tabs-tab {\n  padding: 6px;\n}\n.component-panel .component-container {\n  margin: 5px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  width: 100%;\n  border-radius: 8px;\n  height: 70px;\n  background-color: var(--semi-color-tertiary-light-default);\n  cursor: pointer;\n}\n.component-panel .component-container:hover {\n  background-color: var(--semi-color-primary-light-hover);\n}\n.component-panel .component-container i {\n  width: 36px;\n  height: 36px;\n}\n.component-panel .component-container .semi-icon {\n  width: 28px;\n  height: 28px;\n  margin-top: 5px;\n  margin-bottom: 3px;\n}\n.component-panel .component-container .semi-icon svg {\n  width: 100%;\n  height: 100%;\n}\n.component-panel .component-container .component-icon {\n  width: 36px;\n  height: 36px;\n  -webkit-mask-size: 36px auto;\n  background: linear-gradient(145deg, #8cb8ff, #1c85ff);\n  background-size: cover;\n  background-repeat: no-repeat;\n}\n.component-panel .component-container .font-icon {\n  font-size: 28px;\n  padding-top: 6px;\n  height: 40px;\n  text-align: center;\n  color: var(--semi-color-secondary);\n}\n.component-add-panel .package-tab {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  box-sizing: border-box;\n  padding: 0 2px;\n}\n.component-add-panel .semi-tabs-bar-button .semi-tabs-tab {\n  padding: 8px 3px;\n}\n.component-add-panel .package-tab img {\n  width: 24px;\n  height: 24px;\n}\n",""]);const s=r},9299:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o),s=n(1678),l=n.n(s),c=new URL(n(6801),n.b),p=r()(a()),d=l()(c);p.push([e.id,`.app-image-list {\n  display: grid;\n  grid-template-columns: repeat(6, 80px);\n  grid-template-rows: repeat(6, 80px);\n  grid-row-gap: 6px;\n  grid-column-gap: 6px;\n}\n.app-image-list .image-item .image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  background-image: url(${d});\n  background-color: #f2f2f2;\n  width: 80px;\n  height: 80px;\n}\n.app-image-list .image-item .image-wrapper img {\n  cursor: pointer;\n  width: 64px;\n  object-fit: contain;\n  height: 64px;\n}\n.app-image-list .image-item .image-wrapper .semi-typography {\n  display: none;\n  overflow: hidden;\n  height: 20px;\n}\n.app-image-list .image-item .image-title {\n  width: 96px;\n  height: 23px;\n  text-align: center;\n  overflow: hidden;\n}\n.app-image-list-icon {\n  display: grid;\n  grid-template-columns: repeat(4, 96px);\n  grid-template-rows: repeat(4, 119px);\n  grid-row-gap: 8px;\n  grid-column-gap: 8px;\n  width: 420px;\n  height: 400px;\n  overflow: auto;\n}\n.app-image-list-icon .image-item .image-wrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 2px;\n  background-image: url(${d});\n  background-color: #f2f2f2;\n  width: 96px;\n  height: 96px;\n}\n.app-image-list-icon .image-item .image-wrapper img {\n  cursor: pointer;\n  width: 64px;\n  object-fit: contain;\n  height: 64px;\n}\n.app-image-list-icon .image-item .image-title {\n  width: 96px;\n  height: 23px;\n  text-align: center;\n  overflow: hidden;\n}\n`,""]);const m=p},49:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,".file-actions {\n  display: flex;\n  position: absolute;\n  z-index: 10;\n  right: 40px;\n  top: 6px;\n}\n.file-actions .align-right {\n  gap: 5px;\n  flex: 1;\n  display: flex;\n  justify-content: flex-end;\n}\n.tree-loading {\n  height: calc(100% - 26px);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n}\n.file-tree {\n  height: calc(100% - 26px);\n  overflow: auto;\n}\n.file-tree .icon-image {\n  width: 18px;\n  height: 18px;\n  margin-right: 8px;\n  object-fit: contain;\n}\n.file-tree .tree-label {\n  display: flex;\n  align-items: center;\n}\n.file-tree .tree-label.opened .label-content {\n  color: var(--semi-color-success);\n  font-weight: bold;\n}\n.file-tree .tree-label .label-content {\n  flex: 1;\n}\n.file-tree .tree-label .more-button {\n  visibility: hidden;\n  margin-right: 5px;\n}\n.file-tree .tree-label:hover .more-button {\n  visibility: inherit;\n}\n",""]);const s=r},4426:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,".movable-panel {\n  position: absolute;\n  background: var(--semi-color-bg-0);\n  border: 1px solid var(--semi-color-border);\n  padding: 4px;\n  border-radius: 5px;\n  z-index: 1000;\n}\n.movable-panel .semi-spin {\n  width: 100%;\n  height: 100%;\n}\n.movable-panel .title-bar {\n  position: relative;\n  height: 1px;\n  z-index: 1;\n  height: 32px;\n}\n.movable-panel .title-bar .title-text {\n  position: absolute;\n  left: 33px;\n  top: 5px;\n}\n.movable-panel .title-bar .toggle-search {\n  z-index: 101;\n  background-color: var(--semi-color-bg-2);\n}\n.movable-panel .title-bar .toggle-search .semi-input-suffix {\n  cursor: pointer;\n}\n.movable-panel .title-bar .icon-handle {\n  position: absolute;\n  top: 7px;\n  left: 7px;\n  cursor: move;\n}\n.movable-panel .title-bar .icon-search {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .title-bar .icon-close {\n  position: absolute;\n  top: 2px;\n  right: 5px;\n}\n.movable-panel .panel-content {\n  height: calc(100% - 32px);\n}\n.movable-panel .semi-tabs-top {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top.on-title .semi-tabs-bar {\n  position: absolute;\n  top: -30px;\n  left: 36px;\n  right: 10px;\n  z-index: 9;\n}\n.movable-panel .semi-tabs-top .semi-tabs-bar .semi-tabs-tab {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs-top .semi-tabs-bar .semi-tabs-tab.semi-tabs-tab-active {\n  padding: 3px 5px;\n}\n.movable-panel .semi-tabs-top .semi-tabs-content {\n  height: calc(100% - 24px);\n}\n.movable-panel .semi-tabs-top .semi-tabs-content .semi-tabs-pane {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top .semi-tabs-content .semi-tabs-pane .semi-tabs-pane-motion-overlay {\n  height: 100%;\n}\n.movable-panel .semi-tabs-top.on-title .semi-tabs-content {\n  height: 100%;\n}\n.movable-panel .semi-tabs-left {\n  height: 100%;\n}\n.movable-panel.open-search .semi-tabs.on-title .semi-tabs-bar {\n  display: none;\n}\n",""]);const s=r},2801:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,"html,\nbody,\ndiv,\nspan,\napplet,\nobject,\niframe,\nh1,\nh2,\nh3,\nh4,\nh5,\nh6,\np,\nblockquote,\npre,\na,\nabbr,\nacronym,\naddress,\nbig,\ncite,\ncode,\ndel,\ndfn,\nem,\nimg,\nins,\nkbd,\nq,\ns,\nsamp,\nsmall,\nstrike,\nstrong,\nsub,\nsup,\ntt,\nvar,\nb,\nu,\ni,\ncenter,\ndl,\ndt,\ndd,\nmenu,\nol,\nul,\nli,\nfieldset,\nform,\nlabel,\nlegend,\ntable,\ncaption,\ntbody,\ntfoot,\nthead,\ntr,\nth,\ntd,\narticle,\naside,\ncanvas,\ndetails,\nembed,\nfigure,\nfigcaption,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\noutput,\nruby,\nsection,\nsummary,\ntime,\nmark,\naudio,\nvideo {\n  margin: 0;\n  padding: 0;\n  border: 0;\n  font-size: 100%;\n  font: inherit;\n  vertical-align: baseline;\n  box-sizing: border-box;\n}\n/* HTML5 display-role reset for older browsers */\narticle,\naside,\ndetails,\nfigcaption,\nfigure,\nfooter,\nheader,\nhgroup,\nmain,\nmenu,\nnav,\nsection {\n  display: block;\n}\n/* HTML5 hidden-attribute fix for newer browsers */\n*[hidden] {\n  display: none;\n}\nbody {\n  line-height: 1;\n}\nmenu,\nol,\nul {\n  list-style: none;\n}\nblockquote,\nq {\n  quotes: none;\n}\nblockquote:before,\nblockquote:after,\nq:before,\nq:after {\n  content: '';\n  content: none;\n}\ntable {\n  border-collapse: collapse;\n  border-spacing: 0;\n}\nbody {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n}\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n}\ninput[type='color'] {\n  width: 26px;\n  height: 28px;\n  border: none;\n  cursor: pointer;\n  background: transparent;\n  appearance: none;\n  padding: 0;\n}\n.dialog-resource {\n  width: 80%;\n}\n",""]);const s=r},5047:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var i=n(4933),a=n.n(i),o=n(3476),r=n.n(o)()(a());r.push([e.id,"html, body {\n    user-select: none;\n    -webkit-tap-highlight-color: none;\n    width: 100%;\n    height: 100%;\n}\n\n  \n\n.status-Loading {\n    background: linear-gradient(90deg,#2e32380d 25%,#2e323817 44%,#2e32380d 88%);\n    background-size: 400% 100%;\n    animation: skeleton-loading 3s ease infinite;\n    animation-fill-mode: forwards;\n}\n\n@keyframes skeleton-loading {\n    0% {\n        background-position: 100% 50%\n    }\n\n    to {\n        background-position: 0 50%\n    }\n}\n\n.status-Error {\n\n}",""]);const s=r},6801:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQwIDc5LjE2MDQ1MSwgMjAxNy8wNS8wNi0wMTowODoyMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDkzNzZFN0RDODhFMTFFOEExOUJFNkQ0MTNFM0Q2OTYiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDkzNzZFN0VDODhFMTFFOEExOUJFNkQ0MTNFM0Q2OTYiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpEOTM3NkU3QkM4OEUxMUU4QTE5QkU2RDQxM0UzRDY5NiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEOTM3NkU3Q0M4OEUxMUU4QTE5QkU2RDQxM0UzRDY5NiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PktroGEAAAAoSURBVHjaYvz06RMDDPDy8sLZTAw4AOkSjP///4dzPn/+TAs7AAIMAG56COJosoI3AAAAAElFTkSuQmCC"},7363:e=>{"use strict";e.exports=React},1533:e=>{"use strict";e.exports=ReactDOM}},n={};function i(e){var a=n[e];if(void 0!==a)return a.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=t,e=[],i.O=(t,n,a,o)=>{if(!n){var r=1/0;for(p=0;p<e.length;p++){for(var[n,a,o]=e[p],s=!0,l=0;l<n.length;l++)(!1&o||r>=o)&&Object.keys(i.O).every((e=>i.O[e](n[l])))?n.splice(l--,1):(s=!1,o<r&&(r=o));if(s){e.splice(p--,1);var c=a();void 0!==c&&(t=c)}}return t}o=o||0;for(var p=e.length;p>0&&e[p-1][2]>o;p--)e[p]=e[p-1];e[p]=[n,a,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="./",(()=>{i.b=document.baseURI||self.location.href;var e={179:0};i.O.j=t=>0===e[t];var t=(t,n)=>{var a,o,[r,s,l]=n,c=0;if(r.some((t=>0!==e[t]))){for(a in s)i.o(s,a)&&(i.m[a]=s[a]);if(l)var p=l(i)}for(t&&t(n);c<r.length;c++)o=r[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(p)},n=globalThis.webpackChunkridge_editor=globalThis.webpackChunkridge_editor||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),i.nc=void 0;var a=i.O(void 0,[736],(()=>i(4797)));a=i.O(a)})();