(()=>{"use strict";var t={761:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s="",r=void 0!==e[5];return e[4]&&(s+="@supports (".concat(e[4],") {")),e[2]&&(s+="@media ".concat(e[2]," {")),r&&(s+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),s+=t(e),r&&(s+="}"),e[2]&&(s+="}"),e[4]&&(s+="}"),s})).join("")},e.i=function(t,s,r,n,a){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(r)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(i[l]=!0)}for(var c=0;c<t.length;c++){var p=[].concat(t[c]);r&&i[p[0]]||(void 0!==a&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=a),s&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=s):p[2]=s),n&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=n):p[4]="".concat(n)),e.push(p))}},e}},210:t=>{t.exports=function(t){return t[1]}},190:(t,e,s)=>{s.d(e,{Z:()=>o});var r=s(210),n=s.n(r),a=s(761),i=s.n(a)()(n());i.push([t.id,".switch-container {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    box-sizing: border-box;\n \n}\n\n\n.switch-container .content-wrapper {\n    position: absolute;\n    left: 0;\n    top: 0\n}\n\n.switch-container .content-wrapper .state-content {\n    position: absolute;\n}",""]);const o=i},62:t=>{var e=[];function s(t){for(var s=-1,r=0;r<e.length;r++)if(e[r].identifier===t){s=r;break}return s}function r(t,r){for(var a={},i=[],o=0;o<t.length;o++){var l=t[o],c=r.base?l[0]+r.base:l[0],p=a[c]||0,d="".concat(c," ").concat(p);a[c]=p+1;var h=s(d),u={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(u);else{var f=n(u,r);r.byIndex=o,e.splice(o,0,{identifier:d,updater:f,references:1})}i.push(d)}return i}function n(t,e){var s=e.domAPI(e);return s.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;s.update(t=e)}else s.remove()}}t.exports=function(t,n){var a=r(t=t||[],n=n||{});return function(t){t=t||[];for(var i=0;i<a.length;i++){var o=s(a[i]);e[o].references--}for(var l=r(t,n),c=0;c<a.length;c++){var p=s(a[c]);0===e[p].references&&(e[p].updater(),e.splice(p,1))}a=l}}},793:t=>{var e={};t.exports=function(t,s){var r=function(t){if(void 0===e[t]){var s=document.querySelector(t);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}e[t]=s}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(s)}},173:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},892:(t,e,s)=>{t.exports=function(t){var e=s.nc;e&&t.setAttribute("nonce",e)}},36:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(s){!function(t,e,s){var r="";s.supports&&(r+="@supports (".concat(s.supports,") {")),s.media&&(r+="@media ".concat(s.media," {"));var n=void 0!==s.layer;n&&(r+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),r+=s.css,n&&(r+="}"),s.media&&(r+="}"),s.supports&&(r+="}");var a=s.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,s)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},464:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function s(r){var n=e[r];if(void 0!==n)return n.exports;var a=e[r]={id:r,exports:{}};return t[r](a,a.exports,s),a.exports}s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nc=void 0;var r={};(()=>{s.r(r),s.d(r,{default:()=>m});const t=class{constructor(t){this.props=t}async mount(t){}isDroppable(){}onDragOver(t){}onDragOut(){}getChildren(){}appendChild(t,e,s){}removeChild(t,e){}updateChildStyle(){}update(t){}};var e=s(62),n=s.n(e),a=s(36),i=s.n(a),o=s(793),l=s.n(o),c=s(892),p=s.n(c),d=s(173),h=s.n(d),u=s(464),f=s.n(u),y=s(190),v={};v.styleTagTransform=f(),v.setAttributes=p(),v.insert=l().bind(null,"head"),v.domAPI=i(),v.insertStyleElement=h(),n()(y.Z,v),y.Z&&y.Z.locals&&y.Z.locals;const m={name:"switch-container",component:class extends t{constructor(t){super(t),this.isEdit="edit"===t.__mode,this.pageManager=t.__pageManager,this.childWrapperIds=[]}async mount(t){const{states:e,children:s,effect:r}=this.props,{list:n}=e;this.el=t;const a=document.createElement("div");if(a.classList.add("switch-container"),t.appendChild(a),this.contentWrapperEl=document.createElement("div"),this.contentWrapperEl.classList.add("content-wrapper"),this.updateContentContainerStyle(),a.appendChild(this.contentWrapperEl),this.ensureStateContainers(this.contentWrapperEl,n,r),s&&s.length&&(this.childWrapperIds=s.map((t=>t?t.id:null))),this.isEdit&&s)for(let t=0;t<s.length;t++)if(s[t]&&s[t].loadAndMount){const e=document.createElement("div");this.contentWrapperEl.children[t].appendChild(e),await s[t].loadAndMount(e)}await this.toggleState()}updateContentContainerStyle(){const{effect:t,states:e}=this.props,{list:s}=e;"none"===t||"fade"===t?(this.contentWrapperEl.style.width="100%",this.contentWrapperEl.style.height="100%"):"v-slide"===t?(this.contentWrapperEl.style.width=100*s.length+"%",this.contentWrapperEl.style.height="100%"):"h-slide"===t&&(this.contentWrapperEl.style.width="100%",this.contentWrapperEl.style.height=100*s.length+"%")}update(t){if("string"!=typeof t.states)if(t.effect!==this.props.effect)this.updateContentContainerStyle(),this.toggleState(),this.props.effect=t.effect;else if(this.props.states.current!==t.states.current)this.toggleState(t.states.current),this.props.states.current=t.states.current;else if(this.props.states.list.length<t.states.list.length)this.ensureStateContainers(this.contentWrapperEl,t.states.list,this.props.effect),this.toggleState(),this.props.states.list=JSON.parse(JSON.stringify(t.states.list));else if(this.props.states.list.length>t.states.list.length){let e=-1;for(let s=0;s<this.props.states.list.length;s++)if(this.props.states.list[s]!==t.states.list[s]){e=s;break}this.props.states.list.indexOf(this.props.states.current)===e&&(e===this.props.states.list.length-1?this.props.states.current=this.props.states.list[e-1]:this.props.states.current=t.states.list[e]),this.removeState(e),this.toggleState(),this.props.states.list=JSON.parse(JSON.stringify(t.states.list))}else{for(let e=0;e<t.states.list.length;e++)this.props.states.list[e]!==t.states.list[e]&&this.renameState(e,t.states.list[e]);this.props.states.list=JSON.parse(JSON.stringify(t.states.list))}else this.toggleState(t.states)}ensureStateContainers(t,e,s){for(let r=0;r<e.length;r++){let n=t.querySelector(`div[state="${e[r]}"]`);null==n&&(n=document.createElement("div"),n.classList.add("state-content"),n.setAttribute("state",e[r]),n.style.position="absolute","none"===s||"fade"===s?(n.style.left=0,n.style.top=0):"v-slide"===s?(n.style.left=100*r+"%",n.style.top=0):"h-slide"===s&&(n.style.left=0,n.style.top=100*r+"%"),n.style.width="100%",n.style.height="100%",t.appendChild(n))}}removeState(t){const e=this.contentWrapperEl.children[t];e&&this.contentWrapperEl.removeChild(e),this.childWrapperIds[t]&&this.pageManager.removeElement(this.childWrapperIds[t]),this.childWrapperIds.splice(t,1)}renameState(t,e){const{states:s}=this.props,{current:r,list:n}=s;this.contentWrapperEl.children[t].setAttribute("state",e)}async toggleState(t){const{contentWrapperEl:e}=this,{states:s,children:r,effect:n}=this.props,{current:a,list:i}=s,o=t||a,l=i.indexOf(o);l>-1&&(this.currentStateEl=e.querySelector(`div[state="${o}"]`),"none"!==n&&"fade"!==n||Array.from(e.querySelectorAll("div[state]")).forEach((t=>{t.getAttribute("state")===o?"none"===n?t.style.display="initial":"fade"===n&&(t.classList.add("fade-in"),t.classList.remove("fade-out")):"none"===n?t.style.display="none":"fade"===n&&(t.classList.add("fade-out"),t.classList.remove("fade-in"))})),r&&r[l]&&!r[l].el&&r[l].loadAndMount&&await r[l].loadAndMount(this.currentStateEl))}onDragOver(t){if(this.currentStateEl&&!this.currentStateEl.querySelector(".ridge-element")&&!this.currentStateEl.querySelector(":scope > .drop-shadow")){const t=document.createElement("div");t.classList.add("drop-shadow"),t.style.width="100%",t.style.height="100%",t.style.borderRadius="var(--semi-border-radius-small)",t.style.border="2px dashed var(--semi-color-primary)",t.style.backgroundColor="var(--semi-color-primary-light-default)",this.currentStateEl.appendChild(t)}}onDragOut(){this.checkRemoveShadowNode()}checkRemoveShadowNode(){this.currentStateEl&&this.currentStateEl.querySelector(":scope > .drop-shadow")&&this.currentStateEl.removeChild(this.currentStateEl.querySelector(":scope > .drop-shadow"))}appendChild(t){const{states:e,children:s,effect:r}=this.props,{current:n,list:a}=e;if(this.currentStateEl){this.currentStateEl.appendChild(t.el),this.updateChildStyle(t);const s=e.list.indexOf(n);this.childWrapperIds[s]=t.id,this.checkRemoveShadowNode()}return{children:this.childWrapperIds}}removeChild(t,e){const{states:s}=this.props,{current:r,list:n}=s;return t.el.parentElement===this.currentStateEl?(e||this.onDragOver(),this.currentStateEl.removeChild(t.el)):console.warn("not children "),this.childWrapperIds[n.indexOf(r)]=null,{children:this.childWrapperIds}}getShadowStyle(t){return{width:"100%",height:"100%"}}updateChildStyle(t){t.el.style.position="absolute",t.el.style.left=0,t.el.style.top=0,t.el.style.transform="",t.el.style.width="100%",t.el.style.height="100%"}},label:"切换容器",type:"vanilla",order:7,icon:"bi bi-collection",props:[{name:"states",label:"状态",connect:"current",type:"states",value:{current:"State1",list:["State1","State2"]}},{name:"effect",label:"切换效果",type:"string",control:"select",optionList:[{label:"无效果",value:"none"},{label:"横向平移",value:"v-slide"},{label:"纵向平移",value:"h-slide"},{label:"渐变",value:"fade"}],value:"none"},{name:"preload",label:"预加载",type:"boolean",value:!0},{name:"classNames",label:"样式",type:"class",value:[]},{name:"children",hidden:!0,type:"children",value:[]}],childStyle:[],width:540,height:360}})(),this["ridge-container/tab"]=r})();