(()=>{"use strict";var e={d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{default:()=>o});const r={style:e=>{const t={background:e.background,padding:e.padding,borderRadius:e.radius,boxShadow:e.shadow};return"object"==typeof e.border?(t.borderTop=e.border[0],t.borderRight=e.border[1],t.borderBottom=e.border[2],t.borderLeft=e.border[3]):"string"==typeof e.border&&(t.border=e.border),t},props:[{name:"border",label:"边框",type:"object",control:"border",value:"1px solid #ccc"},{name:"radius",label:"圆角",type:"string",control:"px4",value:"3px"},{name:"padding",label:"内边",type:"string",control:"px4",value:"2px"},{name:"background",label:"背景",type:"string",control:"background"},{name:"shadow",label:"阴影",type:"string",control:"boxshadow",value:""}]},o={name:"list-container",component:class{constructor(e){this.props=e}isEditMode(){return!(!this.props.__pageManager||"edit"!==this.props.__pageManager.mode)}async mount(e){const{renderItem:t}=this.props;this.el=e,this.containerEl=document.createElement("div"),this.containerEl.classList.add("list-container"),Object.assign(this.containerEl.style,this.getContainerStyle(this.props)),e.appendChild(this.containerEl),t&&await t.preload(!0),this.isEditMode()?this.renderInEditor():this.renderUpdateListItems()}renderInEditor(){const{renderItem:e}=this.props;if(this.containerEl.textContent="",!this.containerEl.querySelector("SLOT")){const e=document.createElement("slot");e.setAttribute("name","renderItem"),e.elementWrapper=this.props.__elementWrapper,this.containerEl.appendChild(e),this.slotEl=e}if(this.slotEl.style.display="block",this.slotEl.style.width="calc(100% - 20px)",this.slotEl.style.height="calc(100% - 20px)",e){if(!e.isMounted()){const t=document.createElement("div");e.mount(t)}e.setConfigStyle({position:"relative",x:0,y:0}),this.slotEl.appendChild(e.el),this.slotEl.setAttribute("tpl",e.id)}else this.slotEl.style.border="1px dashed rgb(164,224,167)",this.slotEl.style.display="flex",this.slotEl.style.alignItems="center",this.slotEl.style.justifyContent="center",this.slotEl.style.fontSize="14px",this.slotEl.innerHTML="请拖拽放入列表项模板"}renderUpdateListItems(){this.slotEl&&(this.slotEl.parentElement.removeChild(this.slotEl),this.slotEl=null);const{itemKey:e,dataSource:t,renderItem:r}=this.props;if(t&&r){for(let o=0;o<t.length;o++){const i=t[o];let l=this.containerEl.children[o];if(e&&(l=this.containerEl.querySelector('div[key="'+i[e]+'"]')),l)l!==this.containerEl.children[o]&&this.containerEl.insertBefore(l,this.containerEl.children[o]),l.elementWrapper.setScopeStateValues({$item:i,$index:o,$list:t});else{const l=document.createElement("div");e&&l.setAttribute("key",i[e]),this.containerEl.children[o]?this.containerEl.insertBefore(l,this.containerEl.children[o]):this.containerEl.appendChild(l);const n=r.clone();n.setScopeStateValues({$hover:!1,$item:i,$index:o,$list:t}),n.mount(l),l.onmouseenter=e=>{n.setScopeStateValues({$hover:!0})},l.onmouseleave=e=>{n.setScopeStateValues({$hover:!1})}}}for(;this.containerEl.childElementCount>t.length;)this.containerEl.lastChild.elementWrapper.unmount();this.itemInstanceWrappers=Array.from(this.containerEl.childNodes).map((e=>e.elementWrapper))}}getContainerStyle(){const e={width:"100%",height:"100%",overflow:"overlay"};return Object.assign(e,r.style(this.props)),this.props.grid||(e.display="flex","vertical"===this.props.itemLayout?e.flexDirection="column":"horizontal"===this.props.itemLayout&&(e.flexDirection="row"),e.flexWrap="wrap",e.gap="10px"),e}getSlotStyle(){return"vertical"===this.props.itemLayout?{border:"1px dashed rgb(164,224,167)",display:"block",width:"100%",height:"80px"}:{border:"1px dashed rgb(164,224,167)",display:"block",height:"100%",width:"80px"}}updateChild(e){e.setConfigStyle({x:0,y:0})}update(e){this.props=e,this.isEditMode()?this.renderInEditor():this.renderUpdateListItems(),Object.assign(this.containerEl.style,this.getContainerStyle(this.props))}},label:"列表容器",icon:"IconListView",type:"vanilla",props:[{name:"dataSource",label:"数据",type:"array",control:"json",value:[]},{name:"itemKey",label:"数据键",type:"string",value:""},{name:"itemLayout",label:"布局",type:"string",control:"select",optionList:[{label:"纵向",value:"vertical"},{label:"横向",value:"horizontal"}],value:"vertical"},{name:"grid",label:"网格",type:"object",control:"grid",value:{enabled:!1}},{name:"renderItem",label:"单项模板",type:"slot"},{name:"coverContainer",label:"填充",type:"boolean"},...r.props],width:180,height:60};this["/ridge-container/build/list-index.d.js"]=t})();